{
  "version": 3,
  "sources": ["../../../server/chat-commands/core.ts"],
  "sourcesContent": ["/**\n * Core commands\n * Pokemon Showdown - http://pokemonshowdown.com/\n *\n * These are core commands - basic commands required for Pokemon Showdown\n * to run. A lot of these are sent by the client.\n *\n * System commands should not be modified, added, or removed. If you'd\n * like to modify or add commands, add or edit files in chat-plugins/\n *\n * For the API, see chat-plugins/COMMANDS.md\n *\n * @license MIT\n */\n\n/* eslint no-else-return: \"error\" */\nimport { Utils, ProcessManager } from '../../lib';\nimport type { UserSettings } from '../users';\nimport type { GlobalPermission, RoomPermission } from '../user-groups';\n\nexport const crqHandlers: { [k: string]: Chat.CRQHandler } = {\n\tuserdetails(target, user, trustable) {\n\t\tif (target.length > 18) {\n\t\t\treturn null;\n\t\t}\n\n\t\tconst targetUser = Users.get(target);\n\t\tif (!trustable || !targetUser) {\n\t\t\treturn {\n\t\t\t\tid: target,\n\t\t\t\tuserid: toID(target),\n\t\t\t\tname: target,\n\t\t\t\trooms: false,\n\t\t\t};\n\t\t}\n\t\tinterface RoomData { p1?: string; p2?: string; isPrivate?: boolean | 'hidden' | 'voice' }\n\t\tlet roomList: { [roomid: string]: RoomData } | false = {};\n\t\tfor (const roomid of targetUser.inRooms) {\n\t\t\tconst targetRoom = Rooms.get(roomid);\n\t\t\tif (!targetRoom) continue; // shouldn't happen\n\t\t\tconst roomData: RoomData = {};\n\t\t\tif (targetRoom.settings.isPrivate) {\n\t\t\t\tif (!user.inRooms.has(roomid) && !user.games.has(roomid)) continue;\n\t\t\t\troomData.isPrivate = true;\n\t\t\t}\n\t\t\tif (targetRoom.battle) {\n\t\t\t\tif (targetUser.settings.hideBattlesFromTrainerCard && user.id !== targetUser.id && !user.can('lock')) continue;\n\t\t\t\tconst battle = targetRoom.battle;\n\t\t\t\troomData.p1 = battle.p1 ? ' ' + battle.p1.name : '';\n\t\t\t\troomData.p2 = battle.p2 ? ' ' + battle.p2.name : '';\n\t\t\t}\n\t\t\tlet roomidWithAuth: string = roomid;\n\t\t\tif (targetRoom.auth.has(targetUser.id)) {\n\t\t\t\troomidWithAuth = targetRoom.auth.getDirect(targetUser.id) + roomid;\n\t\t\t}\n\t\t\troomList[roomidWithAuth] = roomData;\n\t\t}\n\t\tif (!targetUser.connected) roomList = false;\n\t\tlet group = targetUser.tempGroup;\n\t\tif (targetUser.locked) group = Config.punishgroups?.locked?.symbol ?? '\\u203d';\n\t\tif (targetUser.namelocked) group = Config.punishgroups?.namelocked?.symbol ?? '\u2716';\n\t\tconst sectionleader = Users.globalAuth.sectionLeaders.has(targetUser.id);\n\t\treturn {\n\t\t\tid: target,\n\t\t\tuserid: targetUser.id,\n\t\t\tname: targetUser.name,\n\t\t\tavatar: targetUser.avatar,\n\t\t\tgroup,\n\t\t\tcustomgroup: sectionleader ? \"Section Leader\" : undefined,\n\t\t\tautoconfirmed: targetUser.autoconfirmed ? true : undefined,\n\t\t\tstatus: targetUser.getStatus() || undefined,\n\t\t\trooms: roomList,\n\t\t\tfriended: user.friends?.has(targetUser.id) || undefined,\n\t\t};\n\t},\n\troomlist(target, user, trustable) {\n\t\tif (!trustable) return false;\n\t\treturn { rooms: Rooms.global.getBattles(target) };\n\t},\n\trooms(target, user, trustable) {\n\t\tif (!trustable) return false;\n\t\treturn Rooms.global.getRooms(user);\n\t},\n\tladdertop(target, user, trustable) {\n\t\tif (!trustable) return false;\n\t\tconst [format, prefix] = target.split(',').map(x => x.trim());\n\t\treturn Ladders(toID(format)).getTop(prefix);\n\t},\n\troominfo(target, user, trustable) {\n\t\tif (!trustable) return false;\n\n\t\tif (target.length > 225) {\n\t\t\treturn null;\n\t\t}\n\t\tconst targetRoom = Rooms.get(target);\n\t\tif (!targetRoom || (\n\t\t\ttargetRoom.settings.isPrivate && !user.inRooms.has(targetRoom.roomid) && !user.games.has(targetRoom.roomid)\n\t\t)) {\n\t\t\tconst roominfo = { id: target, error: 'not found or access denied' };\n\t\t\treturn roominfo;\n\t\t}\n\t\tlet visibility;\n\t\tif (targetRoom.settings.isPrivate) {\n\t\t\tvisibility = (targetRoom.settings.isPrivate === 'hidden') ? 'hidden' : 'secret';\n\t\t} else {\n\t\t\tvisibility = 'public';\n\t\t}\n\n\t\tconst roominfo: AnyObject = {\n\t\t\tid: target,\n\t\t\troomid: targetRoom.roomid,\n\t\t\ttitle: targetRoom.title,\n\t\t\ttype: targetRoom.type,\n\t\t\tvisibility,\n\t\t\tmodchat: targetRoom.settings.modchat,\n\t\t\tmodjoin: targetRoom.settings.modjoin,\n\t\t\tauth: {},\n\t\t\tusers: [],\n\t\t};\n\n\t\tfor (const [id, rank] of targetRoom.auth) {\n\t\t\tif (!roominfo.auth[rank]) roominfo.auth[rank] = [];\n\t\t\troominfo.auth[rank].push(id);\n\t\t}\n\n\t\tfor (const userid in targetRoom.users) {\n\t\t\tconst curUser = targetRoom.users[userid];\n\t\t\tif (!curUser.named) continue;\n\t\t\tconst userinfo = curUser.getIdentity(targetRoom);\n\t\t\troominfo.users.push(userinfo);\n\t\t}\n\t\treturn roominfo;\n\t},\n\tfullformat(target, user, trustable) {\n\t\tif (!trustable) return false;\n\n\t\tif (target.length > 225) {\n\t\t\treturn null;\n\t\t}\n\t\tconst targetRoom = Rooms.get(target);\n\t\tif (!targetRoom?.battle?.playerTable[user.id]) {\n\t\t\treturn null;\n\t\t}\n\n\t\treturn targetRoom.battle.format;\n\t},\n\tcmdsearch(target, user, trustable) {\n\t\t// in no world should this be a thing. our longest command name is 37 chars\n\t\tif (target.length > 40) return null;\n\t\tconst cmdPrefix = target.charAt(0);\n\t\tif (!['/', '!'].includes(cmdPrefix)) return null;\n\t\ttarget = toID(target.slice(1));\n\n\t\tconst results = [];\n\t\tfor (const command of Chat.allCommands()) {\n\t\t\tif (cmdPrefix === '!' && !command.broadcastable) continue;\n\t\t\tconst req = command.requiredPermission as GlobalPermission;\n\t\t\tif (!!req &&\n\t\t\t\t!(command.hasRoomPermissions ? !!this.room && user.can(req as RoomPermission, null, this.room) : user.can(req))\n\t\t\t) {\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tconst cmds = [\n\t\t\t\tcommand.fullCmd,\n\t\t\t\t...command.aliases.map(x => command.fullCmd.replace(command.cmd, `${x}`)),\n\t\t\t];\n\t\t\tfor (const cmd of cmds) {\n\t\t\t\tif (toID(cmd).startsWith(target)) {\n\t\t\t\t\tresults.push(cmdPrefix + cmd);\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t\t// limit number of results to prevent spam\n\t\t\tif (results.length >= 20) break;\n\t\t}\n\t\treturn results;\n\t},\n};\n\nexport const commands: Chat.ChatCommands = {\n\tasync version(target, room, user) {\n\t\tif (!this.runBroadcast()) return;\n\t\tconst version = Chat.packageData.version;\n\t\tlet gitVersion;\n\t\ttry {\n\t\t\tgitVersion = (await ProcessManager.exec(['git', 'rev-parse', '--short', 'HEAD'])).stdout.trim();\n\t\t} catch {}\n\t\tthis.sendReplyBox(this.tr`Server version: <b>${version}${gitVersion ? ` (commit ${gitVersion})` : ''}</b>`);\n\t},\n\tversionhelp: [\n\t\t`/version - Get the current server version.`,\n\t],\n\n\tuserlist(target, room, user) {\n\t\troom = this.requireRoom();\n\t\tconst userList = [];\n\n\t\tfor (const id in room.users) {\n\t\t\tconst curUser = Users.get(room.users[id]);\n\t\t\tif (!curUser?.named) continue;\n\t\t\tuserList.push(Utils.escapeHTML(curUser.getIdentity(room)));\n\t\t}\n\n\t\tlet output = `There ${Chat.plural(userList, \"are\", \"is\")} <strong style=\"color:#24678d\">${Chat.count(userList, \"</strong> users\")} in this room:<br />`;\n\t\toutput += userList.join(`, `);\n\n\t\tthis.sendReplyBox(output);\n\t},\n\tuserlisthelp: [`/userlist - Displays a list of users who are currently in the room.`],\n\n\tmee: 'me',\n\tme(target, room, user) {\n\t\tif (this.cmd === 'mee' && /[A-Z-a-z0-9/]/.test(target.charAt(0))) {\n\t\t\tthrow new Chat.ErrorMessage(this.tr`/mee - must not start with a letter or number`);\n\t\t}\n\t\ttarget = this.checkChat(`/${this.cmd} ${target || ''}`);\n\n\t\tif (this.message.startsWith(`/ME`)) {\n\t\t\tconst uppercaseIdentity = user.getIdentity(room).toUpperCase();\n\t\t\tif (this.pmTarget) {\n\t\t\t\tconst msg = `|pm|${uppercaseIdentity}|${this.pmTarget.getIdentity()}|${target}`;\n\t\t\t\tuser.send(msg);\n\t\t\t\tif (this.pmTarget !== user) this.pmTarget.send(msg);\n\t\t\t} else {\n\t\t\t\tthis.add(`|c|${uppercaseIdentity}|${target}`);\n\t\t\t}\n\t\t\treturn;\n\t\t}\n\n\t\treturn target;\n\t},\n\tmehelp: [`/me [action] - Adds the given [action] into chat, attributed to the user.`],\n\n\tshrug(target) {\n\t\ttarget = target ? ' ' + target + ' ' : '';\n\t\tif (target.startsWith(' /me')) target = target.slice(1);\n\t\treturn this.checkChat(target + '\u00AF\\\\_(\u30C4)_/\u00AF');\n\t},\n\tshrughelp: ['/shrug [message] - Sends the given message, if any, appended with \u00AF\\\\_(\u30C4)_/\u00AF'],\n\n\ttableflip(target) {\n\t\ttarget = target ? ' ' + target + ' ' : '';\n\t\tif (target.startsWith(' /me')) target = target.slice(1);\n\t\treturn this.checkChat(target + '(\u256F\u00B0\u25A1\u00B0\uFF09\u256F\uFE35 \u253B\u2501\u253B');\n\t},\n\ttablefliphelp: ['/tableflip [message] - Sends the given message, if any, appended with (\u256F\u00B0\u25A1\u00B0\uFF09\u256F\uFE35 \u253B\u2501\u253B'],\n\n\ttableunflip(target) {\n\t\ttarget = target ? ' ' + target + ' ' : '';\n\t\tif (target.startsWith(' /me')) target = target.slice(1);\n\t\treturn this.checkChat(target + '\u252C\u2500\u2500\u252C\u25E1\uFF89(\u00B0 -\u00B0\uFF89)');\n\t},\n\ttableunfliphelp: ['/tableunflip [message] - Sends the given message, if any, appended with \u252C\u2500\u2500\u252C\u25E1\uFF89(\u00B0 -\u00B0\uFF89)'],\n\n\t'battle!': 'battle',\n\tbattle(target, room, user, connection, cmd) {\n\t\tif (cmd === 'battle') {\n\t\t\treturn this.sendReply(this.tr`What?! How are you not more excited to battle?! Try /battle! to show me you're ready.`);\n\t\t}\n\t\tif (!target) target = \"randombattle\";\n\t\treturn this.parse(`/search ${target}`);\n\t},\n\tbattlehelp: [\n\t\t`/battle! [format] - Starts a battle in the given [format].`,\n\t\t`If none is given, defaults to current generation random battle.`,\n\t],\n\n\tsignout: 'logout',\n\tlogout(target, room, user) {\n\t\tuser.resetName();\n\t},\n\tlogouthelp: [`/logout - Logs you out and ends your session.`],\n\n\tnoreply(target, room, user) {\n\t\tif (!target.startsWith('/')) return this.parse('/help noreply');\n\t\treturn this.parse(target, { isQuiet: true });\n\t},\n\tnoreplyhelp: [`/noreply [command] - Runs the command without displaying the response.`],\n\n\tasync linksmogon(target, room, user) {\n\t\tif (Config.smogonauth && !Users.globalAuth.atLeast(user, Config.smogonauth)) {\n\t\t\tthrow new Chat.ErrorMessage(\"Access denied.\");\n\t\t}\n\t\tif (!user.registered) {\n\t\t\tthrow new Chat.ErrorMessage(\n\t\t\t\t\"You must be registered in order to use this command. If you just registered, please refresh and try again.\"\n\t\t\t);\n\t\t}\n\t\tthis.sendReply(\"Linking...\");\n\t\tconst response = await LoginServer.request(\"smogon/validate\", {\n\t\t\tusername: user.id,\n\t\t});\n\t\tconst name = response[0]?.signed_username;\n\t\tif (response[1] || !name) {\n\t\t\tthrow new Chat.ErrorMessage(\"Error while verifying username: \" + (response[1]?.message || \"malformed name received\"));\n\t\t}\n\t\tconst link = `https://www.smogon.com/tools/connect-ps-account/${user.id}/${name}`;\n\t\tuser.send(`|openpage|${link}`);\n\t\tthis.sendReply(`|html|If the page failed to open, you may link your Smogon and PS accounts by clicking <a href=\"${link}\">this link</a>.`);\n\t},\n\n\tasync msgroom(target, room, user, connection) {\n\t\tconst [targetId, message] = Utils.splitFirst(target, ',').map(i => i.trim());\n\t\tif (!targetId || !message) {\n\t\t\treturn this.parse(`/help msgroom`);\n\t\t}\n\t\tthis.checkRecursion();\n\n\t\tconst targetRoom = Rooms.search(targetId.trim());\n\t\tif (!targetRoom) throw new Chat.ErrorMessage(`Room not found.`);\n\t\tif (message.trim().startsWith('/msgroom ')) {\n\t\t\tthrow new Chat.ErrorMessage(`Please do not nest /msgroom inside itself.`);\n\t\t}\n\t\tconst subcontext = new Chat.CommandContext({ room: targetRoom, message, user, connection });\n\t\tawait subcontext.parse();\n\t},\n\tmsgroomhelp: [`/msgroom [room], [command] - Runs the [command] in the given [room].`],\n\n\tr: 'reply',\n\treply(target, room, user) {\n\t\tif (!target) return this.parse('/help reply');\n\t\tif (!user.lastPM) {\n\t\t\tthrow new Chat.ErrorMessage(this.tr`No one has PMed you yet.`);\n\t\t}\n\t\treturn this.parse(`/msg ${user.lastPM || ''}, ${target}`);\n\t},\n\treplyhelp: [`/reply OR /r [message] - Send a message to the last user you got a message from, or sent a message to.`],\n\n\tdm: 'msg',\n\tpm: 'msg',\n\twhisper: 'msg',\n\tw: 'msg',\n\tmsg(target, room, user, connection) {\n\t\tif (!target) return this.parse('/help msg');\n\t\tif (!target.includes(',')) {\n\t\t\tthis.errorReply(this.tr`You forgot the comma.`);\n\t\t\treturn this.parse('/help msg');\n\t\t}\n\t\tthis.checkRecursion();\n\n\t\tconst { targetUser, targetUsername, rest: message } = this.splitUser(target);\n\t\tif (targetUsername === '~') {\n\t\t\tthis.pmTarget = null;\n\t\t\tthis.room = null;\n\t\t} else if (!targetUser) {\n\t\t\tif (Chat.PrivateMessages.offlineIsEnabled) {\n\t\t\t\tif (user.lastCommand === 'pm') {\n\t\t\t\t\t// don't delete lastCommand so they can just keep sending pms\n\t\t\t\t\treturn this.parse(`/offlinemsg ${targetUsername},${message}`);\n\t\t\t\t}\n\t\t\t\tuser.lastCommand = 'pm';\n\t\t\t\tthrow new Chat.ErrorMessage(\n\t\t\t\t\tthis.tr`User ${targetUsername} is offline. Send the message again to confirm. If you are using /msg, use /offlinemsg instead.`\n\t\t\t\t);\n\t\t\t}\n\t\t\tlet error = this.tr`User ${targetUsername} not found. Did you misspell their name?`;\n\t\t\terror = `|pm|${this.user.getIdentity()}| ${targetUsername}|/error ${error}`;\n\t\t\tconnection.send(error);\n\t\t\treturn;\n\t\t} else {\n\t\t\tthis.pmTarget = targetUser;\n\t\t\tthis.room = null;\n\t\t}\n\n\t\tif (targetUser && !targetUser.connected) {\n\t\t\tif (Chat.PrivateMessages.offlineIsEnabled) {\n\t\t\t\tif (user.lastCommand === 'pm') {\n\t\t\t\t\t// don't delete lastCommand so they can just keep sending pms\n\t\t\t\t\treturn this.parse(`/offlinemsg ${targetUser.getLastId()},${message}`);\n\t\t\t\t}\n\t\t\t\tuser.lastCommand = 'pm';\n\t\t\t\tthrow new Chat.ErrorMessage(\n\t\t\t\t\tthis.tr`User ${targetUsername} is offline. Send the message again to confirm. If you are using /msg, use /offlinemsg instead.`\n\t\t\t\t);\n\t\t\t}\n\t\t\tthrow new Chat.ErrorMessage(`${targetUsername} is offline.`);\n\t\t}\n\n\t\treturn this.parse(message);\n\t},\n\tmsghelp: [`/msg OR /whisper OR /w [username], [message] - Send a private message.`],\n\n\tofflinepm: 'offlinemsg',\n\topm: 'offlinemsg',\n\tofflinewhisper: 'offlinemsg',\n\tofw: 'offlinemsg',\n\tasync offlinemsg(target, room, user) {\n\t\ttarget = target.trim();\n\t\tif (!target) return this.parse('/help offlinemsg');\n\t\tif (!Chat.PrivateMessages.offlineIsEnabled) {\n\t\t\tthrow new Chat.ErrorMessage(`Offline private messages have been disabled.`);\n\t\t}\n\t\tlet [username, message] = Utils.splitFirst(target, ',').map(i => i.trim());\n\t\tconst userid = toID(username);\n\t\tChat.PrivateMessages.checkCanPM(user, userid);\n\t\tif (!userid || !message) {\n\t\t\treturn this.parse('/help offlinemsg');\n\t\t}\n\t\tif (Chat.parseCommand(message)) {\n\t\t\tthrow new Chat.ErrorMessage(`You cannot send commands in offline PMs.`);\n\t\t}\n\t\tif (userid === user.id) {\n\t\t\tthrow new Chat.ErrorMessage(`You cannot send offline PMs to yourself.`);\n\t\t} else if (userid.startsWith('guest')) {\n\t\t\tthrow new Chat.ErrorMessage('You cannot send offline PMs to guests.');\n\t\t}\n\t\tif (Users.get(userid)?.connected) {\n\t\t\tthis.sendReply(`That user is online, so a normal PM is being sent.`);\n\t\t\treturn this.parse(`/pm ${userid}, ${message}`);\n\t\t}\n\t\tif (userid.length > 18) {\n\t\t\tthrow new Chat.ErrorMessage(`Invalid userid. Must be <=18 characters in length.`);\n\t\t}\n\t\tmessage = this.checkChat(message);\n\t\tif (!message) return;\n\t\tawait Chat.PrivateMessages.sendOffline(userid, user, message, this);\n\t},\n\tofflinemsghelp: [\n\t\t`/offlinemsg [username], [message] - Sends a message to the offline [username], to be received when they log in.`,\n\t],\n\n\treceivedpms: 'offlinepms',\n\tofflinepms() {\n\t\treturn this.parse(`/j view-receivedpms`);\n\t},\n\tofflinepmshelp: [\n\t\t`/offlinepms - View your recently received offline PMs.`,\n\t],\n\n\tinv: 'invite',\n\tinvite(target, room, user) {\n\t\tif (!target) return this.parse('/help invite');\n\n\t\tconst pmTarget = this.pmTarget; // not room means it's a PM\n\t\tif (!pmTarget) {\n\t\t\tconst users = target.split(',').map(part => part.trim());\n\t\t\tlet targetRoom;\n\t\t\tif (users.length > 1 && Rooms.search(users[users.length - 1])) {\n\t\t\t\ttargetRoom = users.pop();\n\t\t\t} else {\n\t\t\t\ttargetRoom = room;\n\t\t\t}\n\t\t\tif (users.length > 1 && !user.trusted) {\n\t\t\t\tthrow new Chat.ErrorMessage(\"You do not have permission to mass-invite users.\");\n\t\t\t}\n\t\t\tif (users.length > 10) {\n\t\t\t\tthrow new Chat.ErrorMessage(\"You cannot invite more than 10 users at once.\");\n\t\t\t}\n\t\t\tfor (const toInvite of users) {\n\t\t\t\tthis.parse(`/pm ${toInvite}, /invite ${targetRoom}`);\n\t\t\t}\n\t\t\treturn;\n\t\t}\n\n\t\tconst targetRoom = Rooms.search(target);\n\t\tif (!targetRoom) throw new Chat.ErrorMessage(this.tr`The room \"${target}\" was not found.`);\n\n\t\tconst invitesBlocked = pmTarget.settings.blockInvites;\n\t\tif (invitesBlocked) {\n\t\t\tif (invitesBlocked === true ? !user.can('lock') : !Users.globalAuth.atLeast(user, invitesBlocked as GroupSymbol)) {\n\t\t\t\tChat.maybeNotifyBlocked('invite', pmTarget, user);\n\t\t\t\tthrow new Chat.ErrorMessage(`This user is currently blocking room invites.`);\n\t\t\t}\n\t\t}\n\t\tif (!targetRoom.checkModjoin(pmTarget)) {\n\t\t\tthis.room = targetRoom;\n\t\t\tthis.parse(`/roomvoice ${pmTarget.name}`);\n\t\t\tif (!targetRoom.checkModjoin(pmTarget)) {\n\t\t\t\tthrow new Chat.ErrorMessage(this.tr`You do not have permission to invite people into this room.`);\n\t\t\t}\n\t\t}\n\t\tif (pmTarget.id in targetRoom.users) {\n\t\t\tthrow new Chat.ErrorMessage(this.tr`This user is already in \"${targetRoom.title}\".`);\n\t\t}\n\t\treturn this.checkChat(`/invite ${targetRoom.roomid}`);\n\t},\n\tinvitehelp: [\n\t\t`/invite [username] - Invites the player [username] to join the room you sent the command to.`,\n\t\t`/invite [comma-separated usernames] - Invites multiple users to join the room you sent the command to. Requires trusted`,\n\t\t`/invite [username], [roomname] - Invites the player [username] to join the room [roomname].`,\n\t\t`(in a PM) /invite [roomname] - Invites the player you're PMing to join the room [roomname].`,\n\t],\n\n\tblockpm: 'blockpms',\n\tignorepms: 'blockpms',\n\tignorepm: 'blockpms',\n\tblockofflinepms: 'blockpms',\n\tasync blockpms(target, room, user, connection, cmd) {\n\t\ttarget = target.toLowerCase().trim();\n\t\tif (target === 'ac') target = 'autoconfirmed';\n\n\t\tconst isOffline = cmd.includes('offline');\n\t\tconst msg = isOffline ? `offline ` : ``;\n\t\tif (!isOffline && user.settings.blockPMs === (target || true)) {\n\t\t\tthrow new Chat.ErrorMessage(this.tr`You are already blocking ${msg}private messages! To unblock, use /unblockpms`);\n\t\t}\n\t\tif (Users.Auth.isAuthLevel(target)) {\n\t\t\tif (!isOffline) user.settings.blockPMs = target;\n\t\t\tthis.sendReply(this.tr`You are now blocking ${msg}private messages, except from staff and ${target}.`);\n\t\t} else if (target === 'autoconfirmed' || target === 'trusted' || target === 'unlocked') {\n\t\t\tif (!isOffline) user.settings.blockPMs = target;\n\t\t\ttarget = this.tr(target);\n\t\t\tthis.sendReply(this.tr`You are now blocking ${msg}private messages, except from staff and ${target} users.`);\n\t\t} else if (target === 'friends') {\n\t\t\tif (!isOffline) user.settings.blockPMs = target;\n\t\t\tthis.sendReply(this.tr`You are now blocking ${msg}private messages, except from staff and friends.`);\n\t\t} else {\n\t\t\tif (!isOffline) user.settings.blockPMs = true;\n\t\t\tthis.sendReply(this.tr`You are now blocking ${msg}private messages, except from staff.`);\n\t\t}\n\t\tif (isOffline) {\n\t\t\tlet saveValue: string | null = target;\n\t\t\tif (!saveValue) saveValue = 'none';\n\t\t\t// todo: can we do this? atm. no.\n\t\t\tif (['unlocked', 'autoconfirmed'].includes(saveValue)) {\n\t\t\t\tsaveValue = null;\n\t\t\t}\n\t\t\tawait Chat.PrivateMessages.setViewOnly(user, saveValue);\n\t\t}\n\t\tuser.update();\n\t\treturn true;\n\t},\n\tblockpmshelp: [\n\t\t`/blockpms - Blocks private messages except from staff. Unblock them with /unblockpms.`,\n\t\t`/blockpms [unlocked/ac/trusted/+/friends] - Blocks private messages except from staff and the specified group.`,\n\t],\n\n\tunblockpm: 'unblockpms',\n\tunignorepms: 'unblockpms',\n\tunignorepm: 'unblockpms',\n\tunblockofflinepms: 'unblockpms',\n\tasync unblockpms(target, room, user, connection, cmd) {\n\t\tconst isOffline = cmd.includes('offline');\n\t\tconst msg = isOffline ? 'offline ' : '';\n\t\tif (isOffline ? !(await Chat.PrivateMessages.getSettings(user.id)) : !user.settings.blockPMs) {\n\t\t\tthrow new Chat.ErrorMessage(this.tr`You are not blocking ${msg}private messages! To block, use /blockpms`);\n\t\t}\n\t\tif (isOffline) {\n\t\t\tawait Chat.PrivateMessages.deleteSettings(user.id);\n\t\t} else {\n\t\t\t// eslint-disable-next-line require-atomic-updates\n\t\t\tuser.settings.blockPMs = false;\n\t\t}\n\t\tuser.update();\n\t\treturn this.sendReply(this.tr`You are no longer blocking ${msg}private messages.`);\n\t},\n\tunblockpmshelp: [\n\t\t`/unblockpms - Unblocks private messages. Block them with /blockpms.`,\n\t\t`/unblockofflinepms - Unblocks offline private messages. Block them with /blockofflinepms.`,\n\t],\n\n\tunblockinvites: 'blockinvites',\n\tblockinvites(target, room, user, connection, cmd) {\n\t\tconst unblock = cmd.includes('unblock');\n\t\tif (unblock) {\n\t\t\tif (!user.settings.blockInvites) {\n\t\t\t\tthrow new Chat.ErrorMessage(`You are not blocking room invites! To block, use /blockinvites.`);\n\t\t\t}\n\t\t\tuser.settings.blockInvites = false;\n\t\t\tthis.sendReply(`You are no longer blocking room invites.`);\n\t\t} else {\n\t\t\tif (toID(target) === 'ac') target = 'autoconfirmed';\n\t\t\tif (user.settings.blockInvites === (target || true)) {\n\t\t\t\tthrow new Chat.ErrorMessage(\"You are already blocking room invites - to unblock, use /unblockinvites\");\n\t\t\t}\n\t\t\tif (target in Config.groups) {\n\t\t\t\tuser.settings.blockInvites = target as GroupSymbol;\n\t\t\t\tthis.sendReply(this.tr`You are now blocking room invites, except from staff and ${target}.`);\n\t\t\t} else if (target === 'autoconfirmed' || target === 'trusted' || target === 'unlocked') {\n\t\t\t\tuser.settings.blockInvites = target;\n\t\t\t\tthis.sendReply(this.tr`You are now blocking room invites, except from staff and ${target} users.`);\n\t\t\t} else {\n\t\t\t\tuser.settings.blockInvites = true;\n\t\t\t\tthis.sendReply(this.tr`You are now blocking room invites, except from staff.`);\n\t\t\t}\n\t\t}\n\t\treturn user.update();\n\t},\n\tblockinviteshelp: [\n\t\t`/blockinvites [rank] - Allows only users with the given [rank] to invite you to rooms.`,\n\t\t`Valid settings: autoconfirmed, trusted, unlocked, +, %, @, ~.`,\n\t\t`/unblockinvites - Allows anyone to invite you to rooms.`,\n\t],\n\n\tstatus(target, room, user, connection, cmd) {\n\t\tif (user.locked || user.semilocked) {\n\t\t\tthrow new Chat.ErrorMessage(this.tr`Your status cannot be updated while you are locked or semilocked.`);\n\t\t}\n\t\tif (!target) return this.parse('/help status');\n\n\t\tconst maxLength = 70;\n\t\tif (target.length > maxLength) {\n\t\t\tthrow new Chat.ErrorMessage(this.tr`Your status is too long; it must be under ${maxLength} characters.`);\n\t\t}\n\t\ttarget = this.statusfilter(target);\n\t\tif (!target) throw new Chat.ErrorMessage(this.tr`Your status contains a banned word.`);\n\n\t\tuser.setUserMessage(target);\n\t\tthis.sendReply(this.tr`Your status has been set to: ${target}.`);\n\t},\n\tstatushelp: [\n\t\t`/status [note] - Sets a short note as your status, visible when users click your username.`,\n\t\t`Use /clearstatus to clear your status message.`,\n\t],\n\n\tdonotdisturb: 'busy',\n\tdnd: 'busy',\n\tbusy(target, room, user, connection, cmd) {\n\t\tif (target) {\n\t\t\tthis.errorReply(this.tr`Setting status messages in /busy is no longer supported. Set a status using /status.`);\n\t\t}\n\t\tuser.setStatusType('busy');\n\t\tconst isDND = ['dnd', 'donotdisturb'].includes(cmd);\n\t\tif (isDND) {\n\t\t\tthis.parse('/blockpms +');\n\t\t\tthis.parse('/blockchallenges');\n\t\t\tuser.settings.doNotDisturb = true;\n\t\t}\n\t\tthis.sendReply(this.tr`You are now marked as busy.`);\n\t},\n\tbusyhelp: [\n\t\t`/busy OR /donotdisturb - Marks you as busy.`,\n\t\t`Use /donotdisturb to also block private messages and challenges.`,\n\t\t`Use /back to mark yourself as back.`,\n\t],\n\n\tidle: 'away',\n\tafk: 'away',\n\tbrb: 'away',\n\taway(target, room, user, connection, cmd) {\n\t\tif (target) {\n\t\t\tthis.errorReply(this.tr`Setting status messages in /away is no longer supported. Set a status using /status.`);\n\t\t}\n\t\tuser.setStatusType('idle');\n\t\tthis.sendReply(this.tr`You are now marked as away. Send a message or use /back to indicate you are back.`);\n\t},\n\tawayhelp: [`/away - Marks you as away. Send a message or use /back to indicate you are back.`],\n\n\tcs: 'clearstatus',\n\tclearstatus(target, room, user) {\n\t\tif (target) return this.parse(`/forceclearstatus ${target}`);\n\n\t\tif (!user.userMessage) return this.sendReply(this.tr`You don't have a status message set.`);\n\t\tuser.setUserMessage('');\n\n\t\treturn this.sendReply(this.tr`You have cleared your status message.`);\n\t},\n\tclearstatushelp: [\n\t\t`/clearstatus - Clears your status message.`,\n\t\t`/clearstatus user, reason - Clears another person's status message. Requires: % @ ~`,\n\t],\n\n\tunaway: 'back',\n\tunafk: 'back',\n\tback(target, room, user) {\n\t\tif (user.statusType === 'online') throw new Chat.ErrorMessage(this.tr`You are already marked as back.`);\n\t\tconst statusType = user.statusType;\n\t\tuser.setStatusType('online');\n\n\t\tif (user.settings.doNotDisturb) {\n\t\t\tthis.parse('/unblockpms');\n\t\t\tthis.parse('/unblockchallenges');\n\t\t\tuser.settings.doNotDisturb = false;\n\t\t}\n\n\t\tif (statusType) {\n\t\t\treturn this.sendReply(this.tr`You are no longer marked as busy.`);\n\t\t}\n\n\t\treturn this.sendReply(this.tr`You have cleared your status message.`);\n\t},\n\tbackhelp: [`/back - Marks you as back if you are away.`],\n\n\tasync rank(target, room, user) {\n\t\tif (!target) target = user.name;\n\n\t\tconst values = await Ladders.visualizeAll(target);\n\t\tlet buffer = `<div class=\"ladder\"><table>`;\n\t\tbuffer += Utils.html`<tr><td colspan=\"8\">User: <strong>${target}</strong></td></tr>`;\n\n\t\tconst ratings = values.join(``);\n\t\tif (!ratings) {\n\t\t\tbuffer += `<tr><td colspan=\"8\"><em>${this.tr`This user has not played any ladder games yet.`}</em></td></tr>`;\n\t\t} else {\n\t\t\tbuffer += `<tr><th>${this.tr`Format`}</th><th><abbr title=\"Elo rating\">Elo</abbr></th><th>${this.tr`W`}</th><th>${this.tr`L`}</th><th>${this.tr`Total`}</th>`;\n\t\t\tbuffer += ratings;\n\t\t}\n\t\tbuffer += `</table></div>`;\n\n\t\tthis.sendReply(`|raw|${buffer}`);\n\t},\n\trankhelp: [\n\t\t`/rank [user] - Shows all ladder ranks for the given [user].`,\n\t\t`If no user is given, it defaults to the user of the command.`,\n\t],\n\n\tshowrank: 'hiderank',\n\thiderank(target, room, user, connection, cmd) {\n\t\tconst userGroup = Users.Auth.getGroup(Users.globalAuth.get(user.id));\n\t\tif (!userGroup['hiderank'] || !user.registered) {\n\t\t\tthrow new Chat.ErrorMessage(`/hiderank - Access denied.`);\n\t\t}\n\n\t\tconst isShow = cmd === 'showrank';\n\t\tconst group = (isShow ? Users.globalAuth.get(user.id) : (target.trim() || Users.Auth.defaultSymbol()) as GroupSymbol);\n\t\tif (user.tempGroup === group) {\n\t\t\tthrow new Chat.ErrorMessage(this.tr`You already have the temporary symbol '${group}'.`);\n\t\t}\n\t\tif (!Users.Auth.isValidSymbol(group) || !(group in Config.groups)) {\n\t\t\tthrow new Chat.ErrorMessage(this.tr`You must specify a valid group symbol.`);\n\t\t}\n\t\tif (!isShow && Config.groups[group].rank > Config.groups[user.tempGroup].rank) {\n\t\t\tthrow new Chat.ErrorMessage(this.tr`You may only set a temporary symbol below your current rank.`);\n\t\t}\n\t\tuser.tempGroup = group;\n\t\tuser.updateIdentity();\n\t\tthis.sendReply(`|c|~|${this.tr`Your temporary group symbol is now`} \\`\\`${user.tempGroup}\\`\\`.`);\n\t},\n\tshowrankhelp: 'hiderankhelp',\n\thiderankhelp: [\n\t\t`/hiderank [rank] - Displays your global rank as the given [rank].`,\n\t\t`/showrank - Displays your true global rank instead of the rank you're hidden as.`,\n\t],\n\n\tlanguage(target, room, user) {\n\t\tif (!target) {\n\t\t\tconst language = Chat.languages.get(user.language || 'english' as ID);\n\t\t\treturn this.sendReply(this.tr`Currently, you're viewing Pok\u00E9mon Showdown in ${language}.`);\n\t\t}\n\t\tconst languageID = toID(target);\n\t\tif (!Chat.languages.has(languageID)) {\n\t\t\tconst languages = [...Chat.languages.values()].join(', ');\n\t\t\tthrow new Chat.ErrorMessage(this.tr`Valid languages are: ${languages}`);\n\t\t}\n\t\tuser.language = languageID;\n\t\tuser.update();\n\t\tconst languageName = Chat.languages.get(languageID);\n\t\tconst langRoom = Rooms.search(languageName || \"\");\n\t\tlet language = languageName;\n\t\tif (langRoom) {\n\t\t\tlanguage = `<a href=\"/${langRoom.roomid}\">${languageName}</a>`;\n\t\t}\n\t\treturn this.sendReply(\n\t\t\t`|html|` + this.tr`Pok\u00E9mon Showdown will now be displayed in ${language} (except in language rooms).`\n\t\t);\n\t},\n\tlanguagehelp: [\n\t\t`/language - View your current language setting.`,\n\t\t`/language [language] - Changes the language Pok\u00E9mon Showdown will be displayed to you in.`,\n\t\t`Note that rooms can set their own language, which will override this setting.`,\n\t],\n\n\tupdatesettings(target, room, user) {\n\t\tconst settings: Partial<UserSettings> = {};\n\t\ttry {\n\t\t\tconst raw = JSON.parse(target);\n\t\t\tif (typeof raw !== 'object' || Array.isArray(raw) || !raw) {\n\t\t\t\tthis.errorReply(this.tr`/updatesettings expects JSON encoded object.`);\n\t\t\t}\n\t\t\tif (typeof raw.language === 'string') this.parse(`/noreply /language ${raw.language}`);\n\t\t\tfor (const setting in user.settings) {\n\t\t\t\tif (setting in raw) {\n\t\t\t\t\tif (setting === 'blockPMs' &&\n\t\t\t\t\t\tUsers.Auth.isAuthLevel(raw[setting])) {\n\t\t\t\t\t\tsettings[setting] = raw[setting];\n\t\t\t\t\t} else {\n\t\t\t\t\t\tsettings[setting as keyof UserSettings] = !!raw[setting];\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tObject.assign(user.settings, settings);\n\t\t\tuser.update();\n\t\t} catch {\n\t\t\tthis.errorReply(this.tr`Unable to parse settings in /updatesettings!`);\n\t\t}\n\t},\n\tupdatesettingshelp: [\n\t\t`/updatesettings [settings] - Update your settings to match the given JSON settings blob.`,\n\t],\n\n\t/*********************************************************\n\t * Battle management commands\n\t *********************************************************/\n\n\tallowexportinputlog(target, room, user) {\n\t\troom = this.requireRoom();\n\t\tconst battle = room.battle;\n\t\tif (!battle) {\n\t\t\tthrow new Chat.ErrorMessage(this.tr`Must be in a battle.`);\n\t\t}\n\t\tconst targetUser = Users.getExact(target);\n\t\tif (!targetUser) {\n\t\t\tthrow new Chat.ErrorMessage(this.tr`User ${target} not found.`);\n\t\t}\n\t\tif (!battle.playerTable[user.id]) {\n\t\t\tthrow new Chat.ErrorMessage(this.tr`Must be a player in this battle.`);\n\t\t}\n\t\tif (!battle.allowExtraction[targetUser.id]) {\n\t\t\tthrow new Chat.ErrorMessage(this.tr`${targetUser.name} has not requested extraction.`);\n\t\t}\n\t\tif (battle.allowExtraction[targetUser.id].has(user.id)) {\n\t\t\tthrow new Chat.ErrorMessage(this.tr`You have already consented to extraction with ${targetUser.name}.`);\n\t\t}\n\t\tbattle.allowExtraction[targetUser.id].add(user.id);\n\t\tthis.addModAction(room.tr`${user.name} consents to sharing battle team and choices with ${targetUser.name}.`);\n\t\tif (!battle.inputLog) throw new Chat.ErrorMessage(this.tr`No input log found.`);\n\t\tif (Object.keys(battle.playerTable).length === battle.allowExtraction[targetUser.id].size) {\n\t\t\tthis.addModAction(room.tr`${targetUser.name} has extracted the battle input log.`);\n\t\t\tconst inputLog = battle.inputLog.map(Utils.escapeHTML).join(`<br />`);\n\t\t\ttargetUser.sendTo(\n\t\t\t\troom,\n\t\t\t\t`|html|<div class=\"chat\"><code style=\"white-space: pre-wrap; overflow-wrap: break-word; display: block\">${inputLog}</code></div>`,\n\t\t\t);\n\t\t}\n\t},\n\tallowexportinputloghelp: [\n\t\t`/allowexportinputlog [user] - Consents to sharing teams and choices from the current battle with the specified user.`,\n\t],\n\n\trequestinputlog: 'exportinputlog',\n\texportinputlog(target, room, user) {\n\t\troom = this.requireRoom();\n\t\tconst battle = room.battle;\n\t\tif (!battle) {\n\t\t\tthrow new Chat.ErrorMessage(this.tr`This command only works in battle rooms.`);\n\t\t}\n\t\tif (!battle.inputLog) {\n\t\t\tthis.errorReply(this.tr`This command only works when the battle has ended - if the battle has stalled, use /offertie.`);\n\t\t\tif (user.can('forcewin')) this.errorReply(this.tr`Alternatively, you can end the battle with /forcetie.`);\n\t\t\treturn;\n\t\t}\n\t\tthis.checkCan('exportinputlog', null, room);\n\t\tif (user.can('forcewin') || Dex.formats.get(battle.format).team) {\n\t\t\tif (!battle.inputLog) throw new Chat.ErrorMessage(this.tr`No input log found.`);\n\t\t\tthis.addModAction(room.tr`${user.name} has extracted the battle input log.`);\n\t\t\tconst inputLog = battle.inputLog.map(Utils.escapeHTML).join(`<br />`);\n\t\t\tuser.sendTo(\n\t\t\t\troom,\n\t\t\t\t`|html|<div class=\"chat\"><code style=\"white-space: pre-wrap; overflow-wrap: break-word; display: block\">${inputLog}</code></div>`,\n\t\t\t);\n\t\t} else if (!battle.allowExtraction[user.id]) {\n\t\t\tbattle.allowExtraction[user.id] = new Set();\n\t\t\tfor (const id in battle.playerTable) {\n\t\t\t\tconst playerUser = Users.get(id);\n\t\t\t\tif (!playerUser) continue;\n\t\t\t\tif (playerUser.id === user.id) {\n\t\t\t\t\tbattle.allowExtraction[user.id].add(user.id);\n\t\t\t\t} else {\n\t\t\t\t\tplayerUser.sendTo(\n\t\t\t\t\t\troom,\n\t\t\t\t\t\tUtils.html`|html|${user.name} wants to extract the battle input log. <button name=\"send\" value=\"/allowexportinputlog ${user.id}\">Share your team and choices with \"${user.name}\"</button>`\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis.addModAction(room.tr`${user.name} wants to extract the battle input log.`);\n\t\t} else {\n\t\t\t// Re-request to make the buttons appear again for users who have not allowed extraction\n\t\t\tlet logExported = true;\n\t\t\tfor (const id in battle.playerTable) {\n\t\t\t\tconst playerUser = Users.get(id);\n\t\t\t\tif (!playerUser || battle.allowExtraction[user.id].has(playerUser.id)) continue;\n\t\t\t\tlogExported = false;\n\t\t\t\tplayerUser.sendTo(\n\t\t\t\t\troom,\n\t\t\t\t\tUtils.html`|html|${user.name} wants to extract the battle input log. <button name=\"send\" value=\"/allowexportinputlog ${user.id}\">Share your team and choices with \"${user.name}\"</button>`\n\t\t\t\t);\n\t\t\t}\n\t\t\tif (logExported) throw new Chat.ErrorMessage(this.tr`You already extracted the battle input log.`);\n\t\t\tthis.sendReply(this.tr`Battle input log re-requested.`);\n\t\t}\n\t},\n\texportinputloghelp: [`/exportinputlog - Asks players in a battle for permission to export an inputlog. Requires: ~`],\n\n\timportinputlog(target, room, user, connection) {\n\t\tthis.checkCan('importinputlog');\n\t\tconst formatIndex = target.indexOf(`\"formatid\":\"`);\n\t\tconst nextQuoteIndex = target.indexOf(`\"`, formatIndex + 12);\n\t\tif (formatIndex < 0 || nextQuoteIndex < 0) throw new Chat.ErrorMessage(this.tr`Invalid input log.`);\n\t\ttarget = target.replace(/\\r/g, '');\n\t\tif ((`\\n` + target).includes(`\\n>eval `) && !user.hasConsoleAccess(connection)) {\n\t\t\tthrow new Chat.ErrorMessage(this.tr`Your input log contains untrusted code - you must have console access to use it.`);\n\t\t}\n\n\t\tconst formatid = target.slice(formatIndex + 12, nextQuoteIndex);\n\t\tconst battleRoom = Rooms.createBattle({ format: formatid, players: [], inputLog: target });\n\t\tif (!battleRoom) return; // createBattle will inform the user if creating the battle failed\n\n\t\tbattleRoom.auth.set(user.id, Users.HOST_SYMBOL);\n\t\tthis.parse(`/join ${battleRoom.roomid}`);\n\t\tsetTimeout(() => {\n\t\t\t// timer to make sure this goes under the battle\n\t\t\tbattleRoom.add(`|uhtmlchange|invites|<div class=\"broadcast broadcast-blue\"><strong>This is an imported replay</strong><br />Players will need to be manually added with <code>/invitebattle</code> or <code>/restoreplayers</code></div>`);\n\t\t\tbattleRoom.add(`|uhtml|invites|`).update();\n\t\t\tbattleRoom.battle!.sendInviteForm(user);\n\t\t}, 500);\n\t},\n\timportinputloghelp: [`/importinputlog [inputlog] - Starts a battle with a given inputlog. Requires: + % @ ~`],\n\n\tshowteam: 'showset',\n\tasync showset(target, room, user, connection, cmd) {\n\t\tthis.checkChat();\n\t\tconst showAll = cmd === 'showteam';\n\t\tconst hideStats = toID(target) === 'hidestats';\n\t\troom = this.requireRoom();\n\t\tconst battle = room.battle;\n\t\tif (!showAll && !target) return this.parse(`/help showset`);\n\t\tif (!battle) throw new Chat.ErrorMessage(this.tr`This command can only be used in a battle.`);\n\t\tlet team = await battle.getTeam(user);\n\t\tif (!team) throw new Chat.ErrorMessage(this.tr`You are not a player and don't have a team.`);\n\n\t\tif (!showAll) {\n\t\t\tconst parsed = parseInt(target);\n\t\t\tif (isNaN(parsed)) {\n\t\t\t\tconst id = toID(target);\n\t\t\t\tconst matchedSet = team.find(set => toID(set.name) === id || toID(set.species) === id);\n\t\t\t\tif (!matchedSet) throw new Chat.ErrorMessage(this.tr`You don't have a Pok\u00E9mon matching \"${target}\" in your team.`);\n\t\t\t\tteam = [matchedSet];\n\t\t\t} else {\n\t\t\t\tconst setIndex = parsed - 1;\n\t\t\t\tconst indexedSet = team[setIndex];\n\t\t\t\tif (!indexedSet) {\n\t\t\t\t\tthrow new Chat.ErrorMessage(this.tr`You don't have a Pok\u00E9mon #${parsed} on your team - your team only has ${team.length} Pok\u00E9mon.`);\n\t\t\t\t}\n\t\t\t\tteam = [indexedSet];\n\t\t\t}\n\t\t}\n\n\t\tlet resultString = Utils.escapeHTML(Teams.export(team, { hideStats }));\n\t\tif (showAll) {\n\t\t\tresultString = `<details><summary>${this.tr`View team`}</summary>${resultString}</details>`;\n\t\t}\n\t\tthis.runBroadcast(true);\n\t\treturn this.sendReplyBox(resultString);\n\t},\n\tshowsethelp: [\n\t\t`!showteam - show the team you're using in the current battle (must be used in a battle you're a player in).`,\n\t\t`!showteam hidestats - show the team you're using in the current battle, without displaying any stat-related information.`,\n\t\t`!showset [number] - shows the set of the pokemon corresponding to that number (in original Team Preview order, not necessarily current order)`,\n\t],\n\n\tconfirmready(target, room, user) {\n\t\tconst game = this.requireGame(Rooms.BestOfGame);\n\t\tgame.confirmReady(user);\n\t},\n\n\tacceptopenteamsheets(target, room, user, connection, cmd) {\n\t\troom = this.requireRoom();\n\t\tconst battle = room.battle;\n\t\tif (!battle) throw new Chat.ErrorMessage(this.tr`Must be in a battle room.`);\n\t\tconst player = battle.playerTable[user.id];\n\t\tif (!player) {\n\t\t\tthrow new Chat.ErrorMessage(this.tr`Must be a player to agree to open team sheets.`);\n\t\t}\n\t\tconst format = Dex.formats.get(battle.options.format);\n\t\tif (!Dex.formats.getRuleTable(format).has('openteamsheets')) {\n\t\t\tthrow new Chat.ErrorMessage(this.tr`This format does not allow requesting open team sheets. You can both manually agree to it by using !showteam hidestats.`);\n\t\t}\n\t\tif (battle.turn > 0) {\n\t\t\tthrow new Chat.ErrorMessage(this.tr`You cannot agree to open team sheets after Team Preview. Each player can still show their own sheet by using this command: !showteam hidestats`);\n\t\t}\n\t\tif (battle.players.some(curPlayer => curPlayer.wantsOpenTeamSheets === false)) {\n\t\t\tthrow new Chat.ErrorMessage(this.tr`An opponent has already rejected open team sheets.`);\n\t\t}\n\t\tif (player.wantsOpenTeamSheets !== null) {\n\t\t\tthrow new Chat.ErrorMessage(this.tr`You have already made your decision about agreeing to open team sheets.`);\n\t\t}\n\t\tplayer.wantsOpenTeamSheets = true;\n\t\tplayer.sendRoom(Utils.html`|uhtmlchange|otsrequest|`);\n\n\t\tthis.add(this.tr`${user.name} has agreed to open team sheets.`);\n\t\tif (battle.players.every(curPlayer => curPlayer.wantsOpenTeamSheets)) {\n\t\t\tvoid battle.stream.write('>show-openteamsheets');\n\t\t}\n\t},\n\tacceptopenteamsheetshelp: [`/acceptopenteamsheets - Agrees to an open team sheet opportunity during Team Preview, where all information on a team except stats is shared with the opponent. Requires: \\u2606`],\n\n\trejectopenteamsheets(target, room, user) {\n\t\troom = this.requireRoom();\n\t\tconst battle = room.battle;\n\t\tif (!battle) throw new Chat.ErrorMessage(this.tr`Must be in a battle room.`);\n\t\tconst player = battle.playerTable[user.id];\n\t\tif (!player) {\n\t\t\tthrow new Chat.ErrorMessage(this.tr`Must be a player to reject open team sheets.`);\n\t\t}\n\t\tconst format = Dex.formats.get(battle.options.format);\n\t\tif (!Dex.formats.getRuleTable(format).has('openteamsheets')) {\n\t\t\tthrow new Chat.ErrorMessage(this.tr`This format does not allow requesting open team sheets.`);\n\t\t}\n\t\tif (battle.turn > 0) {\n\t\t\tthrow new Chat.ErrorMessage(this.tr`You cannot reject open team sheets after Team Preview.`);\n\t\t}\n\t\tif (player.wantsOpenTeamSheets !== null) {\n\t\t\tthrow new Chat.ErrorMessage(this.tr`You have already made your decision about agreeing to open team sheets.`);\n\t\t}\n\t\tplayer.wantsOpenTeamSheets = false;\n\t\tfor (const otherPlayer of battle.players) {\n\t\t\totherPlayer.sendRoom(Utils.html`|uhtmlchange|otsrequest|`);\n\t\t}\n\t\treturn this.add(this.tr`${user.name} rejected open team sheets.`);\n\t},\n\trejectopenteamsheetshelp: [`/rejectopenteamsheetshelp - Rejects an open team sheet opportunity during Team Preview, where all information on a team except stats is shared with the opponent. Requires: \\u2606`],\n\n\tacceptdraw: 'offertie',\n\taccepttie: 'offertie',\n\tofferdraw: 'offertie',\n\trequesttie: 'offertie',\n\toffertie(target, room, user, connection, cmd) {\n\t\troom = this.requireRoom();\n\t\tconst battle = room.battle;\n\t\tif (!battle) throw new Chat.ErrorMessage(this.tr`Must be in a battle room.`);\n\t\tif (!Config.allowrequestingties) {\n\t\t\tthrow new Chat.ErrorMessage(this.tr`This server does not allow offering ties.`);\n\t\t}\n\t\tif (room.tour) {\n\t\t\tthrow new Chat.ErrorMessage(this.tr`You can't offer ties in tournaments.`);\n\t\t}\n\t\tif (battle.turn < 100) {\n\t\t\tthrow new Chat.ErrorMessage(this.tr`It's too early to tie, please play until turn 100.`);\n\t\t}\n\t\tthis.checkCan('roomvoice', null, room);\n\t\tif (cmd === 'accepttie' && !battle.players.some(player => player.wantsTie)) {\n\t\t\tthrow new Chat.ErrorMessage(this.tr`No other player is requesting a tie right now. It was probably canceled.`);\n\t\t}\n\t\tconst player = battle.playerTable[user.id];\n\t\tif (!battle.players.some(curPlayer => curPlayer.wantsTie)) {\n\t\t\tthis.add(this.tr`${user.name} is offering a tie.`);\n\t\t\troom.update();\n\t\t\tfor (const otherPlayer of battle.players) {\n\t\t\t\tif (otherPlayer !== player) {\n\t\t\t\t\totherPlayer.sendRoom(\n\t\t\t\t\t\tUtils.html`|uhtml|offertie|<button class=\"button\" name=\"send\" value=\"/accepttie\"><strong>${this.tr`Accept tie`}</strong></button> <button class=\"button\" name=\"send\" value=\"/rejecttie\">${this.tr`Reject`}</button>`\n\t\t\t\t\t);\n\t\t\t\t} else {\n\t\t\t\t\tplayer.wantsTie = true;\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\tif (!player) {\n\t\t\t\tthrow new Chat.ErrorMessage(this.tr`Must be a player to accept ties.`);\n\t\t\t}\n\t\t\tif (!player.wantsTie) {\n\t\t\t\tplayer.wantsTie = true;\n\t\t\t} else {\n\t\t\t\tthrow new Chat.ErrorMessage(this.tr`You have already agreed to a tie.`);\n\t\t\t}\n\t\t\tplayer.sendRoom(Utils.html`|uhtmlchange|offertie|`);\n\t\t\tthis.add(this.tr`${user.name} accepted the tie.`);\n\t\t\tif (battle.players.every(curPlayer => curPlayer.wantsTie)) {\n\t\t\t\tif (battle.players.length > 2) {\n\t\t\t\t\tthis.add(this.tr`All players have accepted the tie.`);\n\t\t\t\t}\n\t\t\t\tbattle.tie();\n\t\t\t}\n\t\t}\n\t},\n\toffertiehelp: [`/offertie - Offers a tie to all players in a battle; if all accept, it ties. Can only be used after 100+ turns have passed. Requires: \\u2606 @ # ~`],\n\n\trejectdraw: 'rejecttie',\n\trejecttie(target, room, user) {\n\t\troom = this.requireRoom();\n\t\tconst battle = room.battle;\n\t\tif (!battle) throw new Chat.ErrorMessage(this.tr`Must be in a battle room.`);\n\t\tconst player = battle.playerTable[user.id];\n\t\tif (!player) {\n\t\t\tthrow new Chat.ErrorMessage(this.tr`Must be a player to reject ties.`);\n\t\t}\n\t\tif (!battle.players.some(curPlayer => curPlayer.wantsTie)) {\n\t\t\tthrow new Chat.ErrorMessage(this.tr`No other player is requesting a tie right now. It was probably canceled.`);\n\t\t}\n\t\tif (player.wantsTie) player.wantsTie = false;\n\t\tfor (const otherPlayer of battle.players) {\n\t\t\totherPlayer.sendRoom(Utils.html`|uhtmlchange|offertie|`);\n\t\t}\n\t\treturn this.add(this.tr`${user.name} rejected the tie.`);\n\t},\n\trejecttiehelp: [`/rejecttie - Rejects a tie offered by another player in a battle.`],\n\n\tinputlog() {\n\t\tthis.parse(`/help exportinputlog`);\n\t\tthis.parse(`/help importinputlog`);\n\t},\n\n\t/*********************************************************\n\t * Battle commands\n\t *********************************************************/\n\n\tforfeit(target, room, user) {\n\t\troom = this.requireRoom();\n\t\tif (!room.game) throw new Chat.ErrorMessage(this.tr`This room doesn't have an active game.`);\n\t\tif (!room.game.forfeit) {\n\t\t\tthrow new Chat.ErrorMessage(this.tr`This kind of game can't be forfeited.`);\n\t\t}\n\t\troom.game.forfeit(user);\n\t},\n\tforfeithelp: [\n\t\t`/forfeit - Forfeits your currently active game, if it supports that.`,\n\t],\n\n\tguess: 'choose',\n\tchoose(target, room, user) {\n\t\troom = this.requireRoom();\n\t\tif (!room.game) throw new Chat.ErrorMessage(this.tr`This room doesn't have an active game.`);\n\t\tif (!room.game.choose) throw new Chat.ErrorMessage(this.tr`This game doesn't support /choose`);\n\t\tif (room.game.checkChat) this.checkChat();\n\t\troom.game.choose(user, target);\n\t},\n\tchoosehelp: [\n\t\t`/choose [text] - Make a choice for the currently active game.`,\n\t],\n\n\tmv: 'move',\n\tattack: 'move',\n\tmove(target, room, user) {\n\t\tthis.parse(`/choose move ${target}`);\n\t},\n\tmovehelp: [\n\t\t`/move [move] - Make a move for the current game.`,\n\t],\n\n\tsw: 'switch',\n\tswitch(target, room, user) {\n\t\tthis.parse(`/choose switch ${target}`);\n\t},\n\tswitchhelp: [\n\t\t`/switch [pokemon] - Make a switch for the current game.`,\n\t],\n\n\tteam(target, room, user) {\n\t\tthis.parse(`/choose team ${target}`);\n\t},\n\tteamhelp: [\n\t\t`/team [pokemon] - Change your team for the current game.`,\n\t],\n\n\tundo(target, room, user) {\n\t\troom = this.requireRoom();\n\t\tif (!room.game) throw new Chat.ErrorMessage(this.tr`This room doesn't have an active game.`);\n\t\tif (!room.game.undo) throw new Chat.ErrorMessage(this.tr`This game doesn't support /undo`);\n\n\t\troom.game.undo(user, target);\n\t},\n\tundohelp: [\n\t\t`/undo - Reverts the last move of the player in the current game, if it supports it.`,\n\t],\n\n\tuploadreplay: 'savereplay',\n\tasync savereplay(target, room, user, connection) {\n\t\tif (!room?.battle) {\n\t\t\tthrow new Chat.ErrorMessage(this.tr`You can only save replays for battles.`);\n\t\t}\n\n\t\tconst options = (target === 'forpunishment' || target === 'silent') ? target : undefined;\n\t\tawait room.uploadReplay(user, connection, options);\n\t},\n\tsavereplayhelp: [`/savereplay - Saves the replay for the current battle.`],\n\n\thidereplay(target, room, user, connection) {\n\t\tif (!room?.battle) throw new Chat.ErrorMessage(`Must be used in a battle.`);\n\t\tthis.checkCan('joinbattle', null, room);\n\t\tif (room.tour?.forcePublic) {\n\t\t\tthrow new Chat.ErrorMessage(this.tr`This battle can't have hidden replays, because the tournament is set to be forced public.`);\n\t\t}\n\t\tif (room.hideReplay) throw new Chat.ErrorMessage(this.tr`The replay for this battle is already set to hidden.`);\n\t\troom.hideReplay = true;\n\t\t// If a replay has already been saved, /savereplay again to update the uploaded replay's hidden status\n\t\tif (room.battle.replaySaved) this.parse('/savereplay');\n\t\tthis.addModAction(room.tr`${user.name} hid the replay of this battle.`);\n\t},\n\thidereplayhelp: [`/hidereplay - Hides the replay of the current battle. Requires: ${Users.PLAYER_SYMBOL} ~`],\n\n\taddplayer: 'invitebattle',\n\tinvitebattle(target, room, user, connection) {\n\t\troom = this.requireRoom();\n\t\tif (!room.battle) throw new Chat.ErrorMessage(this.tr`You can only do this in battle rooms.`);\n\t\tif (room.rated) throw new Chat.ErrorMessage(this.tr`You can only add a Player to unrated battles.`);\n\n\t\tthis.checkCan('joinbattle', null, room);\n\n\t\tconst { targetUser, targetUsername: name, rest: slot } = this.splitUser(target, { exactName: true });\n\t\tif (slot !== 'p1' && slot !== 'p2' && slot !== 'p3' && slot !== 'p4') {\n\t\t\tthis.errorReply(this.tr`Player must be set to \"p1\" or \"p2\", not \"${slot}\".`);\n\t\t\treturn this.parse('/help addplayer');\n\t\t}\n\n\t\tconst battle = room.battle;\n\t\tconst player = battle[slot];\n\n\t\tif (!player) {\n\t\t\tthrow new Chat.ErrorMessage(`This battle does not support having players in ${slot}`);\n\t\t}\n\t\tif (!targetUser) {\n\t\t\tbattle.sendInviteForm(connection);\n\t\t\tthrow new Chat.ErrorMessage(this.tr`User ${name} not found.`);\n\t\t}\n\t\tif (player.id) {\n\t\t\tbattle.sendInviteForm(connection);\n\t\t\tthrow new Chat.ErrorMessage(this.tr`This room already has a player in slot ${slot}.`);\n\t\t}\n\t\tif (player.invite) {\n\t\t\tbattle.sendInviteForm(connection);\n\t\t\tthrow new Chat.ErrorMessage(`Someone else (${player.invite}) has already been invited to be ${slot}!`);\n\t\t}\n\t\tif (targetUser.id in battle.playerTable) {\n\t\t\tbattle.sendInviteForm(connection);\n\t\t\tthrow new Chat.ErrorMessage(this.tr`${targetUser.name} is already a player in this battle.`);\n\t\t}\n\n\t\tif (targetUser.settings.blockChallenges && !user.can('bypassblocks', targetUser)) {\n\t\t\tbattle.sendInviteForm(connection);\n\t\t\tChat.maybeNotifyBlocked('challenge', targetUser, user);\n\t\t\tthrow new Chat.ErrorMessage(this.tr`The user '${targetUser.name}' is not accepting challenges right now.`);\n\t\t}\n\n\t\t// INVITE\n\n\t\tif (!targetUser.inRooms.has(room.roomid) || !player.hasTeam) {\n\t\t\tplayer.invite = targetUser.id;\n\t\t\tconst playerNames = battle.players.map(p => p.id && p.name).filter(Boolean).join(', ');\n\t\t\tconst ready = player.hasTeam ? battle.format : new Ladders.BattleReady(user.id, battle.format, user.battleSettings);\n\t\t\tLadders.challenges.add(\n\t\t\t\tnew Ladders.BattleInvite(user.id, targetUser.id, ready, {\n\t\t\t\t\tacceptCommand: `/acceptbattle ${user.id}`,\n\t\t\t\t\tmessage: `You're invited to join a battle (with ${playerNames})`,\n\t\t\t\t\troomid: room.roomid,\n\t\t\t\t})\n\t\t\t);\n\t\t\tbattle.sendInviteForm(battle.invitesFull() ? true : connection);\n\t\t\treturn this.add(`||Invite sent to ${targetUser.name}!`);\n\t\t}\n\n\t\troom.auth.set(targetUser.id, Users.PLAYER_SYMBOL);\n\t\tconst success = battle.joinGame(targetUser, slot);\n\t\tif (!success) {\n\t\t\troom.auth.delete(targetUser.id);\n\t\t\treturn;\n\t\t}\n\t\tif (!battle.started) battle.sendInviteForm(connection);\n\t},\n\tinvitebattlehelp: [\n\t\t`/addplayer [username], [p1|p2|p3|p4] - Invites the player to join your current battle.`,\n\t],\n\n\tasync acceptbattle(target, room, user, connection) {\n\t\tconst chall = Ladders.challenges.resolveAcceptCommand(this);\n\n\t\tconst targetRoom = Rooms.get(chall.roomid);\n\t\tif (!targetRoom) throw new Chat.ErrorMessage(`Room ${chall.roomid} not found`);\n\t\tconst battle = targetRoom.battle!;\n\t\tconst player = battle.players.find(maybe => maybe.invite === user.id);\n\t\tif (!player) {\n\t\t\tthrow new Chat.ErrorMessage(`You haven't been invited to that battle.`);\n\t\t}\n\t\tconst slot = player.slot;\n\t\tif (player.id) {\n\t\t\tthrow new Error(`Player ${player.slot} in ${chall.roomid} should not have both 'id' and 'invite'`);\n\t\t}\n\n\t\tlet playerOpts = undefined;\n\t\tif (!player.hasTeam) {\n\t\t\tconst ladder = Ladders(battle.format);\n\t\t\tconst ready = await ladder.prepBattle(connection, 'challenge');\n\t\t\tif (!ready) return;\n\t\t\tplayerOpts = ready.settings;\n\t\t}\n\n\t\tconst fromUser = Ladders.challenges.accept(this);\n\n\t\tthis.pmTarget = fromUser;\n\t\tthis.sendChatMessage(`/text You accepted the battle invite`);\n\t\tthis.parse(`/join ${targetRoom.roomid}`);\n\t\tbattle.joinGame(user, slot, playerOpts);\n\t},\n\tacceptbattlehelp: [`/acceptbattle - Accept an invite from someone to join a battle.`],\n\n\tuninvitebattle(target, room, user, connection) {\n\t\troom = this.requireRoom();\n\t\tthis.checkCan('joinbattle', null, room);\n\n\t\tif (!room.battle) throw new Chat.ErrorMessage(this.tr`You can only do this in battle rooms.`);\n\t\tconst invitesFull = room.battle.invitesFull();\n\t\tconst challenges = Ladders.challenges.get(target as ID);\n\n\t\tif (!challenges) throw new Chat.ErrorMessage(`User ${target} is not currently invited to the battle`);\n\t\tfor (const challenge of challenges) {\n\t\t\tif (challenge.to === target && challenge.roomid === room.roomid) {\n\t\t\t\tLadders.challenges.remove(challenge);\n\t\t\t\tLadders.challenges.send(challenge.from, target, `/text The battle invite was changed to someone else; sorry!`);\n\t\t\t}\n\t\t}\n\n\t\troom.battle.sendInviteForm(invitesFull ? true : connection);\n\t},\n\tuninvitebattlehelp: [\n\t\t`/uninvitebattle [username] - Revokes an invite from a user to join a battle.`,\n\t\t`Requires: ${Users.PLAYER_SYMBOL} ~`,\n\t],\n\n\trestoreplayers(target, room, user) {\n\t\troom = this.requireRoom();\n\t\tif (!room.battle) throw new Chat.ErrorMessage(this.tr`You can only do this in battle rooms.`);\n\t\tif (room.rated) throw new Chat.ErrorMessage(this.tr`You can only add a Player to unrated battles.`);\n\n\t\tlet didSomething = false;\n\t\tfor (const player of room.battle.players) {\n\t\t\tif (!player.id && player.name !== `Player ${player.num}`) {\n\t\t\t\tthis.parse(`/invitebattle ${player.name}, ${player.slot}`);\n\t\t\t\tdidSomething = true;\n\t\t\t}\n\t\t}\n\n\t\tif (!didSomething) {\n\t\t\tthrow new Chat.ErrorMessage(this.tr`Players could not be restored (maybe this battle already has two players?).`);\n\t\t}\n\t},\n\trestoreplayershelp: [\n\t\t`/restoreplayers - Restore previous players in an imported input log.`,\n\t],\n\n\tjoinbattle: 'joingame',\n\tjoingame(target, room, user) {\n\t\troom = this.requireRoom();\n\t\tif (!room.game) throw new Chat.ErrorMessage(this.tr`This room doesn't have an active game.`);\n\t\tif (!room.game.joinGame) throw new Chat.ErrorMessage(this.tr`This game doesn't support /joingame`);\n\n\t\troom.game.joinGame(user, target);\n\t},\n\tjoingamehelp: [`/joingame [username] - Join the game being played in the current room.`],\n\n\tleavebattle: 'leavegame',\n\tpartbattle: 'leavegame',\n\tleavegame(target, room, user) {\n\t\troom = this.requireRoom();\n\t\tif (!room.game) throw new Chat.ErrorMessage(this.tr`This room doesn't have an active game.`);\n\t\tif (!room.game.leaveGame) throw new Chat.ErrorMessage(this.tr`This game doesn't support /leavegame`);\n\n\t\troom.game.leaveGame(user);\n\t},\n\tleavegamehelp: [`/leavegame - Leave the current game.`],\n\n\tkickbattle: 'kickgame',\n\tkickgame(target, room, user) {\n\t\troom = this.requireRoom();\n\t\tif (!room.battle) throw new Chat.ErrorMessage(this.tr`You can only do this in battle rooms.`);\n\t\tif (room.battle.challengeType === 'tour' || room.battle.rated) {\n\t\t\tthrow new Chat.ErrorMessage(this.tr`You can only do this in unrated non-tour battles.`);\n\t\t}\n\t\tconst { targetUser, rest: reason } = this.requireUser(target, { allowOffline: true });\n\t\tthis.checkCan('kick', targetUser, room);\n\t\tif (room.battle.leaveGame(targetUser)) {\n\t\t\tconst displayReason = reason ? ` (${reason})` : ``;\n\t\t\tthis.addModAction(room.tr`${targetUser.name} was kicked from a battle by ${user.name}.${displayReason}`);\n\t\t\tthis.modlog('KICKBATTLE', targetUser, reason, { noip: 1, noalts: 1 });\n\t\t} else {\n\t\t\tthrow new Chat.ErrorMessage(\"/kickbattle - User isn't in battle.\");\n\t\t}\n\t},\n\tkickbattlehelp: [`/kickbattle [username], [reason] - Kicks a user from a battle with reason. Requires: % @ ~`],\n\n\tkickinactive(target, room, user) {\n\t\tthis.parse(`/timer on`);\n\t},\n\tkickinactivehelp: [\n\t\t`/kickinactive - Activates the inactive timer, if the game supports it.`,\n\t],\n\n\ttimer(target, room, user) {\n\t\ttarget = toID(target);\n\t\troom = this.requireRoom();\n\t\tif (!room.game?.timer) {\n\t\t\tthrow new Chat.ErrorMessage(this.tr`You can only set the timer from inside a battle room.`);\n\t\t}\n\t\tconst timer = room.game.timer as any;\n\t\tif (!timer.timerRequesters) {\n\t\t\treturn this.sendReply(this.tr`This game's timer is managed by a different command.`);\n\t\t}\n\t\tif (!target) {\n\t\t\tif (!timer.timerRequesters.size) {\n\t\t\t\treturn this.sendReply(this.tr`The game timer is OFF.`);\n\t\t\t}\n\t\t\tconst requester = [...timer.timerRequesters].join(', ');\n\t\t\treturn this.sendReply(this.tr`The game timer is ON (requested by ${requester})`);\n\t\t}\n\t\tconst force = user.can('timer', null, room);\n\t\tif (!force && !room.game.playerTable[user.id]) {\n\t\t\tthrow new Chat.ErrorMessage(this.tr`Access denied.`);\n\t\t}\n\t\tif (this.meansNo(target) || target === 'stop') {\n\t\t\tif (timer.timerRequesters.size) {\n\t\t\t\ttimer.stop(force ? undefined : user);\n\t\t\t\tif (force) {\n\t\t\t\t\troom.send(`|inactiveoff|${room.tr`Timer was turned off by staff. Please do not turn it back on until our staff say it's okay.`}`);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tthrow new Chat.ErrorMessage(this.tr`The timer is already off.`);\n\t\t\t}\n\t\t} else if (this.meansYes(target) || target === 'start') {\n\t\t\ttimer.start(user);\n\t\t} else {\n\t\t\tthrow new Chat.ErrorMessage(this.tr`\"${target}\" is not a recognized timer state.`);\n\t\t}\n\t},\n\ttimerhelp: [\n\t\t`/timer [start|stop] - Starts or stops the game timer. Requires: ${Users.PLAYER_SYMBOL} % @ ~`,\n\t],\n\n\tautotimer: 'forcetimer',\n\tforcetimer(target, room, user) {\n\t\troom = this.requireRoom();\n\t\ttarget = toID(target);\n\t\tthis.checkCan('autotimer');\n\t\tif (this.meansNo(target) || target === 'stop') {\n\t\t\tConfig.forcetimer = false;\n\t\t\tthis.addModAction(room.tr`Forcetimer is now OFF: The timer is now opt-in. (set by ${user.name})`);\n\t\t} else if (this.meansYes(target) || target === 'start' || !target) {\n\t\t\tConfig.forcetimer = true;\n\t\t\tthis.addModAction(room.tr`Forcetimer is now ON: All battles will be timed. (set by ${user.name})`);\n\t\t} else {\n\t\t\tthrow new Chat.ErrorMessage(this.tr`'${target}' is not a recognized forcetimer setting.`);\n\t\t}\n\t},\n\tforcetimerhelp: [\n\t\t`/forcetimer [start|stop] - Forces all battles to have the inactive timer enabled. Requires: ~`,\n\t],\n\n\tforcetie: 'forcewin',\n\tforcewin(target, room, user) {\n\t\troom = this.requireRoom();\n\t\tthis.checkCan('forcewin');\n\t\tif (\n\t\t\t!room.battle &&\n\t\t\t!(room.game && typeof (room.game as any).tie === 'function' && typeof (room.game as any).win === 'function')\n\t\t) {\n\t\t\tthrow new Chat.ErrorMessage(\"/forcewin - This is not a battle room.\");\n\t\t}\n\n\t\tif (room.battle) room.battle.endType = 'forced';\n\t\tif (!target) {\n\t\t\t(room.game as any).tie();\n\t\t\tthis.modlog('FORCETIE');\n\t\t\treturn false;\n\t\t}\n\t\tconst targetUser = Users.getExact(target);\n\t\tif (!targetUser) throw new Chat.ErrorMessage(this.tr`User '${target}' not found.`);\n\n\t\t(room.game as any).win(targetUser);\n\t\tthis.modlog('FORCEWIN', targetUser.id);\n\t},\n\tforcewinhelp: [\n\t\t`/forcetie - Forces the current match to end in a tie. Requires: ~`,\n\t\t`/forcewin [user] - Forces the current match to end in a win for a user. Requires: ~`,\n\t],\n\n\t/*********************************************************\n\t * Challenging and searching commands\n\t *********************************************************/\n\n\tasync search(target, room, user, connection) {\n\t\tif (target) {\n\t\t\tif (Config.laddermodchat && !Users.globalAuth.atLeast(user, Config.laddermodchat)) {\n\t\t\t\tconst groupName = Config.groups[Config.laddermodchat].name || Config.laddermodchat;\n\t\t\t\tthis.popupReply(this.tr`This server requires you to be rank ${groupName} or higher to search for a battle.`);\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tconst ladder = Ladders(target);\n\t\t\tif (!user.registered && Config.forceregisterelo && await ladder.getRating(user.id) >= Config.forceregisterelo) {\n\t\t\t\tuser.send(\n\t\t\t\t\tUtils.html`|popup||html|${this.tr`Since you have reached ${Config.forceregisterelo} ELO in ${target}, you must register your account to continue playing that format on ladder.`}<p style=\"text-align: center\"><button name=\"register\" value=\"${user.id}\"><b>${this.tr`Register`}</b></button></p>`\n\t\t\t\t);\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tChat.runHandlers('onLadderSearch', user, connection, ladder.formatid as ID);\n\t\t\treturn ladder.searchBattle(user, connection);\n\t\t}\n\t\treturn Ladders.cancelSearches(user);\n\t},\n\tsearchhelp: [\n\t\t`/search [format] - Searches for a battle in the specified format.`,\n\t],\n\n\tcancelsearch(target, room, user) {\n\t\tif (target) {\n\t\t\tLadders(toID(target)).cancelSearch(user);\n\t\t} else {\n\t\t\tLadders.cancelSearches(user);\n\t\t}\n\t},\n\tcancelsearchhelp: [\n\t\t`/cancelsearch [format] - Cancels a search for a battle in the specified format.`,\n\t\t`If no format is given, cancels searches for all formats.`,\n\t],\n\n\tchall: 'challenge',\n\tchallenge(target, room, user, connection) {\n\t\tconst { targetUser, targetUsername, rest: formatName } = this.splitUser(target);\n\t\tif (!targetUser?.connected) {\n\t\t\treturn this.popupReply(this.tr`The user '${targetUsername}' was not found.`);\n\t\t}\n\t\tif (user.locked && !targetUser.locked) {\n\t\t\treturn this.popupReply(this.tr`You are locked and cannot challenge unlocked users. If this user is your friend, ask them to challenge you instead.`);\n\t\t}\n\t\tif (Punishments.isBattleBanned(user)) {\n\t\t\treturn this.popupReply(this.tr`You are banned from battling and cannot challenge users.`);\n\t\t}\n\t\tif (!user.named) {\n\t\t\treturn this.popupReply(this.tr`You must choose a username before you challenge someone.`);\n\t\t}\n\t\tif (Config.pmmodchat && !user.hasSysopAccess() && !Users.globalAuth.atLeast(user, Config.pmmodchat as GroupSymbol)) {\n\t\t\tconst groupName = Config.groups[Config.pmmodchat].name || Config.pmmodchat;\n\t\t\tthis.popupReply(this.tr`This server requires you to be rank ${groupName} or higher to challenge users.`);\n\t\t\treturn false;\n\t\t}\n\t\treturn Ladders(formatName).makeChallenge(connection, targetUser);\n\t},\n\tchallengehelp: [\n\t\t`/challenge [user], [format] - Challenges the given [user] to a battle in the given [format].`,\n\t],\n\n\tbch: 'blockchallenges',\n\tblockchall: 'blockchallenges',\n\tblockchalls: 'blockchallenges',\n\tblockchallenges(target, room, user) {\n\t\tif (toID(target) === 'ac') target = 'autoconfirmed';\n\t\tif (user.settings.blockChallenges === (target || true)) {\n\t\t\tthrow new Chat.ErrorMessage(this.tr`You are already blocking challenges!`);\n\t\t}\n\t\tif (Users.Auth.isAuthLevel(target)) {\n\t\t\tuser.settings.blockChallenges = target;\n\t\t\tthis.sendReply(this.tr`You are now blocking challenges, except from staff and ${target}.`);\n\t\t} else if (target === 'autoconfirmed' || target === 'trusted' || target === 'unlocked' || target === 'friends') {\n\t\t\tuser.settings.blockChallenges = target;\n\t\t\tif (target === 'friends') target = 'friended';\n\t\t\ttarget = this.tr(target);\n\t\t\tthis.sendReply(this.tr`You are now blocking challenges, except from staff and ${target} users.`);\n\t\t} else {\n\t\t\tuser.settings.blockChallenges = true;\n\t\t\tthis.sendReply(this.tr`You are now blocking all incoming challenge requests.`);\n\t\t}\n\t\tuser.update();\n\t},\n\tblockchallengeshelp: [\n\t\t`/blockchallenges - Blocks challenges so no one can challenge you. Unblock them with /unblockchallenges.`,\n\t],\n\n\tunbch: 'allowchallenges',\n\tunblockchall: 'allowchallenges',\n\tunblockchalls: 'allowchallenges',\n\tunblockchallenges: 'allowchallenges',\n\tallowchallenges(target, room, user) {\n\t\tif (!user.settings.blockChallenges) throw new Chat.ErrorMessage(this.tr`You are already available for challenges!`);\n\t\tuser.settings.blockChallenges = false;\n\t\tuser.update();\n\t\tthis.sendReply(this.tr`You are available for challenges from now on.`);\n\t},\n\tallowchallengeshelp: [\n\t\t`/unblockchallenges - Unblocks challenges so you can be challenged again. Block them with /blockchallenges.`,\n\t],\n\tcchall: 'cancelchallenge',\n\tcancelchallenge(target, room, user, connection) {\n\t\tconst { targetUser, targetUsername, rest } = this.splitUser(target);\n\t\tif (rest) return this.popupReply(this.tr`This command does not support specifying multiple users`);\n\t\tthis.pmTarget = targetUser || this.pmTarget;\n\t\tif (!this.pmTarget) return this.popupReply(this.tr`User \"${targetUsername}\" not found.`);\n\n\t\tconst chall = Ladders.challenges.search(user.id, this.pmTarget.id);\n\t\tif (!chall || chall.from !== user.id) {\n\t\t\tconnection.popup(`You are not challenging ${this.pmTarget.name}. Maybe they accepted/rejected before you cancelled?`);\n\t\t\treturn false;\n\t\t}\n\n\t\tthis.sendChatMessage(`/log ${user.name} cancelled the challenge.`);\n\t\treturn Ladders.challenges.remove(chall);\n\t},\n\tcancelchallengehelp: [\n\t\t`/cancelchallenge [user] - Cancels a pending challenge to the given [user].`,\n\t],\n\n\tasync accept(target, room, user, connection) {\n\t\tconst { targetUser, targetUsername, rest } = this.splitUser(target);\n\t\tif (rest) return this.popupReply(this.tr`This command does not support specifying multiple users`);\n\t\tthis.pmTarget = targetUser || this.pmTarget;\n\t\tif (!this.pmTarget) return this.popupReply(this.tr`User \"${targetUsername}\" not found.`);\n\n\t\tconst chall = Ladders.challenges.search(user.id, this.pmTarget.id);\n\t\tif (!chall || chall.to !== user.id) {\n\t\t\tconnection.popup(`${this.pmTarget.id} is not challenging you. Maybe they cancelled before you accepted?`);\n\t\t\treturn false;\n\t\t}\n\n\t\tif (chall.acceptCommand) {\n\t\t\treturn this.parse(chall.acceptCommand);\n\t\t}\n\t\tconst gameRoom = await Ladders.acceptChallenge(connection, chall as Ladders.BattleChallenge);\n\t\tif (!gameRoom) return false;\n\t\tthis.sendChatMessage(Utils.html`/nonotify ${user.name} accepted the challenge, starting &laquo;<a href=\"/${gameRoom.roomid}\">${gameRoom.roomid}</a>&raquo;`);\n\t\treturn true;\n\t},\n\taccepthelp: [`/accept [user] - Accepts a challenge from the given user.`],\n\n\treject(target, room, user, connection) {\n\t\tconst { targetUser, targetUsername, rest } = this.splitUser(target);\n\t\tif (rest) return this.popupReply(this.tr`This command does not support specifying multiple users`);\n\t\tthis.pmTarget = targetUser || this.pmTarget;\n\t\tif (!this.pmTarget) return this.popupReply(this.tr`User \"${targetUsername}\" not found.`);\n\n\t\tconst chall = Ladders.challenges.search(user.id, this.pmTarget.id);\n\t\tif (!chall || chall.to !== user.id) {\n\t\t\tconnection.popup(`${this.pmTarget.id} is not challenging you. Maybe they cancelled before you rejected?`);\n\t\t\treturn false;\n\t\t}\n\n\t\tthis.sendChatMessage(`/nonotify ${user.name} rejected the challenge.`);\n\t\treturn Ladders.challenges.remove(chall, false);\n\t},\n\trejecthelp: [`/reject [user] - Rejects a challenge from the given user.`],\n\n\tsaveteam: 'useteam',\n\tutm: 'useteam',\n\tuseteam(target, room, user) {\n\t\tuser.battleSettings.team = target;\n\t},\n\tuseteamhelp: [`/useteam [packed team] - Sets your team for your next battles to the given [team].`],\n\n\tvtm(target, room, user, connection) {\n\t\tif (Monitor.countPrepBattle(connection.ip, connection)) {\n\t\t\treturn;\n\t\t}\n\t\tif (!target) throw new Chat.ErrorMessage(this.tr`Provide a valid format.`);\n\t\tconst originalFormat = Dex.formats.get(target);\n\t\t// Note: The default here of Anything Goes isn't normally hit; since the web client will send a default format\n\t\tconst format = originalFormat.effectType === 'Format' ? originalFormat : Dex.formats.get('Anything Goes');\n\t\tif (format.effectType !== 'Format') return this.popupReply(this.tr`Please provide a valid format.`);\n\n\t\treturn TeamValidatorAsync.get(format.id).validateTeam(user.battleSettings.team, { user: user.id }).then(result => {\n\t\t\tconst matchMessage = (originalFormat === format ? \"\" : this.tr`The format '${originalFormat.name}' was not found.`);\n\t\t\tif (result.startsWith('1')) {\n\t\t\t\tconnection.popup(`${(matchMessage ? matchMessage + \"\\n\\n\" : \"\")}${this.tr`Your team is valid for ${format.name}.`}`);\n\t\t\t} else {\n\t\t\t\tconnection.popup(`${(matchMessage ? matchMessage + \"\\n\\n\" : \"\")}${this.tr`Your team was rejected for the following reasons:`}\\n\\n- ${result.slice(1).replace(/\\n/g, '\\n- ')}`);\n\t\t\t}\n\t\t});\n\t},\n\tvtmhelp: [`/vtm [format] - Validates your current team (set with /utm).`],\n\n\thbtc: 'hidebattlesfromtrainercard',\n\tsbtc: 'hidebattlesfromtrainercard',\n\tshowbattlesinusercard: 'hidebattlesfromtrainercard',\n\thidebattlesfromusercard: 'hidebattlesfromtrainercard',\n\tshowbattlesintrainercard: 'hidebattlesfromtrainercard',\n\thidebattlesfromtrainercard(target, room, user, connection, cmd) {\n\t\tconst shouldHide = cmd.includes('hide') || cmd === 'hbtc';\n\t\tuser.settings.hideBattlesFromTrainerCard = shouldHide;\n\t\tuser.update();\n\t\tif (shouldHide) {\n\t\t\tthis.sendReply(this.tr`Battles are now hidden (except to staff) in your trainer card.`);\n\t\t} else {\n\t\t\tthis.sendReply(this.tr`Battles are now visible in your trainer card.`);\n\t\t}\n\t},\n\thidebattlesfromtrainercardhelp: [\n\t\t`/hidebattlesfromtrainercard OR /hbtc - Hides your battles in your trainer card.`,\n\t\t`/showbattlesintrainercard OR /sbtc - Displays your battles in your trainer card.`,\n\t],\n\n\t/*********************************************************\n\t * Low-level\n\t *********************************************************/\n\n\tcmd: 'crq',\n\tquery: 'crq',\n\tasync crq(target, room, user, connection) {\n\t\t// In emergency mode, clamp down on data returned from crq's\n\t\tconst trustable = (!Config.emergency || (user.named && user.registered));\n\t\tlet cmd;\n\t\t[cmd, target] = Utils.splitFirst(target, ' ');\n\n\t\tconst handler = Chat.crqHandlers[cmd];\n\t\tif (!handler) return connection.send(`|queryresponse|${cmd}|null`);\n\t\tlet data = handler.call(this, target, user, trustable);\n\t\tif (data?.then) data = await data;\n\t\tconnection.send(`|queryresponse|${cmd}|${JSON.stringify(data)}`);\n\t},\n\n\ttrn(target, room, user, connection) {\n\t\tif (target === user.name) return false;\n\n\t\tconst [name, registeredString, token] = Utils.splitFirst(target, ',', 2);\n\t\tconst registered = !!parseInt(registeredString);\n\n\t\treturn user.rename(name, token || '', registered, connection);\n\t},\n\ttrnhelp: [\n\t\t`/trn [username], [registered], [token] - Finishes a rename to the [username] with a given [token].`,\n\t],\n\n\t/*********************************************************\n\t * Help commands\n\t *********************************************************/\n\n\tcommands: 'help',\n\th: 'help',\n\t'?': 'help',\n\tman: 'help',\n\thelp(target, room, user) {\n\t\tif (!this.runBroadcast()) return;\n\t\ttarget = target.toLowerCase().trim();\n\t\tif (target.startsWith('/') || target.startsWith('!')) target = target.slice(1);\n\n\t\tif (!target) {\n\t\t\tconst broadcastMsg = this.tr`(replace / with ! to broadcast. Broadcasting requires: + % @ # ~)`;\n\n\t\t\tthis.sendReply(`${this.tr`COMMANDS`}: /report, /msg, /reply, /logout, /challenge, /search, /rating, /whois, /user, /join, /leave, /userauth, /roomauth`);\n\t\t\tthis.sendReply(`${this.tr`BATTLE ROOM COMMANDS`}: /savereplay, /hideroom, /inviteonly, /invite, /timer, /forfeit`);\n\t\t\tthis.sendReply(`${this.tr`OPTION COMMANDS`}: /nick, /avatar, /ignore, /status, /away, /busy, /back, /timestamps, /highlight, /showjoins, /hidejoins, /blockchallenges, /blockpms`);\n\t\t\tthis.sendReply(`${this.tr`INFORMATIONAL/RESOURCE COMMANDS`}: /groups, /faq, /rules, /intro, /formatshelp, /othermetas, /analysis, /punishments, /calc, /git, /cap, /roomhelp, /roomfaq ${broadcastMsg}`);\n\t\t\tthis.sendReply(`${this.tr`DATA COMMANDS`}: /data, /dexsearch, /movesearch, /itemsearch, /learn, /statcalc, /effectiveness, /weakness, /coverage, /randommove, /randompokemon ${broadcastMsg}`);\n\t\t\tif (user.tempGroup !== Users.Auth.defaultSymbol()) {\n\t\t\t\tthis.sendReply(`${this.tr`DRIVER COMMANDS`}: /warn, /mute, /hourmute, /unmute, /alts, /forcerename, /modlog, /modnote, /modchat, /lock, /weeklock, /unlock, /announce`);\n\t\t\t\tthis.sendReply(`${this.tr`MODERATOR COMMANDS`}: /globalban, /unglobalban, /ip, /markshared, /unlockip`);\n\t\t\t\tthis.sendReply(`${this.tr`ADMIN COMMANDS`}: /declare, /forcetie, /forcewin, /promote, /demote, /banip, /host, /ipsearch`);\n\t\t\t}\n\t\t\tthis.sendReply(this.tr`For an overview of room commands, use /roomhelp`);\n\t\t\tthis.sendReply(this.tr`For details of a specific command, use something like: /help data`);\n\t\t\treturn;\n\t\t}\n\n\t\tconst getHelp = (namespace: Chat.AnnotatedChatCommands, cmds: string[]): boolean => {\n\t\t\tconst [cmd, ...subCmds] = cmds;\n\n\t\t\tif (subCmds.length) {\n\t\t\t\t// more specific help first\n\t\t\t\tconst subNamespace = namespace[cmd];\n\t\t\t\tif (typeof subNamespace === 'object' && !Array.isArray(subNamespace)) {\n\t\t\t\t\tif (getHelp(subNamespace, subCmds)) {\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tconst curHandler = namespace[cmd] as Chat.AnnotatedChatHandler;\n\t\t\tlet isPrivate = curHandler?.isPrivate;\n\t\t\tlet requiredPerm = curHandler?.requiredPermission || 'lock';\n\t\t\tlet help = namespace[`${cmd}help`];\n\t\t\tif (typeof help === 'string') {\n\t\t\t\thelp = namespace[help];\n\t\t\t}\n\t\t\tif (!help && typeof namespace[cmd] === 'string') {\n\t\t\t\thelp = namespace[`${namespace[cmd]}help`];\n\t\t\t}\n\t\t\tif (!help && namespace !== Chat.commands && namespace['help']) {\n\t\t\t\thelp = namespace['help'];\n\t\t\t}\n\n\t\t\tconst isNamespace = typeof Chat.commands[cmd] === 'object';\n\t\t\tif ((namespace !== Chat.commands || isNamespace) && !isPrivate) {\n\t\t\t\tif (isNamespace) namespace = Chat.commands[cmd] as Chat.AnnotatedChatCommands;\n\t\t\t\tfor (const k in namespace) {\n\t\t\t\t\tconst cur = namespace[k];\n\t\t\t\t\tif (typeof cur === 'function' && cur.isPrivate) {\n\t\t\t\t\t\tisPrivate = true;\n\t\t\t\t\t\trequiredPerm = (cur.requiredPermission || \"lock\");\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (isPrivate && !user.can(requiredPerm as GlobalPermission)) {\n\t\t\t\tthrow new Chat.ErrorMessage(this.tr`The command '/${target}' does not exist.`);\n\t\t\t}\n\n\t\t\tif (typeof help === 'function') {\n\t\t\t\t// If the help command is a function, parse it instead\n\t\t\t\tthis.run(help);\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\tif (Array.isArray(help)) {\n\t\t\t\tthis.sendReply(help.map(line => this.tr(line)).join('\\n'));\n\t\t\t\treturn true;\n\t\t\t}\n\n\t\t\tif (!curHandler) {\n\t\t\t\tfor (const g in Config.groups) {\n\t\t\t\t\tconst groupid = Config.groups[g].id;\n\t\t\t\t\tif (new RegExp(`(global)?(un|de)?${groupid}`).test(cmd)) {\n\t\t\t\t\t\treturn this.parse(`/help promote`);\n\t\t\t\t\t}\n\t\t\t\t\tif (new RegExp(`room(un|de)?${groupid}`).test(cmd)) {\n\t\t\t\t\t\treturn this.parse(`/help roompromote`);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tthrow new Chat.ErrorMessage(this.tr`The command '/${target}' does not exist.`);\n\t\t\t}\n\n\t\t\tif (cmd.endsWith('help')) {\n\t\t\t\tthis.sendReply(this.tr`'/${target}' is a help command.`);\n\t\t\t\treturn true;\n\t\t\t}\n\n\t\t\treturn false;\n\t\t};\n\n\t\tif (!getHelp(Chat.commands, target.split(' '))) {\n\t\t\tthrow new Chat.ErrorMessage(this.tr`Could not find help for '/${target}'. Try /help for general help.`);\n\t\t}\n\t},\n\thelphelp: [\n\t\t`/help OR /h OR /? - Gives you help.`,\n\t\t`/help [command] - Gives you help for a specific command.`,\n\t],\n};\n\nexport const pages: Chat.PageTable = {\n\treceivedpms(query, user) {\n\t\tthis.title = '[Received PMs]';\n\t\tif (!Chat.PrivateMessages.offlineIsEnabled) {\n\t\t\tthrow new Chat.ErrorMessage(`Offline PMs are presently disabled.`);\n\t\t}\n\t\treturn Chat.PrivateMessages.renderReceived(user);\n\t},\n};\n\nprocess.nextTick(() => {\n\t// We might want to migrate most of this to a JSON schema of command attributes.\n\tChat.multiLinePattern.register(\n\t\t'>>>? ', '/(?:room|staff)intro ', '/(?:staff)?topic ', '/(?:add|widen)datacenters ', '/bash ', '!code ', '/code ', '/modnote ', '/mn ',\n\t\t'/eval', '!eval', '/evalbattle', '/evalsql', '>>sql',\n\t\t'/importinputlog '\n\t);\n});\n\nexport const loginfilter: Chat.LoginFilter = user => {\n\tif (!Chat.PrivateMessages.checkCanUse(user, { isLogin: true, forceBool: true })) return;\n\tvoid Chat.PrivateMessages.sendReceived(user);\n};\n"],
  "mappings": "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",
  "names": ["roominfo", "targetRoom", "language", "player"]
}
