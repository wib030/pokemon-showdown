{
  "version": 3,
  "sources": ["../../../server/chat-plugins/wifi.tsx"],
  "sourcesContent": ["/**\n * Wi-Fi chat-plugin. Only works in a room with id 'wifi'\n * Handles giveaways in the formats: question, lottery, gts\n * Written by dhelmise and bumbadadabum, based on the original\n * plugin as written by Codelegend, SilverTactic, DanielCranham\n */\n\nimport { FS, Utils } from '../../lib';\n\nPunishments.addRoomPunishmentType({\n\ttype: 'GIVEAWAYBAN',\n\tdesc: 'banned from giveaways',\n});\n\nconst DAY = 24 * 60 * 60 * 1000;\nconst RECENT_THRESHOLD = 30 * 24 * 60 * 60 * 1000;\n\nconst DATA_FILE = 'config/chat-plugins/wifi.json';\n\ntype Game = 'SwSh' | 'BDSP' | 'SV';\n\ninterface GiveawayData {\n\ttargetUserID: string;\n\tot: string;\n\ttid: string;\n\tgame: Game;\n\tprize: PokemonSet;\n\tivs: string[];\n\tball: string;\n\textraInfo: string;\n\t/** Staff handling it. */\n\tclaimed?: ID;\n}\n\ninterface QuestionGiveawayData extends GiveawayData {\n\tquestion: string;\n\tanswers: string[];\n}\n\ninterface LotteryGiveawayData extends GiveawayData {\n\twinners: number;\n}\n\ninterface WifiData {\n\twhitelist: string[];\n\tstats: { [k: string]: number[] };\n\tstoredGiveaways: { question: QuestionGiveawayData[], lottery: LotteryGiveawayData[] };\n\tsubmittedGiveaways: { question: QuestionGiveawayData[], lottery: LotteryGiveawayData[] };\n}\n\nconst defaults: WifiData = {\n\twhitelist: [],\n\tstats: {},\n\tstoredGiveaways: {\n\t\tquestion: [],\n\t\tlottery: [],\n\t},\n\tsubmittedGiveaways: {\n\t\tquestion: [],\n\t\tlottery: [],\n\t},\n};\n\nexport let wifiData: WifiData = (() => {\n\ttry {\n\t\treturn JSON.parse(FS(DATA_FILE).readSync());\n\t} catch (e: any) {\n\t\tif (e.code !== 'ENOENT') throw e;\n\t\treturn defaults;\n\t}\n})();\n\nfunction saveData() {\n\tFS(DATA_FILE).writeUpdate(() => JSON.stringify(wifiData));\n}\n\n// Convert old file type\nif (!wifiData.stats && !wifiData.storedGiveaways && !wifiData.submittedGiveaways) {\n\t// we cast under the assumption that it's the old file format\n\tconst stats = { ...wifiData } as unknown as { [k: string]: number[] };\n\twifiData = { ...defaults, stats };\n\tsaveData();\n}\n// ensure the whitelist exists for those who might have the conversion above but not the stats\nif (!wifiData.whitelist) wifiData.whitelist = [];\n\nconst statNames = [\"HP\", \"Atk\", \"Def\", \"SpA\", \"SpD\", \"Spe\"];\n\nconst gameName: { [k in Game]: string } = {\n\tSwSh: 'Sword/Shield',\n\tBDSP: 'Brilliant Diamond/Shining Pearl',\n\tSV: 'Scarlet/Violet',\n};\nconst gameidToGame: { [k: string]: Game } = {\n\tswsh: 'SwSh',\n\tbdsp: 'BDSP',\n\tsv: 'SV',\n};\n\nabstract class Giveaway extends Rooms.SimpleRoomGame {\n\toverride readonly gameid = 'giveaway' as ID;\n\tabstract type: string;\n\tgaNumber: number;\n\thost: User;\n\tgiver: User;\n\toverride room: Room;\n\tot: string;\n\ttid: string;\n\tgame: Game;\n\tivs: string[];\n\tprize: PokemonSet;\n\tphase: string;\n\tball: string;\n\textraInfo: string;\n\t/**\n\t * IP:userid\n\t */\n\tjoined: Map<string, ID>;\n\toverride timer: NodeJS.Timeout | null;\n\tpokemonID: ID;\n\tsprite: Chat.VNode;\n\n\tconstructor(\n\t\thost: User, giver: User, room: Room, ot: string, tid: string, ivs: string[],\n\t\tprize: PokemonSet, game: Game = 'SV', ball: string, extraInfo: string\n\t) {\n\t\t// Make into a sub-game if the gts ever opens up again\n\t\tsuper(room);\n\t\tthis.gaNumber = room.nextGameNumber();\n\t\tthis.host = host;\n\t\tthis.giver = giver;\n\t\tthis.room = room;\n\t\tthis.ot = ot;\n\t\tthis.tid = tid;\n\t\tthis.ball = ball;\n\t\tthis.extraInfo = extraInfo;\n\t\tthis.game = game;\n\t\tthis.ivs = ivs;\n\t\tthis.prize = prize;\n\t\tthis.phase = 'pending';\n\n\t\tthis.joined = new Map();\n\n\t\tthis.timer = null;\n\n\t\t[this.pokemonID, this.sprite] = Giveaway.getSprite(prize);\n\t}\n\n\toverride destroy() {\n\t\tthis.clearTimer();\n\t\tsuper.destroy();\n\t}\n\n\tgenerateReminder(joined?: boolean): string | Chat.VNode;\n\tgenerateReminder() {\n\t\treturn '';\n\t}\n\n\tgetStyle() {\n\t\tconst css: { [k: string]: string | { [k: string]: string } } = { class: \"broadcast-blue\" };\n\t\tif (this.game === 'BDSP') css.style = { background: '#aa66a9', color: '#fff' };\n\t\tif (this.game === 'SV') css.style = { background: '#CD5C5C', color: '#fff' };\n\t\treturn css;\n\t}\n\n\tsendToUser(user: User, content: string | Chat.VNode) {\n\t\tuser.sendTo(\n\t\t\tthis.room,\n\t\t\tChat.html`|uhtmlchange|giveaway${this.gaNumber}${this.phase}|${<div {...this.getStyle()}>{content}</div>}`\n\t\t);\n\t}\n\n\tsend(content: string | Chat.VNode, isStart = false) {\n\t\tthis.room.add(Chat.html`|uhtml|giveaway${this.gaNumber}${this.phase}|${<div {...this.getStyle()}>{content}</div>}`);\n\t\tif (isStart) this.room.add(`|c:|${Math.floor(Date.now() / 1000)}|~|It's ${this.game} giveaway time!`);\n\t\tthis.room.update();\n\t}\n\n\tchangeUhtml(content: string | Chat.VNode) {\n\t\tthis.room.uhtmlchange(`giveaway${this.gaNumber}${this.phase}`, Chat.html`${<div {...this.getStyle()}>{content}</div>}`);\n\t\tthis.room.update();\n\t}\n\n\tclearTimer() {\n\t\tif (this.timer) {\n\t\t\tclearTimeout(this.timer);\n\t\t\tthis.timer = null;\n\t\t}\n\t}\n\n\tcheckJoined(user: User) {\n\t\tfor (const [ip, id] of this.joined) {\n\t\t\tif (user.latestIp === ip && !Config.noipchecks) return ip;\n\t\t\tif (user.previousIDs.includes(id)) return id;\n\t\t}\n\t\treturn false;\n\t}\n\n\tkickUser(user: User) {\n\t\tfor (const [ip, id] of this.joined) {\n\t\t\tif (user.latestIp === ip && !Config.noipchecks || user.previousIDs.includes(id)) {\n\t\t\t\tthis.sendToUser(user, this.generateReminder());\n\t\t\t\tthis.joined.delete(ip);\n\t\t\t}\n\t\t}\n\t}\n\n\tcheckExcluded(user: User) {\n\t\treturn (\n\t\t\tuser === this.giver ||\n\t\t\t!Config.noipchecks && this.giver.ips.includes(user.latestIp) ||\n\t\t\tthis.giver.previousIDs.includes(toID(user))\n\t\t);\n\t}\n\n\tstatic checkCanCreate(context: Chat.CommandContext, targetUser: User, type: string) {\n\t\tconst user = context.user;\n\t\tconst isCreate = type === 'create';\n\t\tconst isForSelf = targetUser.id === user.id;\n\t\tif (wifiData.whitelist.includes(user.id) && isCreate && isForSelf) {\n\t\t\t// it being true doesn't matter here, it's just clearer that the user _is_ allowed\n\t\t\t// and it ensures execution stops here so the creation can proceed\n\t\t\treturn true;\n\t\t}\n\t\tif (isCreate && !(isForSelf && user.can('show', null, context.room!))) {\n\t\t\tcontext.checkCan('warn', null, context.room!);\n\t\t}\n\t\tif (!user.can('warn', null, context.room!) && !isCreate && !isForSelf) {\n\t\t\tthrow new Chat.ErrorMessage(`You can't ${type} giveways for other users.`);\n\t\t}\n\t}\n\n\tstatic checkBanned(room: Room, user: User) {\n\t\treturn Punishments.hasRoomPunishType(room, toID(user), 'GIVEAWAYBAN');\n\t}\n\n\tstatic ban(room: Room, user: User, reason: string, duration: number) {\n\t\tPunishments.roomPunish(room, user, {\n\t\t\ttype: 'GIVEAWAYBAN',\n\t\t\tid: toID(user),\n\t\t\texpireTime: Date.now() + duration,\n\t\t\treason,\n\t\t});\n\t}\n\n\tstatic unban(room: Room, user: User) {\n\t\tPunishments.roomUnpunish(room, user.id, 'GIVEAWAYBAN', false);\n\t}\n\n\tstatic getSprite(set: PokemonSet): [ID, Chat.VNode] {\n\t\tconst species = Dex.species.get(set.species);\n\t\tlet spriteid = species.spriteid;\n\t\tif (species.cosmeticFormes) {\n\t\t\tfor (const forme of species.cosmeticFormes.map(toID)) {\n\t\t\t\tif (toID(set.species).includes(forme)) {\n\t\t\t\t\tspriteid += '-' + forme.slice(species.baseSpecies.length);\n\t\t\t\t\tbreak; // We don't want to end up with deerling-summer-spring\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tif (!spriteid.includes('-') && species.forme) { // for stuff like unown letters\n\t\t\tspriteid += '-' + toID(species.forme);\n\t\t}\n\t\tconst shiny = set.shiny ? '-shiny' : '';\n\n\t\tconst validFemale = [\n\t\t\t'abomasnow', 'aipom', 'ambipom', 'beautifly', 'bibarel', 'bidoof', 'blaziken', 'buizel', 'cacturne', 'camerupt', 'combee',\n\t\t\t'combusken', 'croagunk', 'donphan', 'dustox', 'finneon', 'floatzel', 'frillish', 'gabite', 'garchomp', 'gible', 'girafarig',\n\t\t\t'gligar', 'golbat', 'gulpin', 'heracross', 'hippopotas', 'hippowdon', 'houndoom', 'indeedee', 'jellicent', 'kerfluffle', 'kitsunoh',\n\t\t\t'kricketot', 'kricketune', 'ledian', 'ledyba', 'ludicolo', 'lumineon', 'luxio', 'luxray', 'magikarp', 'mamoswine', 'medicham',\n\t\t\t'meditite', 'meganium', 'meowstic', 'milotic', 'murkrow', 'nidoran', 'numel', 'nuzleaf', 'octillery', 'pachirisu', 'pikachu',\n\t\t\t'pikachu-starter', 'piloswine', 'politoed', 'protowatt', 'pyroar', 'quagsire', 'raticate', 'rattata', 'relicanth', 'rhydon',\n\t\t\t'rhyperior', 'roselia', 'roserade', 'rotom', 'scizor', 'scyther', 'shiftry', 'shinx', 'sneasel', 'snover', 'staraptor', 'staravia',\n\t\t\t'starly', 'steelix', 'sudowoodo', 'swalot', 'tangrowth', 'torchic', 'toxicroak', 'unfezant', 'unown', 'ursaring', 'voodoom',\n\t\t\t'weavile', 'wobbuffet', 'wooper', 'xatu', 'zubat',\n\t\t];\n\t\tif (set.gender === 'F' && validFemale.includes(species.id)) spriteid += '-f';\n\t\treturn [\n\t\t\tspecies.id,\n\t\t\t<img src={`/sprites/ani${shiny}/${spriteid}.gif`} />,\n\t\t];\n\t}\n\n\tstatic updateStats(pokemonIDs: Set<string>) {\n\t\tfor (const mon of pokemonIDs) {\n\t\t\tif (!wifiData.stats[mon]) wifiData.stats[mon] = [];\n\t\t\twifiData.stats[mon].push(Date.now());\n\t\t}\n\t\tsaveData();\n\t}\n\n\t// Wi-Fi uses special IV syntax to show hyper trained IVs\n\tstatic convertIVs(setObj: PokemonSet, ivs: string[]) {\n\t\tlet set = Teams.exportSet(setObj);\n\t\tlet ivsStr = '';\n\t\tif (ivs.length) {\n\t\t\tconst convertedIVs = { hp: '31', atk: '31', def: '31', spa: '31', spd: '31', spe: '31' };\n\t\t\tfor (const [i, iv] of ivs.entries()) {\n\t\t\t\tconst numStr = iv.trim().split(' ')[0];\n\t\t\t\tconst statName = statNames[i];\n\t\t\t\tconvertedIVs[toID(statName) as StatID] = numStr;\n\t\t\t}\n\t\t\tconst array = Object.keys(convertedIVs).map((x, i) => `${convertedIVs[x as StatID]} ${statNames[i]}`);\n\t\t\tivsStr = `IVs: ${array.join(' / ')}  `;\n\t\t}\n\t\tif (ivsStr) {\n\t\t\tif (/\\nivs:/i.test(set)) {\n\t\t\t\tconst arr = set.split('\\n');\n\t\t\t\tconst index = arr.findIndex(x => /^ivs:/i.test(x));\n\t\t\t\tarr[index] = ivsStr;\n\t\t\t\tset = arr.join('\\n');\n\t\t\t} else if (/nature\\n/i.test(set)) {\n\t\t\t\tconst arr = set.split('\\n');\n\t\t\t\tconst index = arr.findIndex(x => /nature$/i.test(x));\n\t\t\t\tarr.splice(index + 1, 0, ivsStr);\n\t\t\t\tset = arr.join('\\n');\n\t\t\t} else {\n\t\t\t\tset += `\\n${ivsStr}`;\n\t\t\t}\n\t\t}\n\t\treturn set;\n\t}\n\n\tgenerateWindow(rightSide: Chat.VNode | string): Chat.VNode {\n\t\tconst set = Giveaway.convertIVs(this.prize, this.ivs);\n\t\treturn <center>\n\t\t\t<h3>It's {this.game} giveaway time!</h3>\n\t\t\t<small>Giveaway started by {this.host.name}</small>\n\t\t\t<table style={{ marginLeft: 'auto', marginRight: 'auto' }}>\n\t\t\t\t<tr>\n\t\t\t\t\t<td colSpan={2} style={{ textAlign: 'center' }}>\n\t\t\t\t\t\t<strong>Giver:</strong> {this.giver.name}<br />\n\t\t\t\t\t\t<strong>OT:</strong> {this.ot}, <strong>TID:</strong> {this.tid}\n\t\t\t\t\t</td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td style={{ textAlign: 'center', width: '45%' }}>\n\t\t\t\t\t\t<psicon item={this.ball} /> {this.sprite} <psicon item={this.ball} /><br />\n\t\t\t\t\t\t<Chat.JSX.FormatText isTrusted>{set}</Chat.JSX.FormatText>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td style={{ textAlign: 'center', width: '45%' }}>{rightSide}</td>\n\t\t\t\t</tr>\n\t\t\t\t{!!this.extraInfo?.trim().length && <tr>\n\t\t\t\t\t<td colSpan={2} style={{ textAlign: 'center' }}>\n\t\t\t\t\t\t<strong>Extra Information</strong><br />\n\t\t\t\t\t\t<Chat.JSX.FormatText isTrusted>{this.extraInfo.trim().replace(/<br \\/>/g, '\\n')}</Chat.JSX.FormatText>\n\t\t\t\t\t</td>\n\t\t\t\t</tr>}\n\t\t\t</table>\n\t\t\t<p style={{ textAlign: 'center', fontSize: '7pt', fontWeight: 'bold' }}>\n\t\t\t\t<u>Note:</u> You must have a Switch, Pok&eacute;mon {gameName[this.game]}, {}\n\t\t\t\tand NSO to receive the prize. {}\n\t\t\t\tDo not join if you are currently unable to trade. Do not enter if you have already won this exact Pok&eacute;mon, {}\n\t\t\t\tunless it is explicitly allowed.\n\t\t\t</p>\n\t\t</center>;\n\t}\n}\n\nexport class QuestionGiveaway extends Giveaway {\n\ttype: string;\n\tquestion: string;\n\tanswers: string[];\n\t/** userid: number of guesses */\n\tanswered: Utils.Multiset<string>;\n\twinner: User | null;\n\n\tconstructor(\n\t\thost: User, giver: User, room: Room, ot: string, tid: string, game: Game, ivs: string[],\n\t\tprize: PokemonSet, question: string, answers: string[], ball: string, extraInfo: string\n\t) {\n\t\tsuper(host, giver, room, ot, tid, ivs, prize, game, ball, extraInfo);\n\t\tthis.type = 'question';\n\t\tthis.phase = 'pending';\n\n\t\tthis.question = question;\n\t\tthis.answers = QuestionGiveaway.sanitizeAnswers(answers);\n\t\tthis.answered = new Utils.Multiset();\n\t\tthis.winner = null;\n\t\tthis.send(this.generateWindow('The question will be displayed in one minute! Use /guess to answer.'), true);\n\n\t\tthis.timer = setTimeout(() => this.start(), 1000 * 60);\n\t}\n\n\tstatic splitTarget(\n\t\ttarget: string, sep = '|', context: Chat.CommandContext,\n\t\tuser: User, type: 'create' | 'store' | 'submit'\n\t) {\n\t\tlet [\n\t\t\tgiver, ot, tid, game, question, answers, ivs, ball, extraInfo, ...prize\n\t\t] = target.split(sep).map(param => param.trim());\n\t\tif (!(giver && ot && tid && prize?.length && question && answers?.split(',').length)) {\n\t\t\tcontext.parse(`/help giveaway`);\n\t\t\tthrow new Chat.Interruption();\n\t\t}\n\t\tconst targetUser = Users.get(giver);\n\t\tif (!targetUser?.connected) throw new Chat.ErrorMessage(`User '${giver}' is not online.`);\n\n\t\tGiveaway.checkCanCreate(context, targetUser, type);\n\n\t\tif (!!ivs && ivs.split('/').length !== 6) {\n\t\t\tthrow new Chat.ErrorMessage(`If you provide IVs, they must be provided for all stats.`);\n\t\t}\n\t\tif (!game) game = 'SV';\n\t\tgame = gameidToGame[toID(game)] || game as Game;\n\t\tif (!game || !['SV', 'BDSP', 'SwSh'].includes(game)) {\n\t\t\tthrow new Chat.ErrorMessage(`The game must be \"SV,\" \"BDSP,\" or \"SwSh\".`);\n\t\t}\n\t\tif (!ball) ball = 'pokeball';\n\t\tif (!toID(ball).endsWith('ball')) ball = toID(ball) + 'ball';\n\t\tif (!Dex.items.get(ball).isPokeball) {\n\t\t\tthrow new Chat.ErrorMessage(`${Dex.items.get(ball).name} is not a Pok\\u00e9 Ball.`);\n\t\t}\n\t\ttid = toID(tid);\n\t\tif (isNaN(parseInt(tid)) || tid.length < 5 || tid.length > 6) throw new Chat.ErrorMessage(\"Invalid TID\");\n\t\tif (!targetUser.autoconfirmed) {\n\t\t\tthrow new Chat.ErrorMessage(`User '${targetUser.name}' needs to be autoconfirmed to give something away.`);\n\t\t}\n\t\tif (Giveaway.checkBanned(context.room!, targetUser)) {\n\t\t\tthrow new Chat.ErrorMessage(`User '${targetUser.name}' is giveaway banned.`);\n\t\t}\n\t\treturn {\n\t\t\ttargetUser, ot, tid, game: game as Game, question, answers: answers.split(','),\n\t\t\tivs: ivs.split('/'), ball, extraInfo, prize: prize.join('|'),\n\t\t};\n\t}\n\n\tgenerateQuestion() {\n\t\treturn this.generateWindow(<>\n\t\t\t<p style={{ textAlign: 'center', fontSize: '13pt' }}>Giveaway Question: <b>{this.question}</b></p>\n\t\t\t<p style={{ textAlign: 'center' }}>use /guess to answer.</p>\n\t\t</>);\n\t}\n\n\tstart() {\n\t\tthis.changeUhtml(<p style={{ textAlign: 'center', fontSize: '13pt', fontWeight: 'bold' }}>\n\t\t\tThe giveaway has started! Scroll down to see the question.\n\t\t</p>);\n\t\tthis.phase = 'started';\n\t\tthis.send(this.generateQuestion());\n\t\tthis.timer = setTimeout(() => this.end(false), 1000 * 60 * 5);\n\t}\n\n\toverride choose(user: User, guess: string) {\n\t\tif (this.phase !== 'started') return user.sendTo(this.room, \"The giveaway has not started yet.\");\n\n\t\tif (this.checkJoined(user) && ![...this.joined.values()].includes(user.id)) {\n\t\t\treturn user.sendTo(this.room, \"You have already joined the giveaway.\");\n\t\t}\n\t\tif (Giveaway.checkBanned(this.room, user)) return user.sendTo(this.room, \"You are banned from entering giveaways.\");\n\t\tif (this.checkExcluded(user)) return user.sendTo(this.room, \"You are disallowed from entering the giveaway.\");\n\n\t\tif (this.answered.get(user.id) >= 3) {\n\t\t\treturn user.sendTo(\n\t\t\t\tthis.room,\n\t\t\t\t\"You have already guessed three times. You cannot guess anymore in this.giveaway.\"\n\t\t\t);\n\t\t}\n\n\t\tconst sanitized = toID(guess);\n\n\t\tfor (const answer of this.answers.map(toID)) {\n\t\t\tif (answer === sanitized) {\n\t\t\t\tthis.winner = user;\n\t\t\t\tthis.clearTimer();\n\t\t\t\treturn this.end(false);\n\t\t\t}\n\t\t}\n\n\t\tthis.joined.set(user.latestIp, user.id);\n\t\tthis.answered.add(user.id);\n\t\tif (this.answered.get(user.id) >= 3) {\n\t\t\tuser.sendTo(\n\t\t\t\tthis.room,\n\t\t\t\t`Your guess '${guess}' is wrong. You have used up all of your guesses. Better luck next time!`\n\t\t\t);\n\t\t} else {\n\t\t\tuser.sendTo(this.room, `Your guess '${guess}' is wrong. Try again!`);\n\t\t}\n\t}\n\n\tchange(value: string, user: User, answer = false) {\n\t\tif (user.id !== this.host.id) return user.sendTo(this.room, \"Only the host can edit the giveaway.\");\n\t\tif (this.phase !== 'pending') {\n\t\t\treturn user.sendTo(this.room, \"You cannot change the question or answer once the giveaway has started.\");\n\t\t}\n\t\tif (!answer) {\n\t\t\tthis.question = value;\n\t\t\treturn user.sendTo(this.room, `The question has been changed to ${value}.`);\n\t\t}\n\t\tconst ans = QuestionGiveaway.sanitizeAnswers(value.split(',').map(val => val.trim()));\n\t\tif (!ans.length) {\n\t\t\treturn user.sendTo(this.room, \"You must specify at least one answer and it must not contain any special characters.\");\n\t\t}\n\t\tthis.answers = ans;\n\t\tuser.sendTo(this.room, `The answer${Chat.plural(ans, \"s have\", \"has\")} been changed to ${ans.join(', ')}.`);\n\t}\n\n\tend(force: boolean) {\n\t\tconst style = { textAlign: 'center', fontSize: '13pt', fontWeight: 'bold' };\n\t\tif (force) {\n\t\t\tthis.clearTimer();\n\t\t\tthis.changeUhtml(<p style={style}>The giveaway was forcibly ended.</p>);\n\t\t\tthis.room.send(\"The giveaway was forcibly ended.\");\n\t\t} else {\n\t\t\tif (!this.winner) {\n\t\t\t\tthis.changeUhtml(<p style={style}>The giveaway was forcibly ended.</p>);\n\t\t\t\tthis.room.send(\"The giveaway has been forcibly ended as no one has answered the question.\");\n\t\t\t} else {\n\t\t\t\tthis.changeUhtml(<p style={style}>The giveaway has ended! Scroll down to see the answer.</p>);\n\t\t\t\tthis.phase = 'ended';\n\t\t\t\tthis.clearTimer();\n\t\t\t\tthis.room.modlog({\n\t\t\t\t\taction: 'GIVEAWAY WIN',\n\t\t\t\t\tuserid: this.winner.id,\n\t\t\t\t\tnote: `${this.giver.name}'s giveaway for a \"${this.prize.species}\" (OT: ${this.ot} TID: ${this.tid} Nature: ${this.prize.nature} Ball: ${this.ball}${this.extraInfo ? ` Other box info: ${this.extraInfo}` : ''})`,\n\t\t\t\t});\n\t\t\t\tthis.send(this.generateWindow(<>\n\t\t\t\t\t<p style={{ textAlign: 'center', fontSize: '12pt' }}>\n\t\t\t\t\t\t<b>{this.winner.name}</b> won the giveaway! Congratulations!\n\t\t\t\t\t</p>\n\t\t\t\t\t<p style={{ textAlign: 'center' }}>\n\t\t\t\t\t\t{this.question}<br />\n\t\t\t\t\t\tCorrect answer{Chat.plural(this.answers)}: {this.answers.join(', ')}\n\t\t\t\t\t</p>\n\t\t\t\t</>));\n\t\t\t\tthis.winner.sendTo(\n\t\t\t\t\tthis.room,\n\t\t\t\t\t`|raw|You have won the giveaway. PM <b>${Utils.escapeHTML(this.giver.name)}</b> to claim your prize!`\n\t\t\t\t);\n\t\t\t\tif (this.winner.connected) {\n\t\t\t\t\tthis.winner.popup(`You have won the giveaway. PM **${this.giver.name}** to claim your prize!`);\n\t\t\t\t}\n\t\t\t\tif (this.giver.connected) this.giver.popup(`${this.winner.name} has won your question giveaway!`);\n\t\t\t\tGiveaway.updateStats(new Set([this.pokemonID]));\n\t\t\t}\n\t\t}\n\n\t\tthis.destroy();\n\t}\n\n\tstatic sanitize(str: string) {\n\t\treturn str.toLowerCase().replace(/[^a-z0-9 .-]+/ig, \"\").trim();\n\t}\n\n\tstatic sanitizeAnswers(answers: string[]) {\n\t\treturn answers.map(\n\t\t\tval => QuestionGiveaway.sanitize(val)\n\t\t).filter(\n\t\t\t(val, index, array) => toID(val).length && array.indexOf(val) === index\n\t\t);\n\t}\n\n\toverride checkExcluded(user: User) {\n\t\tif (user === this.host) return true;\n\t\tif (this.host.ips.includes(user.latestIp) && !Config.noipchecks) return true;\n\t\tif (this.host.previousIDs.includes(toID(user))) return true;\n\t\treturn super.checkExcluded(user);\n\t}\n}\n\nexport class LotteryGiveaway extends Giveaway {\n\ttype: string;\n\twinners: User[];\n\tmaxWinners: number;\n\n\tconstructor(\n\t\thost: User, giver: User, room: Room, ot: string, tid: string, ivs: string[],\n\t\tgame: Game, prize: PokemonSet, winners: number, ball: string, extraInfo: string\n\t) {\n\t\tsuper(host, giver, room, ot, tid, ivs, prize, game, ball, extraInfo);\n\n\t\tthis.type = 'lottery';\n\t\tthis.phase = 'pending';\n\n\t\tthis.winners = [];\n\n\t\tthis.maxWinners = winners || 1;\n\n\t\tthis.send(this.generateReminder(false), true);\n\n\t\tthis.timer = setTimeout(() => this.drawLottery(), 1000 * 60 * 2);\n\t}\n\n\tstatic splitTarget(\n\t\ttarget: string, sep = '|', context: Chat.CommandContext,\n\t\tuser: User, type: 'create' | 'store' | 'submit'\n\t) {\n\t\tlet [giver, ot, tid, game, winners, ivs, ball, extraInfo, ...prize] = target.split(sep).map(param => param.trim());\n\t\tif (!(giver && ot && tid && prize?.length)) {\n\t\t\tcontext.parse(`/help giveaway`);\n\t\t\tthrow new Chat.Interruption();\n\t\t}\n\t\tconst targetUser = Users.get(giver);\n\t\tif (!targetUser?.connected) throw new Chat.ErrorMessage(`User '${giver}' is not online.`);\n\n\t\tGiveaway.checkCanCreate(context, user, type);\n\n\t\tif (!!ivs && ivs.split('/').length !== 6) {\n\t\t\tthrow new Chat.ErrorMessage(`If you provide IVs, they must be provided for all stats.`);\n\t\t}\n\t\tif (!game) game = 'SV';\n\t\tgame = gameidToGame[toID(game)] || game as Game;\n\t\tif (!game || !['SV', 'BDSP', 'SwSh'].includes(game)) {\n\t\t\tthrow new Chat.ErrorMessage(`The game must be \"SV,\" \"BDSP,\" or \"SwSh\".`);\n\t\t}\n\t\tif (!ball) ball = 'pokeball';\n\t\tif (!toID(ball).endsWith('ball')) ball = toID(ball) + 'ball';\n\t\tif (!Dex.items.get(ball).isPokeball) {\n\t\t\tthrow new Chat.ErrorMessage(`${Dex.items.get(ball).name} is not a Pok\\u00e9 Ball.`);\n\t\t}\n\t\ttid = toID(tid);\n\t\tif (isNaN(parseInt(tid)) || tid.length < 5 || tid.length > 6) throw new Chat.ErrorMessage(\"Invalid TID\");\n\t\tif (!targetUser.autoconfirmed) {\n\t\t\tthrow new Chat.ErrorMessage(`User '${targetUser.name}' needs to be autoconfirmed to give something away.`);\n\t\t}\n\t\tif (Giveaway.checkBanned(context.room!, targetUser)) {\n\t\t\tthrow new Chat.ErrorMessage(`User '${targetUser.name}' is giveaway banned.`);\n\t\t}\n\n\t\tlet numWinners = 1;\n\t\tif (winners) {\n\t\t\tnumWinners = parseInt(winners);\n\t\t\tif (isNaN(numWinners) || numWinners < 1 || numWinners > 5) {\n\t\t\t\tthrow new Chat.ErrorMessage(\"The lottery giveaway can have a minimum of 1 and a maximum of 5 winners.\");\n\t\t\t}\n\t\t}\n\t\treturn {\n\t\t\ttargetUser, ot, tid, game: game as Game, winners: numWinners,\n\t\t\tivs: ivs.split('/'), ball, extraInfo, prize: prize.join('|'),\n\t\t};\n\t}\n\n\toverride generateReminder(joined = false) {\n\t\tconst cmd = (joined ? 'Leave' : 'Join');\n\t\treturn this.generateWindow(<>\n\t\t\tThe lottery drawing will occur in 2 minutes, and with {Chat.count(this.maxWinners, \"winners\")}!<br />\n\t\t\t<button class=\"button\" name=\"send\" value={`/giveaway ${toID(cmd)}lottery`}><strong>{cmd}</strong></button>\n\t\t</>);\n\t}\n\n\tdisplay() {\n\t\tconst joined = this.generateReminder(true);\n\t\tconst notJoined = this.generateReminder();\n\n\t\tfor (const i in this.room.users) {\n\t\t\tconst thisUser = this.room.users[i];\n\t\t\tif (this.checkJoined(thisUser)) {\n\t\t\t\tthis.sendToUser(thisUser, joined);\n\t\t\t} else {\n\t\t\t\tthis.sendToUser(thisUser, notJoined);\n\t\t\t}\n\t\t}\n\t}\n\n\taddUser(user: User) {\n\t\tif (this.phase !== 'pending') return user.sendTo(this.room, \"The join phase of the lottery giveaway has ended.\");\n\n\t\tif (!user.named) return user.sendTo(this.room, \"You need to choose a name before joining a lottery giveaway.\");\n\t\tif (this.checkJoined(user)) return user.sendTo(this.room, \"You have already joined the giveaway.\");\n\t\tif (Giveaway.checkBanned(this.room, user)) return user.sendTo(this.room, \"You are banned from entering giveaways.\");\n\t\tif (this.checkExcluded(user)) return user.sendTo(this.room, \"You are disallowed from entering the giveaway.\");\n\n\t\tthis.joined.set(user.latestIp, user.id);\n\t\tthis.sendToUser(user, this.generateReminder(true));\n\t\tuser.sendTo(this.room, \"You have successfully joined the lottery giveaway.\");\n\t}\n\n\tremoveUser(user: User) {\n\t\tif (this.phase !== 'pending') return user.sendTo(this.room, \"The join phase of the lottery giveaway has ended.\");\n\t\tif (!this.checkJoined(user)) return user.sendTo(this.room, \"You have not joined the lottery giveaway.\");\n\t\tfor (const [ip, id] of this.joined) {\n\t\t\tif (ip === user.latestIp && !Config.noipchecks || id === user.id) {\n\t\t\t\tthis.joined.delete(ip);\n\t\t\t}\n\t\t}\n\t\tthis.sendToUser(user, this.generateReminder(false));\n\t\tuser.sendTo(this.room, \"You have left the lottery giveaway.\");\n\t}\n\n\tdrawLottery() {\n\t\tthis.clearTimer();\n\n\t\tconst userlist = [...this.joined.values()];\n\t\tif (userlist.length === 0) {\n\t\t\tthis.changeUhtml(<p style={{ textAlign: 'center', fontSize: '13pt', fontWeight: 'bold' }}>\n\t\t\t\tThe giveaway was forcibly ended.\n\t\t\t</p>);\n\t\t\tthis.room.send(\"The giveaway has been forcibly ended as there are no participants.\");\n\t\t\treturn this.destroy();\n\t\t}\n\n\t\twhile (this.winners.length < this.maxWinners && userlist.length > 0) {\n\t\t\tconst winner = Users.get(userlist.splice(Math.floor(Math.random() * userlist.length), 1)[0]);\n\t\t\tif (!winner) continue;\n\t\t\tthis.winners.push(winner);\n\t\t}\n\t\tthis.end();\n\t}\n\n\tend(force = false) {\n\t\tconst style = { textAlign: 'center', fontSize: '13pt', fontWeight: 'bold' };\n\t\tif (force) {\n\t\t\tthis.clearTimer();\n\t\t\tthis.changeUhtml(<p style={style}>The giveaway was forcibly ended.</p>);\n\t\t\tthis.room.send(\"The giveaway was forcibly ended.\");\n\t\t} else {\n\t\t\tthis.changeUhtml(<p style={style}>\n\t\t\t\tThe giveaway has ended! Scroll down to see the winner{Chat.plural(this.winners)}.\n\t\t\t</p>);\n\t\t\tthis.phase = 'ended';\n\t\t\tconst winnerNames = this.winners.map(winner => winner.name).join(', ');\n\t\t\tthis.room.modlog({\n\t\t\t\taction: 'GIVEAWAY WIN',\n\t\t\t\tnote: `${winnerNames} won ${this.giver.name}'s giveaway for \"${this.prize.species}\" (OT: ${this.ot} TID: ${this.tid} Nature: ${this.prize.nature} Ball: ${this.ball}${this.extraInfo ? ` Other box info: ${this.extraInfo}` : ''})`,\n\t\t\t});\n\t\t\tthis.send(this.generateWindow(<>\n\t\t\t\t<p style={{ textAlign: 'center', fontSize: '10pt', fontWeight: 'bold' }}>Lottery Draw</p>\n\t\t\t\t<p style={{ textAlign: 'center' }}>{Chat.count(this.joined.size, 'users')} joined the giveaway.<br />\n\t\t\t\t\tOur lucky winner{Chat.plural(this.winners)}: <b>{winnerNames}</b>!<br />Congratulations!</p>\n\t\t\t</>));\n\t\t\tthis.room.sendMods(`|c|~|Participants: ${[...this.joined.values()].join(', ')}`);\n\t\t\tfor (const winner of this.winners) {\n\t\t\t\twinner.sendTo(\n\t\t\t\t\tthis.room,\n\t\t\t\t\t`|raw|You have won the lottery giveaway! PM <b>${this.giver.name}</b> to claim your prize!`\n\t\t\t\t);\n\t\t\t\tif (winner.connected) {\n\t\t\t\t\twinner.popup(`You have won the lottery giveaway! PM **${this.giver.name}** to claim your prize!`);\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (this.giver.connected) this.giver.popup(`The following users have won your lottery giveaway:\\n${winnerNames}`);\n\t\t\tGiveaway.updateStats(new Set([this.pokemonID]));\n\t\t}\n\t\tthis.destroy();\n\t}\n}\n\nexport class GTS extends Rooms.SimpleRoomGame {\n\toverride readonly gameid = 'gts' as ID;\n\tgtsNumber: number;\n\toverride room: Room;\n\tgiver: User;\n\tleft: number;\n\tsummary: string;\n\tdeposit: string;\n\tlookfor: string;\n\tpokemonID: ID;\n\tsprite: Chat.VNode;\n\tsent: string[];\n\tnoDeposits: boolean;\n\toverride timer: NodeJS.Timeout | null;\n\n\tconstructor(\n\t\troom: Room, giver: User, amount: number,\n\t\tsummary: string, deposit: string, lookfor: string\n\t) {\n\t\t// Always a sub-game so tours etc can be ran while GTS games are running\n\t\tsuper(room, true);\n\t\tthis.gtsNumber = room.nextGameNumber();\n\t\tthis.room = room;\n\t\tthis.giver = giver;\n\t\tthis.left = amount;\n\t\tthis.summary = summary;\n\t\tthis.deposit = GTS.linkify(Utils.escapeHTML(deposit));\n\t\tthis.lookfor = lookfor;\n\n\t\t// Deprecated, just typed like this to prevent errors, will rewrite when GTS is planned to be used again\n\t\t[this.pokemonID, this.sprite] = Giveaway.getSprite({ species: summary } as PokemonSet);\n\n\t\tthis.sent = [];\n\t\tthis.noDeposits = false;\n\n\t\tthis.timer = setInterval(() => this.send(this.generateWindow()), 1000 * 60 * 5);\n\t\tthis.send(this.generateWindow());\n\t}\n\n\tsend(content: string) {\n\t\tthis.room.add(Chat.html`|uhtml|gtsga${this.gtsNumber}|${<div class=\"broadcast-blue\">{content}</div>}`);\n\t\tthis.room.update();\n\t}\n\n\tchangeUhtml(content: string) {\n\t\tthis.room.uhtmlchange(`gtsga${this.gtsNumber}`, Chat.html`${<div class=\"broadcast-blue\">{content}</div>}`);\n\t\tthis.room.update();\n\t}\n\n\tclearTimer() {\n\t\tif (this.timer) {\n\t\t\tclearTimeout(this.timer);\n\t\t\tthis.timer = null;\n\t\t}\n\t}\n\n\tgenerateWindow() {\n\t\tconst sentModifier = this.sent.length ? 5 : 0;\n\t\tconst rightSide = this.noDeposits ?\n\t\t\t<strong>\n\t\t\t\tMore Pok&eacute;mon have been deposited than there are prizes in this giveaway and new deposits will not be accepted. {}\n\t\t\t\tIf you have already deposited a Pok&eacute;mon, please be patient, and do not withdraw your Pok&eacute;mon.\n\t\t\t</strong> : <>\n\t\t\t\tTo participate, deposit <strong>{this.deposit}</strong> into the GTS and look for <strong>{this.lookfor}</strong>\n\t\t\t</>;\n\t\treturn <>\n\t\t\t<p style={{ textAlign: 'center', fontSize: '14pt', fontWeight: 'bold', marginBottom: '2px' }}>\n\t\t\t\tThere is a GTS giveaway going on!\n\t\t\t</p>\n\t\t\t<p style={{ textAlign: 'center', fontSize: '10pt', marginTop: 0 }}>\n\t\t\t\tHosted by: {this.giver.name} | Left: <b>{this.left}</b>\n\t\t\t</p>\n\t\t\t<table style={{ margin: 'inherit auto' }}>\n\t\t\t\t<tr>\n\t\t\t\t\t{!!sentModifier && <td style={{ textAlign: 'center', width: '10%' }}>\n\t\t\t\t\t\t<b>Last winners:</b><br />\n\t\t\t\t\t\t{this.sent.join(<br />)}\n\t\t\t\t\t</td>}\n\t\t\t\t\t<td style={{ textAlign: 'center', width: '15%' }}>{this.sprite}</td>\n\t\t\t\t\t<td style={{ textAlign: 'center', width: `${40 - sentModifier}%` }}>\n\t\t\t\t\t\t<Chat.JSX.FormatText isTrusted>{this.summary}</Chat.JSX.FormatText>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td style={{ textAlign: 'center', width: `${35 - sentModifier}%` }}>{rightSide}</td>\n\t\t\t\t</tr>\n\t\t\t</table>\n\t\t</>;\n\t}\n\n\tupdateLeft(num: number) {\n\t\tthis.left = num;\n\t\tif (this.left < 1) return this.end();\n\n\t\tthis.changeUhtml(this.generateWindow());\n\t}\n\n\tupdateSent(ign: string) {\n\t\tthis.left--;\n\t\tif (this.left < 1) return this.end();\n\n\t\tthis.sent.push(ign);\n\t\tif (this.sent.length > 5) this.sent.shift();\n\n\t\tthis.changeUhtml(this.generateWindow());\n\t}\n\n\tstopDeposits() {\n\t\tthis.noDeposits = true;\n\n\t\tthis.room.send(Chat.html`|html|${<p style={{ textAlign: 'center', fontSize: '11pt' }}>\n\t\t\tMore Pok&eacute;mon have been deposited than there are prizes in this giveaway and new deposits will not be accepted. {}\n\t\t\tIf you have already deposited a Pok&eacute;mon, please be patient, and do not withdraw your Pok&eacute;mon.\n\t\t</p>}`);\n\t\tthis.changeUhtml(this.generateWindow());\n\t}\n\n\tend(force = false) {\n\t\tif (force) {\n\t\t\tthis.clearTimer();\n\t\t\tthis.changeUhtml(\n\t\t\t\t<p style={{ textAlign: 'center', fontSize: '13pt', fontWeight: 'bold' }}>The GTS giveaway was forcibly ended.</p>\n\t\t\t);\n\t\t\tthis.room.send(\"The GTS giveaway was forcibly ended.\");\n\t\t} else {\n\t\t\tthis.clearTimer();\n\t\t\tthis.changeUhtml(\n\t\t\t\t<p style={{ textAlign: 'center', fontSize: '13pt', fontWeight: 'bold' }}>The GTS giveaway has finished.</p>\n\t\t\t);\n\t\t\tthis.room.modlog({\n\t\t\t\taction: 'GTS FINISHED',\n\t\t\t\tuserid: this.giver.id,\n\t\t\t\tnote: `their GTS giveaway for \"${this.summary}\"`,\n\t\t\t});\n\t\t\tthis.send(<p style={{ textAlign: 'center', fontSize: '11pt' }}>\n\t\t\t\tThe GTS giveaway for a \"<strong>{this.lookfor}</strong>\" has finished.\n\t\t\t</p>);\n\t\t\tGiveaway.updateStats(new Set([this.pokemonID]));\n\t\t}\n\t\tthis.room.subGame = null;\n\t\treturn this.left;\n\t}\n\n\t// This currently doesn't match some of the edge cases the other pokemon matching function does account for\n\t// (such as Type: Null). However, this should never be used as a fodder mon anyway,\n\t// so I don't see a huge need to implement it.\n\tstatic linkify(text: string) {\n\t\tconst parsed = toID(text);\n\n\t\tfor (const species of Dex.species.all()) {\n\t\t\tconst id = species.id;\n\t\t\tconst regexp = new RegExp(`\\\\b${id}\\\\b`, 'ig');\n\t\t\tconst res = regexp.exec(parsed);\n\t\t\tif (res) {\n\t\t\t\tconst num = String(species.num).padStart(3, '0');\n\t\t\t\treturn <>\n\t\t\t\t\t{text.slice(0, res.index)}\n\t\t\t\t\t<a href={`http://www.serebii.net/pokedex-sm/location/${num}.shtml`}>\n\t\t\t\t\t\t{text.slice(res.index, res.index + res[0].length)}\n\t\t\t\t\t</a>\n\t\t\t\t\t{text.slice(res.index + res[0].length)}\n\t\t\t\t</>;\n\t\t\t}\n\t\t}\n\t\treturn text;\n\t}\n}\n\nfunction hasSubmittedGiveaway(user: User) {\n\tfor (const [key, giveaways] of Object.entries(wifiData.submittedGiveaways)) {\n\t\tfor (const [index, giveaway] of giveaways.entries()) {\n\t\t\tif (user.id === giveaway.targetUserID) {\n\t\t\t\treturn { index, type: key as 'question' | 'lottery' };\n\t\t\t}\n\t\t}\n\t}\n\treturn null;\n}\n\nexport const handlers: Chat.Handlers = {\n\tonDisconnect(user) {\n\t\tconst giveaway = hasSubmittedGiveaway(user);\n\t\tif (giveaway) {\n\t\t\twifiData.submittedGiveaways[giveaway.type].splice(giveaway.index, 1);\n\t\t\tsaveData();\n\t\t}\n\t},\n\tonPunishUser(type, user, room) {\n\t\tconst game = room?.getGame(LotteryGiveaway) || room?.getGame(QuestionGiveaway);\n\t\tif (game) {\n\t\t\tgame.kickUser(user);\n\t\t}\n\t},\n};\n\nexport const commands: Chat.ChatCommands = {\n\tgts: {\n\t\tnew: 'start',\n\t\tcreate: 'start',\n\t\tstart(target, room, user) {\n\t\t\troom = this.room = Rooms.search('wifi') || null;\n\t\t\tif (!room) {\n\t\t\t\tthrow new Chat.ErrorMessage(`This command must be used in the Wi-Fi room.`);\n\t\t\t}\n\t\t\tif (room.getGame(GTS, true)) {\n\t\t\t\tthrow new Chat.ErrorMessage(`There is already a GTS Giveaway going on.`);\n\t\t\t}\n\t\t\t// GTS is currently deprecated until it's no longer behind a paywall\n\t\t\treturn this.parse(`/help gts`);\n\t\t\t/*\n\t\t\tconst [giver, amountStr, summary, deposit, lookfor] = target.split(target.includes('|') ? '|' : ',').map(\n\t\t\t\tparam => param.trim()\n\t\t\t);\n\t\t\tif (!(giver && amountStr && summary && deposit && lookfor)) {\n\t\t\t\tthrow new Chat.ErrorMessage(\"Invalid arguments specified - /gts start giver | amount | summary | deposit | lookfor\");\n\t\t\t}\n\t\t\tconst amount = parseInt(amountStr);\n\t\t\tif (!amount || amount < 20 || amount > 100) {\n\t\t\t\tthrow new Chat.ErrorMessage(\"Please enter a valid amount. For a GTS giveaway, you need to give away at least 20 mons, and no more than 100.\");\n\t\t\t}\n\t\t\tconst targetUser = Users.get(giver);\n\t\t\tif (!targetUser?.connected) throw new Chat.ErrorMessage(`User '${giver}' is not online.`);\n\t\t\tthis.checkCan('warn', null, room);\n\t\t\tif (!targetUser.autoconfirmed) {\n\t\t\t\tthrow new Chat.ErrorMessage(`User '${targetUser.name}' needs to be autoconfirmed to host a giveaway.`);\n\t\t\t}\n\t\t\tif (Giveaway.checkBanned(room, targetUser)) {\n\t\t\t\tthrow new Chat.ErrorMessage(`User '${targetUser.name}' is giveaway banned.`);\n\t\t\t}\n\n\t\t\troom.subGame = new GTS(room, targetUser, amount, summary, deposit, lookfor);\n\n\t\t\tthis.privateModAction(`${user.name} started a GTS giveaway for ${targetUser.name} with ${amount} Pok\u00E9mon`);\n\t\t\tthis.modlog('GTS GIVEAWAY', null, `for ${targetUser.getLastId()} with ${amount} Pok\u00E9mon`);\n\t\t\t*/\n\t\t},\n\t\tleft(target, room, user) {\n\t\t\troom = this.requireRoom('wifi' as RoomID);\n\t\t\tconst game = this.requireGame(GTS, true);\n\t\t\tif (!user.can('warn', null, room) && user !== game.giver) {\n\t\t\t\tthrow new Chat.ErrorMessage(\"Only the host or a staff member can update GTS giveaways.\");\n\t\t\t}\n\t\t\tif (!target) {\n\t\t\t\tthis.runBroadcast();\n\t\t\t\tlet output = `The GTS giveaway from ${game.giver} has ${game.left} Pok\u00E9mon remaining!`;\n\t\t\t\tif (game.sent.length) output += `Last winners: ${game.sent.join(', ')}`;\n\t\t\t\treturn this.sendReply(output);\n\t\t\t}\n\t\t\tconst newamount = parseInt(target);\n\t\t\tif (isNaN(newamount)) throw new Chat.ErrorMessage(\"Please enter a valid amount.\");\n\t\t\tif (newamount > game.left) throw new Chat.ErrorMessage(\"The new amount must be lower than the old amount.\");\n\t\t\tif (newamount < game.left - 1) {\n\t\t\t\tthis.modlog(`GTS GIVEAWAY`, null, `set from ${game.left} to ${newamount} left`);\n\t\t\t}\n\n\t\t\tgame.updateLeft(newamount);\n\t\t},\n\t\tsent(target, room, user) {\n\t\t\troom = this.requireRoom('wifi' as RoomID);\n\t\t\tconst game = this.requireGame(GTS, true);\n\t\t\tif (!user.can('warn', null, room) && user !== game.giver) {\n\t\t\t\tthrow new Chat.ErrorMessage(\"Only the host or a staff member can update GTS giveaways.\");\n\t\t\t}\n\n\t\t\tif (!target || target.length > 12) throw new Chat.ErrorMessage(\"Please enter a valid IGN.\");\n\n\t\t\tgame.updateSent(target);\n\t\t},\n\t\tfull(target, room, user) {\n\t\t\troom = this.requireRoom('wifi' as RoomID);\n\t\t\tconst game = this.requireGame(GTS, true);\n\t\t\tif (!user.can('warn', null, room) && user !== game.giver) {\n\t\t\t\tthrow new Chat.ErrorMessage(\"Only the host or a staff member can update GTS giveaways.\");\n\t\t\t}\n\t\t\tif (game.noDeposits) throw new Chat.ErrorMessage(\"The GTS giveaway was already set to not accept deposits.\");\n\n\t\t\tgame.stopDeposits();\n\t\t},\n\t\tend(target, room, user) {\n\t\t\troom = this.requireRoom('wifi' as RoomID);\n\t\t\tconst game = this.requireGame(GTS, true);\n\t\t\tthis.checkCan('warn', null, room);\n\n\t\t\tif (target && target.length > 300) {\n\t\t\t\tthrow new Chat.ErrorMessage(\"The reason is too long. It cannot exceed 300 characters.\");\n\t\t\t}\n\t\t\tconst amount = game.end(true);\n\t\t\tif (target) target = `: ${target}`;\n\t\t\tthis.modlog('GTS END', null, `with ${amount} left${target}`);\n\t\t\tthis.privateModAction(`The giveaway was forcibly ended by ${user.name} with ${amount} left${target}`);\n\t\t},\n\t},\n\tgtshelp: [\n\t\t`GTS giveaways are currently disabled. If you are a Room Owner and would like them to be re-enabled, contact dhelmise.`,\n\t],\n\tga: 'giveaway',\n\tgiveaway: {\n\t\thelp: '',\n\t\t''() {\n\t\t\tthis.runBroadcast();\n\t\t\tthis.run('giveawayhelp');\n\t\t},\n\t\tview: {\n\t\t\t''(target, room, user) {\n\t\t\t\tthis.room = room = Rooms.search('wifi') || null;\n\t\t\t\tif (!room) throw new Chat.ErrorMessage(`The Wi-Fi room doesn't exist on this server.`);\n\t\t\t\tthis.checkCan('warn', null, room);\n\t\t\t\tthis.parse(`/j view-giveaways-default`);\n\t\t\t},\n\t\t\tstored(target, room, user) {\n\t\t\t\tthis.room = room = Rooms.search('wifi') || null;\n\t\t\t\tif (!room) throw new Chat.ErrorMessage(`The Wi-Fi room doesn't exist on this server.`);\n\t\t\t\tthis.checkCan('warn', null, room);\n\t\t\t\tthis.parse(`/j view-giveaways-stored`);\n\t\t\t},\n\t\t\tsubmitted(target, room, user) {\n\t\t\t\tthis.room = room = Rooms.search('wifi') || null;\n\t\t\t\tif (!room) throw new Chat.ErrorMessage(`The Wi-Fi room doesn't exist on this server.`);\n\t\t\t\tthis.checkCan('warn', null, room);\n\t\t\t\tthis.parse(`/j view-giveaways-submitted`);\n\t\t\t},\n\t\t},\n\t\trm: 'remind',\n\t\tremind(target, room, user) {\n\t\t\troom = this.requireRoom('wifi' as RoomID);\n\t\t\tthis.runBroadcast();\n\t\t\tif (room.getGame(QuestionGiveaway)) {\n\t\t\t\tconst game = room.getGame(QuestionGiveaway)!;\n\t\t\t\tif (game.phase !== 'started') {\n\t\t\t\t\tthrow new Chat.ErrorMessage(`The giveaway has not started yet.`);\n\t\t\t\t}\n\t\t\t\tgame.send(game.generateQuestion());\n\t\t\t} else if (room.getGame(LotteryGiveaway)) {\n\t\t\t\troom.getGame(LotteryGiveaway)!.display();\n\t\t\t} else {\n\t\t\t\tthrow new Chat.ErrorMessage(`There is no giveaway going on right now.`);\n\t\t\t}\n\t\t},\n\t\tleavelotto: 'join',\n\t\tleavelottery: 'join',\n\t\tleave: 'join',\n\t\tjoinlotto: 'join',\n\t\tjoinlottery: 'join',\n\t\tjoin(target, room, user, conn, cmd) {\n\t\t\troom = this.requireRoom('wifi' as RoomID);\n\t\t\tthis.checkChat();\n\t\t\tif (user.semilocked) return;\n\t\t\tconst giveaway = this.requireGame(LotteryGiveaway);\n\t\t\tif (cmd.includes('join')) {\n\t\t\t\tgiveaway.addUser(user);\n\t\t\t} else {\n\t\t\t\tgiveaway.removeUser(user);\n\t\t\t}\n\t\t},\n\t\tmonthban: 'ban',\n\t\tpermaban: 'ban',\n\t\tban(target, room, user, connection, cmd) {\n\t\t\tif (!target) return false;\n\t\t\troom = this.requireRoom('wifi' as RoomID);\n\t\t\tthis.checkCan('warn', null, room);\n\n\t\t\tconst { targetUser, rest: reason } = this.requireUser(target, { allowOffline: true });\n\t\t\tif (reason.length > 300) {\n\t\t\t\tthrow new Chat.ErrorMessage(\"The reason is too long. It cannot exceed 300 characters.\");\n\t\t\t}\n\t\t\tif (Punishments.hasRoomPunishType(room, targetUser.name, 'GIVEAWAYBAN')) {\n\t\t\t\tthrow new Chat.ErrorMessage(`User '${targetUser.name}' is already giveawaybanned.`);\n\t\t\t}\n\n\t\t\tconst duration = cmd === 'monthban' ? 30 * DAY : cmd === 'permaban' ? 3650 * DAY : 7 * DAY;\n\t\t\tGiveaway.ban(room, targetUser, reason, duration);\n\n\t\t\t(room.getGame(LotteryGiveaway) || room.getGame(QuestionGiveaway))?.kickUser(targetUser);\n\n\t\t\tconst action = cmd === 'monthban' ? 'MONTHGIVEAWAYBAN' : cmd === 'permaban' ? 'PERMAGIVEAWAYBAN' : 'GIVEAWAYBAN';\n\t\t\tthis.modlog(action, targetUser, reason);\n\t\t\tconst reasonMessage = reason ? ` (${reason})` : ``;\n\t\t\tconst durationMsg = cmd === 'monthban' ? ' for a month' : cmd === 'permaban' ? ' permanently' : '';\n\t\t\tthis.privateModAction(`${targetUser.name} was banned from entering giveaways${durationMsg} by ${user.name}.${reasonMessage}`);\n\t\t},\n\t\tunban(target, room, user) {\n\t\t\tif (!target) return false;\n\t\t\troom = this.requireRoom('wifi' as RoomID);\n\t\t\tthis.checkCan('warn', null, room);\n\n\t\t\tconst { targetUser } = this.requireUser(target, { allowOffline: true });\n\t\t\tif (!Giveaway.checkBanned(room, targetUser)) {\n\t\t\t\tthrow new Chat.ErrorMessage(`User '${targetUser.name}' isn't banned from entering giveaways.`);\n\t\t\t}\n\n\t\t\tGiveaway.unban(room, targetUser);\n\t\t\tthis.privateModAction(`${targetUser.name} was unbanned from entering giveaways by ${user.name}.`);\n\t\t\tthis.modlog('GIVEAWAYUNBAN', targetUser, null, { noip: 1, noalts: 1 });\n\t\t},\n\t\tnew: 'create',\n\t\tstart: 'create',\n\t\tcreate: {\n\t\t\t''(target, room, user) {\n\t\t\t\troom = this.requireRoom('wifi' as RoomID);\n\t\t\t\tif (!user.can('show', null, room)) this.checkCan('warn', null, room);\n\t\t\t\tthis.parse('/j view-giveaways-create');\n\t\t\t},\n\t\t\tquestion(target, room, user) {\n\t\t\t\troom = this.room = Rooms.search('wifi') || null;\n\t\t\t\tif (!room) {\n\t\t\t\t\tthrow new Chat.ErrorMessage(`This command must be used in the Wi-Fi room.`);\n\t\t\t\t}\n\t\t\t\tif (room.game) {\n\t\t\t\t\tthrow new Chat.ErrorMessage(`There is already a room game (${room.game.constructor.name}) going on.`);\n\t\t\t\t}\n\t\t\t\t// Syntax: giver|ot|tid|game|question|answer1,answer2,etc|ivs/format/like/this|pokeball|packed set\n\t\t\t\tconst {\n\t\t\t\t\ttargetUser, ot, tid, game, question, answers, ivs, ball, extraInfo, prize,\n\t\t\t\t} = QuestionGiveaway.splitTarget(target, '|', this, user, 'create');\n\t\t\t\tconst set = Teams.import(prize)?.[0];\n\t\t\t\tif (!set) throw new Chat.ErrorMessage(`Please submit the prize in the form of a PS set importable.`);\n\n\t\t\t\troom.game = new QuestionGiveaway(user, targetUser, room, ot, tid, game, ivs, set, question, answers, ball, extraInfo);\n\n\t\t\t\tthis.privateModAction(`${user.name} started a question giveaway for ${targetUser.name}.`);\n\t\t\t\tthis.modlog('QUESTION GIVEAWAY', null, `for ${targetUser.getLastId()} (OT: ${ot} TID: ${tid} Nature: ${(room.game as LotteryGiveaway).prize.nature} Ball: ${ball}${extraInfo ? ` Other box info: ${extraInfo}` : ''})`);\n\t\t\t},\n\t\t\tlottery(target, room, user) {\n\t\t\t\troom = this.room = Rooms.search('wifi') || null;\n\t\t\t\tif (!room) {\n\t\t\t\t\tthrow new Chat.ErrorMessage(`This command must be used in the Wi-Fi room.`);\n\t\t\t\t}\n\t\t\t\tif (room.game) throw new Chat.ErrorMessage(`There is already a room game (${room.game.constructor.name}) going on.`);\n\t\t\t\t// Syntax: giver|ot|tid|game|# of winners|ivs/like/this|pokeball|info|packed set\n\t\t\t\tconst {\n\t\t\t\t\ttargetUser, ot, tid, game, winners, ivs, ball, prize, extraInfo,\n\t\t\t\t} = LotteryGiveaway.splitTarget(target, '|', this, user, 'create');\n\t\t\t\tconst set = Teams.import(prize)?.[0];\n\t\t\t\tif (!set) throw new Chat.ErrorMessage(`Please submit the prize in the form of a PS set importable.`);\n\n\t\t\t\troom.game = new LotteryGiveaway(user, targetUser, room, ot, tid, ivs, game, set, winners, ball, extraInfo);\n\n\t\t\t\tthis.privateModAction(`${user.name} started a lottery giveaway for ${targetUser.name}.`);\n\t\t\t\tthis.modlog('LOTTERY GIVEAWAY', null, `for ${targetUser.getLastId()} (OT: ${ot} TID: ${tid} Nature: ${(room.game as LotteryGiveaway).prize.nature} Ball: ${ball}${extraInfo ? ` Other box info: ${extraInfo}` : ''})`);\n\t\t\t},\n\t\t},\n\t\tstop: 'end',\n\t\tend(target, room, user) {\n\t\t\troom = this.requireRoom('wifi' as RoomID);\n\t\t\tif (!room.game?.constructor.name.includes('Giveaway')) {\n\t\t\t\tthrow new Chat.ErrorMessage(`There is no giveaway going on at the moment.`);\n\t\t\t}\n\t\t\tconst game = room.game as LotteryGiveaway | QuestionGiveaway;\n\t\t\tif (user.id !== game.host.id) this.checkCan('warn', null, room);\n\n\t\t\tif (target && target.length > 300) {\n\t\t\t\tthrow new Chat.ErrorMessage(\"The reason is too long. It cannot exceed 300 characters.\");\n\t\t\t}\n\t\t\tgame.end(true);\n\t\t\tthis.modlog('GIVEAWAY END', null, target);\n\t\t\tif (target) target = `: ${target}`;\n\t\t\tthis.privateModAction(`The giveaway was forcibly ended by ${user.name}${target}`);\n\t\t},\n\t\tguess(target, room, user) {\n\t\t\tthis.parse(`/guess ${target}`);\n\t\t},\n\t\tchangeanswer: 'changequestion',\n\t\tchangequestion(target, room, user, connection, cmd) {\n\t\t\troom = this.requireRoom('wifi' as RoomID);\n\t\t\tconst giveaway = this.requireGame(QuestionGiveaway);\n\t\t\ttarget = target.trim();\n\t\t\tif (!target) throw new Chat.ErrorMessage(\"You must include a question or an answer.\");\n\t\t\tgiveaway.change(target, user, cmd.includes('answer'));\n\t\t},\n\t\tshowanswer: 'viewanswer',\n\t\tviewanswer(target, room, user) {\n\t\t\troom = this.requireRoom('wifi' as RoomID);\n\t\t\tconst giveaway = this.requireGame(QuestionGiveaway);\n\t\t\tif (user.id !== giveaway.host.id && user.id !== giveaway.giver.id) return;\n\n\t\t\tthis.sendReply(`The giveaway question is ${giveaway.question}.\\nThe answer${Chat.plural(giveaway.answers, 's are', ' is')} ${giveaway.answers.join(', ')}.`);\n\t\t},\n\t\tsave: 'store',\n\t\tstore: {\n\t\t\t''(target, room, user) {\n\t\t\t\troom = this.requireRoom('wifi' as RoomID);\n\t\t\t\tthis.checkCan('warn', null, room);\n\t\t\t\tthis.parse('/j view-giveaways-stored-add');\n\t\t\t},\n\t\t\tquestion(target, room, user) {\n\t\t\t\troom = this.room = Rooms.search('wifi') || null;\n\t\t\t\tif (!room) {\n\t\t\t\t\tthrow new Chat.ErrorMessage(`This command must be used in the Wi-Fi room.`);\n\t\t\t\t}\n\t\t\t\tconst {\n\t\t\t\t\ttargetUser, ot, tid, game, prize, question, answers, ball, extraInfo, ivs,\n\t\t\t\t} = QuestionGiveaway.splitTarget(target, '|', this, user, 'store');\n\t\t\t\tconst set = Teams.import(prize)?.[0];\n\t\t\t\tif (!set) throw new Chat.ErrorMessage(`Please submit the prize in the form of a PS set importable.`);\n\n\t\t\t\tif (!wifiData.storedGiveaways.question) wifiData.storedGiveaways.question = [];\n\t\t\t\tconst data = { targetUserID: targetUser.id, ot, tid, game, prize: set, question, answers, ivs, ball, extraInfo };\n\t\t\t\twifiData.storedGiveaways.question.push(data);\n\t\t\t\tsaveData();\n\n\t\t\t\tthis.privateModAction(`${user.name} saved a question giveaway for ${targetUser.name}.`);\n\t\t\t\tthis.modlog('QUESTION GIVEAWAY SAVE');\n\t\t\t},\n\t\t\tlottery(target, room, user) {\n\t\t\t\troom = this.room = Rooms.search('wifi') || null;\n\t\t\t\tif (!room) {\n\t\t\t\t\tthrow new Chat.ErrorMessage(`This command must be used in the Wi-Fi room.`);\n\t\t\t\t}\n\t\t\t\tconst {\n\t\t\t\t\ttargetUser, ot, tid, game, prize, winners, ball, extraInfo, ivs,\n\t\t\t\t} = LotteryGiveaway.splitTarget(target, '|', this, user, 'store');\n\t\t\t\tconst set = Teams.import(prize)?.[0];\n\t\t\t\tif (!set) throw new Chat.ErrorMessage(`Please submit the prize in the form of a PS set importable.`);\n\n\t\t\t\tif (!wifiData.storedGiveaways.lottery) wifiData.storedGiveaways.lottery = [];\n\t\t\t\tconst data = { targetUserID: targetUser.id, ot, tid, game, prize: set, winners, ball, extraInfo, ivs };\n\t\t\t\twifiData.storedGiveaways.lottery.push(data);\n\t\t\t\tsaveData();\n\n\t\t\t\tthis.privateModAction(`${user.name} saved a lottery giveaway for ${targetUser.name}.`);\n\t\t\t\tthis.modlog('LOTTERY GIVEAWAY SAVE');\n\t\t\t},\n\t\t},\n\t\tsubmit: {\n\t\t\t''(target, room, user) {\n\t\t\t\troom = this.requireRoom('wifi' as RoomID);\n\t\t\t\tthis.checkChat();\n\t\t\t\tthis.parse('/j view-giveaways-submitted-add');\n\t\t\t},\n\t\t\tquestion(target, room, user) {\n\t\t\t\troom = this.room = Rooms.search('wifi') || null;\n\t\t\t\tif (!room) {\n\t\t\t\t\tthrow new Chat.ErrorMessage(`This command must be used in the Wi-Fi room.`);\n\t\t\t\t}\n\t\t\t\tconst {\n\t\t\t\t\ttargetUser, ot, tid, game, prize, question, answers, ball, extraInfo, ivs,\n\t\t\t\t} = QuestionGiveaway.splitTarget(target, '|', this, user, 'submit');\n\t\t\t\tconst set = Teams.import(prize)?.[0];\n\t\t\t\tif (!set) throw new Chat.ErrorMessage(`Please submit the prize in the form of a PS set importable.`);\n\n\t\t\t\tif (!wifiData.submittedGiveaways.question) wifiData.submittedGiveaways.question = [];\n\t\t\t\tconst data = { targetUserID: targetUser.id, ot, tid, game, prize: set, question, answers, ball, extraInfo, ivs };\n\t\t\t\twifiData.submittedGiveaways.question.push(data);\n\t\t\t\tsaveData();\n\n\t\t\t\tthis.sendReply(`You have submitted a question giveaway for ${set.species}. If you log out or go offline, the giveaway won't go through.`);\n\t\t\t\tconst message = `|tempnotify|pendingapprovals|Pending question giveaway request!` +\n\t\t\t\t\t`|${user.name} has requested to start a question giveaway for ${set.species}.|new question giveaway request`;\n\t\t\t\troom.sendRankedUsers(message, '%');\n\t\t\t\troom.sendMods(\n\t\t\t\t\tChat.html`|uhtml|giveaway-request-${user.id}|${<div class=\"infobox\">\n\t\t\t\t\t\t{user.name} wants to start a question giveaway for {set.species}<br />\n\t\t\t\t\t\t<button class=\"button\" name=\"send\" value=\"/j view-giveaways-submitted\">View pending giveaways</button>\n\t\t\t\t\t</div>}`\n\t\t\t\t);\n\t\t\t},\n\t\t\tlottery(target, room, user) {\n\t\t\t\troom = this.room = Rooms.search('wifi') || null;\n\t\t\t\tif (!room) {\n\t\t\t\t\tthrow new Chat.ErrorMessage(`This command must be used in the Wi-Fi room.`);\n\t\t\t\t}\n\t\t\t\tconst {\n\t\t\t\t\ttargetUser, ot, tid, game, prize, winners, ball, extraInfo, ivs,\n\t\t\t\t} = LotteryGiveaway.splitTarget(target, '|', this, user, 'submit');\n\t\t\t\tconst set = Teams.import(prize)?.[0];\n\t\t\t\tif (!set) throw new Chat.ErrorMessage(`Please submit the prize in the form of a PS set importable.`);\n\n\t\t\t\tif (!wifiData.submittedGiveaways.lottery) wifiData.submittedGiveaways.lottery = [];\n\t\t\t\tconst data = { targetUserID: targetUser.id, ot, tid, game, prize: set, winners, ball, extraInfo, ivs };\n\t\t\t\twifiData.submittedGiveaways.lottery.push(data);\n\t\t\t\tsaveData();\n\n\t\t\t\tthis.sendReply(`You have submitted a lottery giveaway for ${set.species}. If you log out or go offline, the giveaway won't go through.`);\n\t\t\t\tconst message = `|tempnotify|pendingapprovals|Pending lottery giveaway request!` +\n\t\t\t\t\t`|${user.name} has requested to start a lottery giveaway for ${set.species}.|new lottery giveaway request`;\n\t\t\t\troom.sendRankedUsers(message, '%');\n\t\t\t\troom.sendMods(Chat.html`|uhtml|giveaway-request-${user.id}|${<div class=\"infobox\">\n\t\t\t\t\t{user.name} wants to start a lottery giveaway for {set.species}<br />\n\t\t\t\t\t<button class=\"button\" name=\"send\" value=\"/j view-giveaways-submitted\">View pending giveaways</button>\n\t\t\t\t</div>}`);\n\t\t\t},\n\t\t},\n\t\tapprove(target, room, user) {\n\t\t\troom = this.room = Rooms.search('wifi') || null;\n\t\t\tif (!room) {\n\t\t\t\tthrow new Chat.ErrorMessage(`This command must be used in the Wi-Fi room.`);\n\t\t\t}\n\t\t\tconst targetUser = Users.get(target);\n\t\t\tif (!targetUser?.connected) {\n\t\t\t\tthis.refreshPage('giveaways-submitted');\n\t\t\t\tthrow new Chat.ErrorMessage(`${targetUser?.name || toID(target)} is offline, so their giveaway can't be run.`);\n\t\t\t}\n\t\t\tconst hasGiveaway = hasSubmittedGiveaway(targetUser);\n\t\t\tif (!hasGiveaway) {\n\t\t\t\tthis.refreshPage('giveaways-submitted');\n\t\t\t\tthrow new Chat.ErrorMessage(`${targetUser?.name || toID(target)} doesn't have any submitted giveaways.`);\n\t\t\t}\n\t\t\tconst giveaway = wifiData.submittedGiveaways[hasGiveaway.type][hasGiveaway.index];\n\t\t\tif (hasGiveaway.type === 'question') {\n\t\t\t\tconst data = giveaway as QuestionGiveawayData;\n\t\t\t\tthis.parse(`/giveaway create question ${data.targetUserID}|${data.ot}|${data.tid}|${data.game}|${data.question}|${data.answers.join(',')}|${data.ivs.join('/')}|${data.ball}|${data.extraInfo}|${Teams.pack([data.prize])}`);\n\t\t\t} else {\n\t\t\t\tconst data = giveaway as LotteryGiveawayData;\n\t\t\t\tthis.parse(`/giveaway create lottery ${data.targetUserID}|${data.ot}|${data.tid}|${data.game}|${data.winners}|${data.ivs.join('/')}|${data.ball}|${data.extraInfo}|${Teams.pack([data.prize])}`);\n\t\t\t}\n\t\t\twifiData.submittedGiveaways[hasGiveaway.type].splice(hasGiveaway.index, 1);\n\t\t\tsaveData();\n\t\t\tthis.refreshPage(`giveaways-submitted`);\n\t\t\ttargetUser.send(`${user.name} has approved your ${hasGiveaway.type} giveaway!`);\n\t\t\tthis.privateModAction(`${user.name} approved a ${hasGiveaway.type} giveaway by ${targetUser.name}.`);\n\t\t\tthis.modlog(`GIVEAWAY APPROVE ${hasGiveaway.type.toUpperCase()}`, targetUser, null, { noalts: true, noip: true });\n\t\t},\n\t\tdeny: 'delete',\n\t\tdelete(target, room, user, connection, cmd) {\n\t\t\troom = this.room = Rooms.search('wifi') || null;\n\t\t\tif (!room) {\n\t\t\t\tthrow new Chat.ErrorMessage(`This command must be used in the Wi-Fi room.`);\n\t\t\t}\n\t\t\tif (!target) return this.parse('/help giveaway');\n\t\t\tconst del = cmd === 'delete';\n\t\t\tif (del) {\n\t\t\t\tconst [type, indexStr] = target.split(',');\n\t\t\t\tconst index = parseInt(indexStr) - 1;\n\t\t\t\tif (!type || !indexStr || index <= -1 || !['question', 'lottery'].includes(toID(type)) || isNaN(index)) {\n\t\t\t\t\treturn this.parse(`/help giveaway`);\n\t\t\t\t}\n\t\t\t\tconst typedType = toID(type) as 'question' | 'lottery';\n\t\t\t\tconst giveaway = wifiData.storedGiveaways[typedType][index];\n\t\t\t\tif (!giveaway) {\n\t\t\t\t\tthrow new Chat.ErrorMessage(\n\t\t\t\t\t\t`There is no giveaway at index ${index}. Indices must be integers between 0 and ${wifiData.storedGiveaways[typedType].length - 1}.`\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t\twifiData.storedGiveaways[typedType].splice(index, 1);\n\t\t\t\tsaveData();\n\t\t\t\tthis.privateModAction(`${user.name} deleted a ${typedType} giveaway by ${giveaway.targetUserID}.`);\n\t\t\t\tthis.modlog(`GIVEAWAY DELETE ${typedType.toUpperCase()}`);\n\t\t\t} else {\n\t\t\t\tconst { targetUser, rest: reason } = this.splitUser(target);\n\t\t\t\tif (!targetUser?.connected) {\n\t\t\t\t\tthrow new Chat.ErrorMessage(`${targetUser?.name || toID(target)} is offline, so their giveaway can't be run.`);\n\t\t\t\t}\n\t\t\t\tconst hasGiveaway = hasSubmittedGiveaway(targetUser);\n\t\t\t\tif (!hasGiveaway) {\n\t\t\t\t\tthis.refreshPage('giveaways-submitted');\n\t\t\t\t\tthrow new Chat.ErrorMessage(`${targetUser?.name || toID(target)} doesn't have any submitted giveaways.`);\n\t\t\t\t}\n\t\t\t\twifiData.submittedGiveaways[hasGiveaway.type].splice(hasGiveaway.index, 1);\n\t\t\t\tsaveData();\n\t\t\t\ttargetUser?.send(`Staff have rejected your giveaway${reason ? `: ${reason}` : '.'}`);\n\t\t\t\tthis.privateModAction(`${user.name} denied a ${hasGiveaway.type} giveaway by ${targetUser.name}.`);\n\t\t\t\tthis.modlog(`GIVEAWAY DENY ${hasGiveaway.type.toUpperCase()}`, targetUser, reason || null, { noalts: true, noip: true });\n\t\t\t}\n\t\t\tthis.refreshPage(del ? `giveaways-stored` : 'giveaways-submitted');\n\t\t},\n\t\tunwhitelist: 'whitelist',\n\t\twhitelist(target, room, user, connection, cmd) {\n\t\t\troom = this.requireRoom('wifi' as RoomID);\n\t\t\tthis.checkCan('warn', null, room);\n\t\t\tconst targetId = toID(target);\n\t\t\tif (!targetId) return this.parse(`/help giveaway whitelist`);\n\t\t\tif (cmd.includes('un')) {\n\t\t\t\tconst idx = wifiData.whitelist.indexOf(targetId);\n\t\t\t\tif (idx < 0) {\n\t\t\t\t\tthrow new Chat.ErrorMessage(`'${targetId}' is not whitelisted.`);\n\t\t\t\t}\n\t\t\t\twifiData.whitelist.splice(idx, 1);\n\t\t\t\tthis.privateModAction(`${user.name} removed '${targetId}' from the giveaway whitelist.`);\n\t\t\t\tthis.modlog(`GIVEAWAY UNWHITELIST`, targetId);\n\t\t\t\tsaveData();\n\t\t\t} else {\n\t\t\t\tif (wifiData.whitelist.includes(targetId)) {\n\t\t\t\t\tthrow new Chat.ErrorMessage(`'${targetId}' is already whitelisted.`);\n\t\t\t\t}\n\t\t\t\twifiData.whitelist.push(targetId);\n\t\t\t\tthis.privateModAction(`${user.name} added ${targetId} to the giveaway whitelist.`);\n\t\t\t\tthis.modlog(`GIVEAWAY WHITELIST`, targetId);\n\t\t\t\tsaveData();\n\t\t\t}\n\t\t},\n\t\twhitelisthelp: [\n\t\t\t`/giveaway whitelist [user] - Allow the given [user] to make giveaways without staff help. Requires: % @ # ~`,\n\t\t\t`/giveaway unwhitelist [user] - Remove the given user from the giveaway whitelist. Requires: % @ # ~`,\n\t\t],\n\t\twhitelisted(target, room, user) {\n\t\t\troom = this.requireRoom('wifi' as RoomID);\n\t\t\tthis.checkCan('warn', null, room);\n\t\t\tconst buf = [<strong>Currently whitelisted users</strong>, <br />];\n\t\t\tif (!wifiData.whitelist.length) {\n\t\t\t\tbuf.push(<div class=\"message-error\">None.</div>);\n\t\t\t} else {\n\t\t\t\tbuf.push(wifiData.whitelist.map(n => <username>{n}</username>));\n\t\t\t}\n\t\t\tthis.sendReplyBox(<>{buf}</>);\n\t\t},\n\t\tclaim(target, room, user) {\n\t\t\troom = this.requireRoom('wifi' as RoomID);\n\t\t\tthis.checkCan('mute', null, room);\n\t\t\tconst { targetUser } = this.requireUser(target);\n\t\t\tconst hasGiveaway = hasSubmittedGiveaway(targetUser);\n\t\t\tif (!hasGiveaway) {\n\t\t\t\tthis.refreshPage('giveaways-submitted');\n\t\t\t\tthrow new Chat.ErrorMessage(`${targetUser?.name || toID(target)} doesn't have any submitted giveaways.`);\n\t\t\t}\n\t\t\t// we ensure it exists above\n\t\t\tconst giveaway = wifiData.submittedGiveaways[hasGiveaway.type][hasGiveaway.index];\n\t\t\tif (giveaway.claimed) throw new Chat.ErrorMessage(`That giveaway is already claimed by ${giveaway.claimed}.`);\n\t\t\tgiveaway.claimed = user.id;\n\t\t\tChat.refreshPageFor('giveaways-submitted', room);\n\t\t\tthis.privateModAction(`${user.name} claimed ${targetUser.name}'s giveaway`);\n\t\t\tsaveData();\n\t\t},\n\t\tunclaim(target, room, user) {\n\t\t\troom = this.requireRoom('wifi' as RoomID);\n\t\t\tthis.checkCan('mute', null, room);\n\t\t\tconst { targetUser } = this.requireUser(target);\n\t\t\tconst hasGiveaway = hasSubmittedGiveaway(targetUser);\n\t\t\tif (!hasGiveaway) {\n\t\t\t\tthis.refreshPage('giveaways-submitted');\n\t\t\t\tthrow new Chat.ErrorMessage(`${targetUser?.name || toID(target)} doesn't have any submitted giveaways.`);\n\t\t\t}\n\t\t\t// we ensure it exists above\n\t\t\tconst giveaway = wifiData.submittedGiveaways[hasGiveaway.type][hasGiveaway.index];\n\t\t\tif (!giveaway.claimed) throw new Chat.ErrorMessage(`That giveaway is not claimed.`);\n\t\t\tdelete giveaway.claimed;\n\t\t\tChat.refreshPageFor('giveaways-submitted', room);\n\t\t\tsaveData();\n\t\t},\n\t\tcount(target, room, user) {\n\t\t\troom = this.requireRoom('wifi' as RoomID);\n\t\t\tif (!Dex.species.get(target).exists) {\n\t\t\t\tthrow new Chat.ErrorMessage(`No Pok\\u00e9mon entered. Proper syntax: /giveaway count pokemon`);\n\t\t\t}\n\t\t\ttarget = Dex.species.get(target).id;\n\t\t\tthis.runBroadcast();\n\n\t\t\tconst count = wifiData.stats[target];\n\n\t\t\tif (!count) return this.sendReplyBox(\"This Pok\u00E9mon has never been given away.\");\n\t\t\tconst recent = count.filter(val => val + RECENT_THRESHOLD > Date.now()).length;\n\n\t\t\tthis.sendReplyBox(`This Pok\u00E9mon has been given away ${Chat.count(count, \"times\")}, a total of ${Chat.count(recent, \"times\")} in the past month.`);\n\t\t},\n\t},\n\tgiveawayhelp(target, room, user) {\n\t\troom = this.requireRoom('wifi' as RoomID);\n\t\tthis.runBroadcast();\n\t\tconst buf = [];\n\t\tif (user.can('show', null, room)) {\n\t\t\tbuf.push(<details><summary>Staff commands</summary>\n\t\t\t\t<code>/giveaway create</code> - Pulls up a page to create a giveaway. Requires: + % @ # ~<br />\n\t\t\t\t<code>\n\t\t\t\t\t/giveaway create question Giver | OT | TID | Game | Question | Answer 1, Answer 2, Answer 3 | IV/IV/IV/IV/IV/IV | Pok&eacute; Ball | Extra Info | Prize\n\t\t\t\t</code> - Start a new question giveaway (voices can only host their own). Requires: + % @ # ~<br />\n\t\t\t\t<code>\n\t\t\t\t\t/giveaway create lottery Giver | OT | TID | Game | # of Winners | IV/IV/IV/IV/IV/IV | Pok&eacute; Ball | Extra Info | Prize\n\t\t\t\t</code> - Start a new lottery giveaway (voices can only host their own). Requires: + % @ # ~<br />\n\t\t\t\t<code>\n\t\t\t\t\t/giveaway changequestion/changeanswer\n\t\t\t\t</code> - Changes the question/answer of a question giveaway. Requires: Being giveaway host<br />\n\t\t\t\t<code>/giveaway viewanswer</code> - Shows the answer of a question giveaway. Requires: Being giveaway host/giver<br />\n\t\t\t\t<code>\n\t\t\t\t\t/giveaway ban [user], [reason]\n\t\t\t\t</code> - Temporarily bans [user] from entering giveaways. Requires: % @ # ~<br />\n\t\t\t\t<code>/giveaway end</code> - Forcibly ends the current giveaway. Requires: % @ # ~<br />\n\t\t\t\t<code>/giveaway count [pokemon]</code> - Shows how frequently a certain Pok&eacute;mon has been given away.<br />\n\t\t\t\t<code>/giveaway whitelist [user]</code> - Allow the given [user] to make giveaways. Requires: % @ # ~<br />\n\t\t\t\t<code>/giveaway unwhitelist [user]</code> - Remove the given user from the giveaway whitelist. Requires: % @ # ~\n\t\t\t</details>);\n\t\t}\n\t\t// Giveaway stuff\n\t\tbuf.push(<details><summary>Giveaway participation commands</summary>\n\t\t\t<code>/guess [target]</code> - Guesses an answer for a question giveaway.<br />\n\t\t\t<code>\n\t\t\t\t/giveaway submit\n\t\t\t</code> - Allows users to submit giveaways. They must remain online after submitting for it to go through.<br />\n\t\t\t<code>/giveaway viewanswer</code> - Guesses an answer for a question giveaway. Requires: Giveaway host/giver<br />\n\t\t\t<code>/giveaway remind</code> - Shows the details of the current giveaway.<br />\n\t\t\t<code>/giveaway join/leave</code> - Joins/leaves a lottery giveaway.\n\t\t</details>);\n\t\tthis.sendReplyBox(<>{buf}</>);\n\t},\n};\n\nfunction makePageHeader(user: User, pageid?: string) {\n\tconst titles: { [k: string]: string } = {\n\t\tcreate: `Create`,\n\t\tstored: `View Stored`,\n\t\t'stored-add': 'Store',\n\t\tsubmitted: `View Submitted`,\n\t\t'submitted-add': `Submit`,\n\t};\n\tconst icons: Record<keyof typeof titles, Chat.VNode> = {\n\t\tcreate: <i class=\"fa fa-sticky-note\"></i>,\n\t\tstored: <i class=\"fa fa-paste\"></i>,\n\t\t'stored-add': <i class=\"fa fa-paste\"></i>,\n\t\tsubmitted: <i class=\"fa fa-inbox\"></i>,\n\t\t'submitted-add': <i class=\"fa fa-inbox\"></i>,\n\t};\n\tconst buf = [];\n\tbuf.push(<button\n\t\tclass=\"button\" style={{ float: 'right' }} name=\"send\"\n\t\tvalue={`/j view-giveaways${pageid?.trim() ? `-${pageid.trim()}` : ''}`}\n\t>\n\t\t<i class=\"fa fa-refresh\"></i> Refresh\n\t</button>);\n\tbuf.push(<h1>Wi-Fi Giveaways</h1>);\n\tconst urls = [];\n\tconst room = Rooms.get('wifi')!; // we validate before using that wifi exists\n\tfor (const i in titles) {\n\t\tif (urls.length) urls.push(' / ');\n\t\tif (!user.can('mute', null, room) && i !== 'submitted-add') {\n\t\t\tcontinue;\n\t\t}\n\t\tconst title = titles[i];\n\t\tconst icon = icons[i];\n\t\tif (pageid === i) {\n\t\t\turls.push(<>{icon} <strong>{title}</strong></>);\n\t\t} else {\n\t\t\turls.push(<>{icon} <a href={`/view-giveaways-${i}`} target=\"replace\">{title}</a></>);\n\t\t}\n\t}\n\tbuf.push(<>{[urls]}</>, <hr />);\n\treturn <center>{buf}</center>;\n}\n\nfunction formatFakeButton(url: string, text: Chat.VNode): Chat.VNode {\n\treturn <a class=\"button\" style={{ textDecoration: 'inherit' }} target=\"replace\" href={url}>{text}</a>;\n}\n\nfunction generatePokeballDropdown() {\n\tconst pokeballs = Dex.items.all().filter(item => item.isPokeball).sort((a, b) => a.num - b.num);\n\tconst pokeballsObj = [<option value=\"\">Please select a Pok&eacute; Ball</option>];\n\tfor (const pokeball of pokeballs) {\n\t\tpokeballsObj.push(<option value={pokeball.id}>{pokeball.name}</option>);\n\t}\n\treturn <><label for=\"ball\">Pok&eacute; Ball type: </label><select name=\"ball\">{pokeballsObj}</select></>;\n}\n\nexport const pages: Chat.PageTable = {\n\tgiveaways: {\n\t\t''() {\n\t\t\tthis.title = `[Giveaways]`;\n\t\t\tif (!Rooms.search('wifi')) return <h1>There is no Wi-Fi room on this server.</h1>;\n\t\t\tthis.checkCan('warn', null, Rooms.search('wifi')!);\n\t\t\treturn <div class=\"pad\">{makePageHeader(this.user)}</div>;\n\t\t},\n\t\tcreate(args, user) {\n\t\t\tthis.title = `[Create Giveaways]`;\n\t\t\tconst wifi = Rooms.search('wifi');\n\t\t\tif (!wifi) return <h1>There is no Wi-Fi room on this server.</h1>;\n\t\t\tif (!(user.can('show', null, wifi) || wifiData.whitelist.includes(user.id))) {\n\t\t\t\tthis.checkCan('warn', null, wifi);\n\t\t\t}\n\t\t\tconst [type] = args;\n\t\t\treturn <div class=\"pad\">{makePageHeader(this.user, 'create')}{(() => {\n\t\t\t\tif (!type || !['lottery', 'question'].includes(type)) {\n\t\t\t\t\treturn <center>\n\t\t\t\t\t\t<h2>Pick a Giveaway type</h2>\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tformatFakeButton(`/view-giveaways-create-lottery`, <><i class=\"fa fa-random\"></i> Lottery</>)\n\t\t\t\t\t\t} | {\n\t\t\t\t\t\t\tformatFakeButton(`/view-giveaways-create-question`, <><i class=\"fa fa-question\"></i> Question</>)\n\t\t\t\t\t\t}\n\t\t\t\t\t</center>;\n\t\t\t\t}\n\t\t\t\tswitch (type) {\n\t\t\t\tcase 'lottery':\n\t\t\t\t\treturn <>\n\t\t\t\t\t\t<h2>Make a Lottery Giveaway</h2>\n\t\t\t\t\t\t<form data-submitsend=\"/giveaway create lottery {giver}|{ot}|{tid}|{game}|{winners}|{ivs}|{ball}|{info}|{set}\">\n\t\t\t\t\t\t\t<label for=\"giver\">Giver: </label><input name=\"giver\" /><br /><br />\n\t\t\t\t\t\t\t<label for=\"ot\">OT: </label><input name=\"ot\" /><br /><br />\n\t\t\t\t\t\t\t<label for=\"tid\">TID: </label><input name=\"tid\" /><br /><br />\n\t\t\t\t\t\t\tGame: <div>\n\t\t\t\t\t\t\t\t<input type=\"radio\" id=\"bdsp\" name=\"game\" value=\"bdsp\" /><label for=\"bdsp\">BDSP</label>\n\t\t\t\t\t\t\t\t<input type=\"radio\" id=\"swsh\" name=\"game\" value=\"swsh\" /><label for=\"swsh\">SwSh</label>\n\t\t\t\t\t\t\t\t<input type=\"radio\" id=\"sv\" name=\"game\" value=\"sv\" checked /><label for=\"sv\">SV</label>\n\t\t\t\t\t\t\t</div><br />\n\t\t\t\t\t\t\t<label for=\"winners\">Number of winners: </label><input name=\"winners\" /><br /><br />\n\t\t\t\t\t\t\t{generatePokeballDropdown()}<br /><br />\n\t\t\t\t\t\t\t<label for=\"ivs\">IVs (Formatted like \"1/30/31/X/HT/30\"): </label><input name=\"ivs\" /><br /><br />\n\t\t\t\t\t\t\t<label for=\"set\">Prize:</label><br />\n\t\t\t\t\t\t\t<textarea style={{ width: '70%', height: '300px' }} placeholder=\"Paste set importable\" name=\"set\"></textarea>\n\t\t\t\t\t\t\t<br /><br />\n\t\t\t\t\t\t\t<label for=\"info\">Additional information (if any):</label><br />\n\t\t\t\t\t\t\t<textarea style={{ width: '50%', height: '100px' }} placeholder=\"Add any additional info\" name=\"info\"></textarea>\n\t\t\t\t\t\t\t<br /><br />\n\t\t\t\t\t\t\t<button class=\"button\" type=\"submit\">Create Lottery Giveaway</button>\n\t\t\t\t\t\t</form>\n\t\t\t\t\t</>;\n\t\t\t\tcase 'question':\n\t\t\t\t\treturn <>\n\t\t\t\t\t\t<h2>Make a Question Giveaway</h2>\n\t\t\t\t\t\t<form\n\t\t\t\t\t\t\tdata-submitsend=\"/giveaway create question {giver}|{ot}|{tid}|{game}|{question}|{answers}|{ivs}|{ball}|{info}|{set}\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<label for=\"giver\">Giver:</label><input name=\"giver\" /><br /><br />\n\t\t\t\t\t\t\t<label for=\"ot\">OT:</label><input name=\"ot\" /><br /><br />\n\t\t\t\t\t\t\t<label for=\"tid\">TID:</label><input name=\"tid\" /><br /><br />\n\t\t\t\t\t\t\tGame: <div>\n\t\t\t\t\t\t\t\t<input type=\"radio\" id=\"bdsp\" name=\"game\" value=\"bdsp\" /><label for=\"bdsp\">BDSP</label>\n\t\t\t\t\t\t\t\t<input type=\"radio\" id=\"swsh\" name=\"game\"value=\"swsh\" /><label for=\"swsh\">SwSh</label>\n\t\t\t\t\t\t\t\t<input type=\"radio\" id=\"sv\" name=\"game\" value=\"sv\" checked /><label for=\"sv\">SV</label>\n\t\t\t\t\t\t\t</div><br />\n\t\t\t\t\t\t\t<label for=\"question\">Question:</label><input name=\"question\" /><br /><br />\n\t\t\t\t\t\t\t<label for=\"answers\">Answers (separated by comma):</label><input name=\"answers\" /><br /><br />\n\t\t\t\t\t\t\t{generatePokeballDropdown()}<br /><br />\n\t\t\t\t\t\t\t<label for=\"ivs\">IVs (Formatted like \"1/30/31/X/HT/30\"): </label><input name=\"ivs\" /><br /><br />\n\t\t\t\t\t\t\t<label for=\"set\"></label>\n\t\t\t\t\t\t\t<textarea style={{ width: '70%', height: '300px' }} placeholder=\"Paste set importable here\" name=\"set\"></textarea>\n\t\t\t\t\t\t\t<br /><br />\n\t\t\t\t\t\t\t<label for=\"info\">Additional information (if any):</label><br />\n\t\t\t\t\t\t\t<textarea style={{ width: '50%', height: '100px' }} placeholder=\"Add any additional info\" name=\"info\"></textarea>\n\t\t\t\t\t\t\t<br /><br />\n\t\t\t\t\t\t\t<button class=\"button\" type=\"submit\">Create Question Giveaway</button>\n\t\t\t\t\t\t</form>\n\t\t\t\t\t</>;\n\t\t\t\t}\n\t\t\t})()}</div>;\n\t\t},\n\t\tstored(args, user) {\n\t\t\tthis.title = `[Stored Giveaways]`;\n\t\t\tif (!Rooms.search('wifi')) return <h1>There is no Wi-Fi room on this server.</h1>;\n\t\t\tthis.checkCan('warn', null, Rooms.search('wifi')!);\n\t\t\tconst [add, type] = args;\n\t\t\tconst giveaways = [\n\t\t\t\t...(wifiData.storedGiveaways?.lottery || []),\n\t\t\t\t...(wifiData.storedGiveaways?.question || []),\n\t\t\t];\n\t\t\tconst adding = add === 'add';\n\t\t\tif (!giveaways.length && !adding) {\n\t\t\t\treturn <div class=\"pad\">\n\t\t\t\t\t{makePageHeader(this.user, adding ? 'stored-add' : 'stored')}\n\t\t\t\t\t<h2>There are no giveaways stored</h2>\n\t\t\t\t</div>;\n\t\t\t}\n\t\t\treturn <div class=\"pad\">\n\t\t\t\t{makePageHeader(this.user, adding ? 'stored-add' : 'stored')}\n\t\t\t\t{(() => {\n\t\t\t\t\tif (!adding) {\n\t\t\t\t\t\tconst buf = [];\n\t\t\t\t\t\tfor (let giveaway of giveaways) {\n\t\t\t\t\t\t\tif (wifiData.storedGiveaways.lottery.includes(giveaway as LotteryGiveawayData)) {\n\t\t\t\t\t\t\t\tgiveaway = giveaway as LotteryGiveawayData;\n\t\t\t\t\t\t\t\tconst targetUser = Users.get(giveaway.targetUserID);\n\t\t\t\t\t\t\t\tbuf.push(<div class=\"infobox\">\n\t\t\t\t\t\t\t\t\t<h3 style={{ textAlign: 'center' }}>Lottery</h3>\n\t\t\t\t\t\t\t\t\t<hr />\n\t\t\t\t\t\t\t\t\t<strong>Game:</strong> {gameName[giveaway.game]}<br />\n\t\t\t\t\t\t\t\t\t<strong>Giver:</strong> {giveaway.targetUserID}, {}\n\t\t\t\t\t\t\t\t\t<strong>OT:</strong> {giveaway.ot}, <strong>TID:</strong> {giveaway.tid}<br />\n\t\t\t\t\t\t\t\t\t<strong># of winners:</strong> {giveaway.winners}<br />\n\t\t\t\t\t\t\t\t\t<strong>Pok&eacute; Ball:</strong> <psicon item={giveaway.ball} />\n\t\t\t\t\t\t\t\t\t<details>\n\t\t\t\t\t\t\t\t\t\t<summary><psicon pokemon={giveaway.prize.species} /> Prize</summary>\n\t\t\t\t\t\t\t\t\t\t<Chat.JSX.FormatText isTrusted>{Giveaway.convertIVs(giveaway.prize, giveaway.ivs)}</Chat.JSX.FormatText>\n\t\t\t\t\t\t\t\t\t</details>\n\t\t\t\t\t\t\t\t\t{!!giveaway.extraInfo?.trim() && <>\n\t\t\t\t\t\t\t\t\t\t<hr />\n\t\t\t\t\t\t\t\t\t\t<details>\n\t\t\t\t\t\t\t\t\t\t\t<summary>Extra Info</summary>\n\t\t\t\t\t\t\t\t\t\t\t<Chat.JSX.FormatText isTrusted>{giveaway.extraInfo.trim()}</Chat.JSX.FormatText>\n\t\t\t\t\t\t\t\t\t\t</details>\n\t\t\t\t\t\t\t\t\t</>}\n\t\t\t\t\t\t\t\t\t<hr />\n\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\tclass=\"button\" name=\"send\" value={\n\t\t\t\t\t\t\t\t\t\t\t`/giveaway delete lottery,${wifiData.storedGiveaways.lottery.indexOf(giveaway) + 1}`\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t><i class=\"fa fa-trash\"></i> Delete giveaway</button>\n\t\t\t\t\t\t\t\t\t{!targetUser?.connected ? (\n\t\t\t\t\t\t\t\t\t\t<button title=\"The giver is offline\" disabled class=\"button disabled\" style={{ float: 'right' }}>\n\t\t\t\t\t\t\t\t\t\t\tCreate giveaway\n\t\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\t\tclass=\"button\" style={{ float: 'right' }} name=\"send\" value={\n\t\t\t\t\t\t\t\t\t\t\t\t`/giveaway create lottery ${giveaway.targetUserID}|${giveaway.ot}|${giveaway.tid}|${giveaway.game}|${giveaway.winners}|${giveaway.ivs.join('/')}|${giveaway.ball}|${giveaway.extraInfo.trim().replace(/\\n/g, '<br />')}|${Teams.pack([giveaway.prize])}`\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t>Create giveaway</button>\n\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t</div>);\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tgiveaway = giveaway as QuestionGiveawayData;\n\t\t\t\t\t\t\t\tconst targetUser = Users.get(giveaway.targetUserID);\n\t\t\t\t\t\t\t\tbuf.push(<div class=\"infobox\">\n\t\t\t\t\t\t\t\t\t<h3 style={{ textAlign: 'center' }}>Lottery</h3>\n\t\t\t\t\t\t\t\t\t<hr />\n\t\t\t\t\t\t\t\t\t<strong>Game:</strong> {gameName[giveaway.game]}<br />\n\t\t\t\t\t\t\t\t\t<strong>Giver:</strong> {giveaway.targetUserID}, {}\n\t\t\t\t\t\t\t\t\t<strong>OT:</strong> {giveaway.ot}, <strong>TID:</strong> {giveaway.tid}<br />\n\t\t\t\t\t\t\t\t\t<strong>Question:</strong> {giveaway.question}<br />\n\t\t\t\t\t\t\t\t\t<strong>Answer{Chat.plural(giveaway.answers.length, \"s\")}:</strong> {giveaway.answers.join(', ')}<br />\n\t\t\t\t\t\t\t\t\t<strong>Pok&eacute; Ball:</strong> <psicon item={giveaway.ball} />\n\t\t\t\t\t\t\t\t\t<details>\n\t\t\t\t\t\t\t\t\t\t<summary><psicon pokemon={giveaway.prize.species} /> Prize</summary>\n\t\t\t\t\t\t\t\t\t\t<Chat.JSX.FormatText isTrusted>{Giveaway.convertIVs(giveaway.prize, giveaway.ivs)}</Chat.JSX.FormatText>\n\t\t\t\t\t\t\t\t\t</details>\n\t\t\t\t\t\t\t\t\t{!!giveaway.extraInfo?.trim() && <>\n\t\t\t\t\t\t\t\t\t\t<hr />\n\t\t\t\t\t\t\t\t\t\t<details>\n\t\t\t\t\t\t\t\t\t\t\t<summary>Extra Info</summary>\n\t\t\t\t\t\t\t\t\t\t\t<Chat.JSX.FormatText isTrusted>{giveaway.extraInfo.trim()}</Chat.JSX.FormatText>\n\t\t\t\t\t\t\t\t\t\t</details>\n\t\t\t\t\t\t\t\t\t</>}\n\t\t\t\t\t\t\t\t\t<hr />\n\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\tclass=\"button\" name=\"send\"\n\t\t\t\t\t\t\t\t\t\tvalue={`/giveaway delete question,${wifiData.storedGiveaways.question.indexOf(giveaway) + 1}`}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t<i class=\"fa fa-trash\"></i> Delete giveaway\n\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t{!targetUser?.connected ? (\n\t\t\t\t\t\t\t\t\t\t<button title=\"The giver is offline\" disabled class=\"button disabled\" style={{ float: 'right' }}>\n\t\t\t\t\t\t\t\t\t\t\tCreate giveaway\n\t\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\t\tclass=\"button\" style={{ float: 'right' }} name=\"send\" value={\n\t\t\t\t\t\t\t\t\t\t\t\t`/giveaway create question ${giveaway.targetUserID}|${giveaway.ot}|${giveaway.tid}|${giveaway.game}|${giveaway.question}|${giveaway.answers.join(',')}|${giveaway.ivs.join('/')}|${giveaway.ball}|${giveaway.extraInfo.trim().replace(/\\n/g, '<br />')}|${Teams.pack([giveaway.prize])}`\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t>Create giveaway</button>\n\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t</div>);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn <><h2>Stored Giveaways</h2>{buf}</>;\n\t\t\t\t\t} else {\n\t\t\t\t\t\treturn <><h2>Store a Giveaway</h2>\n\t\t\t\t\t\t\t{(() => {\n\t\t\t\t\t\t\t\tif (!type || !['question', 'lottery'].includes(type)) {\n\t\t\t\t\t\t\t\t\treturn <center>\n\t\t\t\t\t\t\t\t\t\t<h3>Pick a giveaway type</h3>\n\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\tformatFakeButton(`/view-giveaways-stored-add-lottery`, <><i class=\"fa fa-random\"></i> Lottery</>)\n\t\t\t\t\t\t\t\t\t\t} | {\n\t\t\t\t\t\t\t\t\t\t\tformatFakeButton(`/view-giveaways-stored-add-question`, <><i class=\"fa fa-question\"></i> Question</>)\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t</center>;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tswitch (type) {\n\t\t\t\t\t\t\t\tcase 'lottery':\n\t\t\t\t\t\t\t\t\treturn <form data-submitsend=\"/giveaway store lottery {giver}|{ot}|{tid}|{game}|{winners}|{ivs}|{ball}|{info}|{set}\">\n\t\t\t\t\t\t\t\t\t\t<label for=\"giver\">Giver: </label><input name=\"giver\" /><br /><br />\n\t\t\t\t\t\t\t\t\t\t<label for=\"ot\">OT: </label><input name=\"ot\" /><br /><br />\n\t\t\t\t\t\t\t\t\t\t<label for=\"tid\">TID: </label><input name=\"tid\" /><br /><br />\n\t\t\t\t\t\t\t\t\t\tGame: <div>\n\t\t\t\t\t\t\t\t\t\t\t<input type=\"radio\" id=\"bdsp\" name=\"game\" value=\"bdsp\" /><label for=\"bdsp\">BDSP</label>\n\t\t\t\t\t\t\t\t\t\t\t<input type=\"radio\" id=\"swsh\" name=\"game\"value=\"swsh\" /><label for=\"swsh\">SwSh</label>\n\t\t\t\t\t\t\t\t\t\t\t<input type=\"radio\" id=\"sv\" name=\"game\" value=\"sv\" checked /><label for=\"sv\">SV</label>\n\t\t\t\t\t\t\t\t\t\t</div><br />\n\t\t\t\t\t\t\t\t\t\t<label for=\"winners\">Number of winners: </label><input name=\"winners\" /><br /><br />\n\t\t\t\t\t\t\t\t\t\t{generatePokeballDropdown()}<br /><br />\n\t\t\t\t\t\t\t\t\t\t<label for=\"ivs\">IVs (Formatted like \"1/30/31/X/HT/30\"): </label><input name=\"ivs\" /><br /><br />\n\t\t\t\t\t\t\t\t\t\t<label for=\"set\">Prize:</label><br />\n\t\t\t\t\t\t\t\t\t\t<textarea style={{ width: '70%', height: '300px' }} placeholder=\"Paste set importable\" name=\"set\"></textarea>\n\t\t\t\t\t\t\t\t\t\t<br /><br />\n\t\t\t\t\t\t\t\t\t\t<label for=\"info\">Additional information (if any):</label><br />\n\t\t\t\t\t\t\t\t\t\t<textarea style={{ width: '50%', height: '100px' }} placeholder=\"Add any additional info\" name=\"info\"></textarea>\n\t\t\t\t\t\t\t\t\t\t<br /><br />\n\t\t\t\t\t\t\t\t\t\t<button class=\"button\" type=\"submit\">Store Lottery Giveaway</button>\n\t\t\t\t\t\t\t\t\t</form>;\n\t\t\t\t\t\t\t\tcase 'question':\n\t\t\t\t\t\t\t\t\treturn <form\n\t\t\t\t\t\t\t\t\t\tdata-submitsend=\"/giveaway store question {giver}|{ot}|{tid}|{game}|{question}|{answers}|{ivs}|{ball}|{info}|{set}\"\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t<label for=\"giver\">Giver:</label><input name=\"giver\" /><br /><br />\n\t\t\t\t\t\t\t\t\t\t<label for=\"ot\">OT:</label><input name=\"ot\" /><br /><br />\n\t\t\t\t\t\t\t\t\t\t<label for=\"tid\">TID:</label><input name=\"tid\" /><br /><br />\n\t\t\t\t\t\t\t\t\t\tGame: <div>\n\t\t\t\t\t\t\t\t\t\t\t<input type=\"radio\" id=\"bdsp\" name=\"game\" value=\"bdsp\" /><label for=\"bdsp\">BDSP</label>\n\t\t\t\t\t\t\t\t\t\t\t<input type=\"radio\" id=\"swsh\" name=\"game\"value=\"swsh\" /><label for=\"swsh\">SwSh</label>\n\t\t\t\t\t\t\t\t\t\t\t<input type=\"radio\" id=\"sv\" name=\"game\" value=\"sv\" checked /><label for=\"sv\">SV</label>\n\t\t\t\t\t\t\t\t\t\t</div><br />\n\t\t\t\t\t\t\t\t\t\t<label for=\"question\">Question:</label><input name=\"question\" /><br /><br />\n\t\t\t\t\t\t\t\t\t\t<label for=\"answers\">Answers (separated by comma):</label><input name=\"answers\" /><br /><br />\n\t\t\t\t\t\t\t\t\t\t{generatePokeballDropdown()}<br /><br />\n\t\t\t\t\t\t\t\t\t\t<label for=\"ivs\">IVs (Formatted like \"1/30/31/X/HT/30\"): </label><input name=\"ivs\" /><br /><br />\n\t\t\t\t\t\t\t\t\t\t<label for=\"set\"></label>\n\t\t\t\t\t\t\t\t\t\t<textarea style={{ width: '70%', height: '300px' }} placeholder=\"Paste set importable here\" name=\"set\"></textarea>\n\t\t\t\t\t\t\t\t\t\t<br /><br />\n\t\t\t\t\t\t\t\t\t\t<label for=\"info\">Additional information (if any):</label><br />\n\t\t\t\t\t\t\t\t\t\t<textarea style={{ width: '50%', height: '100px' }} placeholder=\"Add any additional info\" name=\"info\"></textarea>\n\t\t\t\t\t\t\t\t\t\t<br /><br />\n\t\t\t\t\t\t\t\t\t\t<button class=\"button\" type=\"submit\">Store Question Giveaway</button>\n\t\t\t\t\t\t\t\t\t</form>;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t})()}\n\t\t\t\t\t\t</>;\n\t\t\t\t\t}\n\t\t\t\t})()}\n\t\t\t</div>;\n\t\t},\n\t\tsubmitted(args, user) {\n\t\t\tthis.title = `[Submitted Giveaways]`;\n\t\t\tif (!Rooms.search('wifi')) return <h1>There is no Wi-Fi room on this server.</h1>;\n\t\t\tconst [add, type] = args;\n\t\t\tconst adding = add === 'add';\n\t\t\tif (!adding) this.checkCan('warn', null, Rooms.get('wifi')!);\n\t\t\tconst giveaways = [\n\t\t\t\t...(wifiData.submittedGiveaways?.lottery || []),\n\t\t\t\t...(wifiData.submittedGiveaways?.question || []),\n\t\t\t];\n\t\t\tif (!giveaways.length && !adding) {\n\t\t\t\treturn <div class=\"pad\">\n\t\t\t\t\t{makePageHeader(this.user, args[0] === 'add' ? 'submitted-add' : 'submitted')}\n\t\t\t\t\t<h2>There are no submitted giveaways.</h2>\n\t\t\t\t</div>;\n\t\t\t}\n\t\t\treturn <div class=\"pad\">\n\t\t\t\t{makePageHeader(this.user, args[0] === 'add' ? 'submitted-add' : 'submitted')}\n\t\t\t\t{(() => {\n\t\t\t\t\tif (!adding) {\n\t\t\t\t\t\tconst buf = [];\n\t\t\t\t\t\tfor (let giveaway of giveaways) {\n\t\t\t\t\t\t\tconst claimCmd = giveaway.claimed === user.id ?\n\t\t\t\t\t\t\t\t`/giveaway unclaim ${giveaway.targetUserID}` :\n\t\t\t\t\t\t\t\t`/giveaway claim ${giveaway.targetUserID}`;\n\t\t\t\t\t\t\tconst claimedTitle = giveaway.claimed === user.id ?\n\t\t\t\t\t\t\t\t\"Unclaim\" : giveaway.claimed ?\n\t\t\t\t\t\t\t\t\t`Claimed by ${giveaway.claimed}` : `Claim`;\n\t\t\t\t\t\t\tconst disabled = giveaway.claimed && giveaway.claimed !== user.id ? \" disabled\" : \"\";\n\t\t\t\t\t\t\tbuf.push(<div class=\"infobox\">\n\t\t\t\t\t\t\t\t{(() => {\n\t\t\t\t\t\t\t\t\tif (wifiData.submittedGiveaways.lottery.includes(giveaway as LotteryGiveawayData)) {\n\t\t\t\t\t\t\t\t\t\tgiveaway = giveaway as LotteryGiveawayData;\n\t\t\t\t\t\t\t\t\t\treturn <>\n\t\t\t\t\t\t\t\t\t\t\t<h3 style={{ textAlign: 'center' }}>Lottery</h3>\n\t\t\t\t\t\t\t\t\t\t\t<hr />\n\t\t\t\t\t\t\t\t\t\t\t<strong>Game:</strong> {gameName[giveaway.game]}, <strong>Giver:</strong> {giveaway.targetUserID}, {}\n\t\t\t\t\t\t\t\t\t\t\t<strong>OT:</strong> {giveaway.ot}, <strong>TID:</strong> {giveaway.tid}, {}\n\t\t\t\t\t\t\t\t\t\t\t<strong># of winners:</strong> {giveaway.winners}\n\t\t\t\t\t\t\t\t\t\t\t{!!giveaway.claimed && <><br /><strong>Claimed:</strong> {giveaway.claimed}</>}<br />\n\t\t\t\t\t\t\t\t\t\t\t<strong>Pok&eacute; Ball:</strong> <psicon item={giveaway.ball} />\n\t\t\t\t\t\t\t\t\t\t\t<details>\n\t\t\t\t\t\t\t\t\t\t\t\t<summary><psicon pokemon={giveaway.prize.species} /> Prize</summary>\n\t\t\t\t\t\t\t\t\t\t\t\t<Chat.JSX.FormatText isTrusted>{Giveaway.convertIVs(giveaway.prize, giveaway.ivs)}</Chat.JSX.FormatText>\n\t\t\t\t\t\t\t\t\t\t\t</details>\n\t\t\t\t\t\t\t\t\t\t\t{!!giveaway.extraInfo?.trim() && <>\n\t\t\t\t\t\t\t\t\t\t\t\t<hr />\n\t\t\t\t\t\t\t\t\t\t\t\t<details>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<summary>Extra Info</summary>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Chat.JSX.FormatText isTrusted>{giveaway.extraInfo.trim()}</Chat.JSX.FormatText>\n\t\t\t\t\t\t\t\t\t\t\t\t</details>\n\t\t\t\t\t\t\t\t\t\t\t</>}\n\t\t\t\t\t\t\t\t\t\t</>;\n\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\tgiveaway = giveaway as QuestionGiveawayData;\n\t\t\t\t\t\t\t\t\t\treturn <>\n\t\t\t\t\t\t\t\t\t\t\t<h3 style={{ textAlign: 'center' }}>Question</h3>\n\t\t\t\t\t\t\t\t\t\t\t<hr />\n\t\t\t\t\t\t\t\t\t\t\t<strong>Game:</strong> {gameName[giveaway.game]}, <strong>Giver:</strong> {giveaway.targetUserID}, {}\n\t\t\t\t\t\t\t\t\t\t\t<strong>OT:</strong> {giveaway.ot}, <strong>TID:</strong> {giveaway.tid}\n\t\t\t\t\t\t\t\t\t\t\t{!!giveaway.claimed && <><br /><strong>Claimed:</strong> {giveaway.claimed}</>}<br />\n\t\t\t\t\t\t\t\t\t\t\t<strong>Question:</strong> {giveaway.question}<br />\n\t\t\t\t\t\t\t\t\t\t\t<strong>Answer{Chat.plural(giveaway.answers.length, \"s\")}:</strong> {giveaway.answers.join(', ')}<br />\n\t\t\t\t\t\t\t\t\t\t\t<strong>Pok&eacute; Ball:</strong> <psicon item={giveaway.ball} />\n\t\t\t\t\t\t\t\t\t\t\t<details>\n\t\t\t\t\t\t\t\t\t\t\t\t<summary><psicon pokemon={giveaway.prize.species} /> Prize</summary>\n\t\t\t\t\t\t\t\t\t\t\t\t<Chat.JSX.FormatText isTrusted>{Giveaway.convertIVs(giveaway.prize, giveaway.ivs)}</Chat.JSX.FormatText>\n\t\t\t\t\t\t\t\t\t\t\t</details>\n\t\t\t\t\t\t\t\t\t\t\t{!!giveaway.extraInfo?.trim() && <>\n\t\t\t\t\t\t\t\t\t\t\t\t<hr />\n\t\t\t\t\t\t\t\t\t\t\t\t<details>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<summary>Extra Info</summary>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Chat.JSX.FormatText isTrusted>{giveaway.extraInfo.trim()}</Chat.JSX.FormatText>\n\t\t\t\t\t\t\t\t\t\t\t\t</details>\n\t\t\t\t\t\t\t\t\t\t\t</>}\n\t\t\t\t\t\t\t\t\t\t</>;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t})()}\n\t\t\t\t\t\t\t\t<hr />\n\t\t\t\t\t\t\t\t{!Users.get(giveaway.targetUserID)?.connected ? <>\n\t\t\t\t\t\t\t\t\t<button title=\"The giver is offline\" class=\"button disabled\" disabled>\n\t\t\t\t\t\t\t\t\t\t<i class=\"fa fa-times-circle\"></i> Deny giveaway\n\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t<button style={{ textAlign: 'center' }} class={`button${disabled}`} name=\"send\" value={`/msgroom wifi,${claimCmd}`}>\n\t\t\t\t\t\t\t\t\t\t{claimedTitle}\n\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t<button title=\"The giver is offline\" disabled class=\"button disabled\" style={{ float: 'right' }}>\n\t\t\t\t\t\t\t\t\t\tCreate giveaway\n\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t</> : <>\n\t\t\t\t\t\t\t\t\t<button class=\"button\" name=\"send\" value={`/giveaway deny ${giveaway.targetUserID}`}>\n\t\t\t\t\t\t\t\t\t\t<i class=\"fa fa-times-circle\"></i> Deny giveaway\n\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t<button style={{ textAlign: 'center' }} class={`button${disabled}`} name=\"send\" value={`/msgroom wifi,${claimCmd}`}>\n\t\t\t\t\t\t\t\t\t\t{claimedTitle}\n\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t<button class=\"button\" style={{ float: 'right' }} name=\"send\" value={`/giveaway approve ${giveaway.targetUserID}`}>\n\t\t\t\t\t\t\t\t\t\tCreate giveaway\n\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t</>}\n\t\t\t\t\t\t\t</div>);\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn <><h2>Submitted Giveaways</h2>{buf}</>;\n\t\t\t\t\t} else {\n\t\t\t\t\t\treturn <>\n\t\t\t\t\t\t\t<h2>Submit a Giveaway</h2>\n\t\t\t\t\t\t\t{(() => {\n\t\t\t\t\t\t\t\tif (!type || !['question', 'lottery'].includes(type)) {\n\t\t\t\t\t\t\t\t\treturn <center>\n\t\t\t\t\t\t\t\t\t\t<h3>Pick a giveaway type</h3>\n\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\tformatFakeButton(`/view-giveaways-submitted-add-lottery`, <><i class=\"fa fa-random\"></i> Lottery</>)\n\t\t\t\t\t\t\t\t\t\t} | {\n\t\t\t\t\t\t\t\t\t\t\tformatFakeButton(`/view-giveaways-submitted-add-question`, <><i class=\"fa fa-question\"></i> Question</>)\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t</center>;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tswitch (type) {\n\t\t\t\t\t\t\t\tcase 'lottery':\n\t\t\t\t\t\t\t\t\treturn <form data-submitsend=\"/giveaway submit lottery {giver}|{ot}|{tid}|{game}|{winners}|{ivs}|{ball}|{info}|{set}\">\n\t\t\t\t\t\t\t\t\t\t<label for=\"giver\">Giver: </label><input name=\"giver\" /><br /><br />\n\t\t\t\t\t\t\t\t\t\t<label for=\"ot\">OT: </label><input name=\"ot\" /><br /><br />\n\t\t\t\t\t\t\t\t\t\t<label for=\"tid\">TID: </label><input name=\"tid\" /><br /><br />\n\t\t\t\t\t\t\t\t\t\tGame: <div>\n\t\t\t\t\t\t\t\t\t\t\t<input type=\"radio\" id=\"bdsp\" name=\"game\" value=\"bdsp\" /><label for=\"bdsp\">BDSP</label>\n\t\t\t\t\t\t\t\t\t\t\t<input type=\"radio\" id=\"swsh\" name=\"game\"value=\"swsh\" /><label for=\"swsh\">SwSh</label>\n\t\t\t\t\t\t\t\t\t\t\t<input type=\"radio\" id=\"sv\" name=\"game\" value=\"sv\" checked /><label for=\"sv\">SV</label>\n\t\t\t\t\t\t\t\t\t\t</div><br />\n\t\t\t\t\t\t\t\t\t\t<label for=\"winners\">Number of winners: </label><input name=\"winners\" /><br /><br />\n\t\t\t\t\t\t\t\t\t\t{generatePokeballDropdown()}<br /><br />\n\t\t\t\t\t\t\t\t\t\t<label for=\"ivs\">IVs (Formatted like \"1/30/31/X/HT/30\"): </label><input name=\"ivs\" /><br /><br />\n\t\t\t\t\t\t\t\t\t\t<label for=\"set\">Prize:</label><br />\n\t\t\t\t\t\t\t\t\t\t<textarea style={{ width: '70%', height: '300px' }} placeholder=\"Paste set importable\" name=\"set\"></textarea>\n\t\t\t\t\t\t\t\t\t\t<br /><br />\n\t\t\t\t\t\t\t\t\t\t<label for=\"info\">Additional information (provide a link of proof here):</label><br />\n\t\t\t\t\t\t\t\t\t\t<textarea style={{ width: '50%', height: '100px' }} placeholder=\"Add any additional info\" name=\"info\"></textarea>\n\t\t\t\t\t\t\t\t\t\t<br /><br />\n\t\t\t\t\t\t\t\t\t\t<button class=\"button\" type=\"submit\">Submit Lottery Giveaway</button>\n\t\t\t\t\t\t\t\t\t</form>;\n\t\t\t\t\t\t\t\tcase 'question':\n\t\t\t\t\t\t\t\t\treturn <form\n\t\t\t\t\t\t\t\t\t\tdata-submitsend=\"/giveaway submit question {giver}|{ot}|{tid}|{game}|{question}|{answers}|{ivs}|{ball}|{info}|{set}\"\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t<label for=\"giver\">Giver:</label><input name=\"giver\" /><br /><br />\n\t\t\t\t\t\t\t\t\t\t<label for=\"ot\">OT:</label><input name=\"ot\" /><br /><br />\n\t\t\t\t\t\t\t\t\t\t<label for=\"tid\">TID:</label><input name=\"tid\" /><br /><br />\n\t\t\t\t\t\t\t\t\t\tGame: <div>\n\t\t\t\t\t\t\t\t\t\t\t<input type=\"radio\" id=\"bdsp\" name=\"game\" value=\"bdsp\" /><label for=\"bdsp\">BDSP</label>\n\t\t\t\t\t\t\t\t\t\t\t<input type=\"radio\" id=\"swsh\" name=\"game\"value=\"swsh\" /><label for=\"swsh\">SwSh</label>\n\t\t\t\t\t\t\t\t\t\t\t<input type=\"radio\" id=\"sv\" name=\"game\" value=\"sv\" checked /><label for=\"sv\">SV</label>\n\t\t\t\t\t\t\t\t\t\t</div><br />\n\t\t\t\t\t\t\t\t\t\t<label for=\"question\">Question:</label><input name=\"question\" /><br /><br />\n\t\t\t\t\t\t\t\t\t\t<label for=\"answers\">Answers (separated by comma):</label><input name=\"answers\" /><br /><br />\n\t\t\t\t\t\t\t\t\t\t{generatePokeballDropdown()}<br /><br />\n\t\t\t\t\t\t\t\t\t\t<label for=\"ivs\">IVs (Formatted like \"1/30/31/X/HT/30\"): </label><input name=\"ivs\" /><br /><br />\n\t\t\t\t\t\t\t\t\t\t<label for=\"set\"></label>\n\t\t\t\t\t\t\t\t\t\t<textarea style={{ width: '70%', height: '300px' }} placeholder=\"Paste set importable\" name=\"set\"></textarea>\n\t\t\t\t\t\t\t\t\t\t<br /><br />\n\t\t\t\t\t\t\t\t\t\t<label for=\"info\">Additional information (provide a link of proof here):</label><br />\n\t\t\t\t\t\t\t\t\t\t<textarea style={{ width: '50%', height: '100px' }} placeholder=\"Add any additional info\" name=\"info\"></textarea>\n\t\t\t\t\t\t\t\t\t\t<br /><br />\n\t\t\t\t\t\t\t\t\t\t<button class=\"button\" type=\"submit\">Submit Question Giveaway</button>\n\t\t\t\t\t\t\t\t\t</form>;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t})()}\n\t\t\t\t\t\t</>;\n\t\t\t\t\t}\n\t\t\t\t})()}\n\t\t\t</div>;\n\t\t},\n\t},\n};\n\nChat.multiLinePattern.register(`/giveaway (create|new|start|store|submit|save) (question|lottery) `);\n"],
  "mappings": "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",
  "names": []
}
