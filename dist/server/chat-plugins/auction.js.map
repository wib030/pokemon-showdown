{
  "version": 3,
  "sources": ["../../../server/chat-plugins/auction.ts"],
  "sourcesContent": ["/**\n * Chat plugin to run auctions for team tournaments.\n *\n * Based on the original Scrappie auction system\n * https://github.com/Hidden50/Pokemon-Showdown-Node-Bot/blob/master/commands/base-auctions.js\n * @author Karthik\n */\nimport { Net, Utils } from '../../lib';\n\ninterface Player {\n\tid: ID;\n\tname: string;\n\tteam?: Team;\n\tprice: number;\n\ttiersPlayed: string[];\n\ttiersNotPlayed: string[];\n}\n\ninterface Manager {\n\tid: ID;\n\tteam: Team;\n}\n\nclass Team {\n\tid: ID;\n\tname: string;\n\tplayers: Player[];\n\tcredits: number;\n\tsuspended: boolean;\n\tprivate auction: Auction;\n\tconstructor(name: string, auction: Auction) {\n\t\tthis.id = toID(name);\n\t\tthis.name = name;\n\t\tthis.players = [];\n\t\tthis.credits = auction.startingCredits;\n\t\tthis.suspended = false;\n\t\tthis.auction = auction;\n\t}\n\n\tgetManagers() {\n\t\treturn [...this.auction.managers.values()]\n\t\t\t.filter(m => m.team === this)\n\t\t\t.map(m => Users.getExact(m.id)?.name || m.id);\n\t}\n\n\taddPlayer(player: Player, price = 0) {\n\t\tplayer.team?.removePlayer(player);\n\t\tthis.players.push(player);\n\t\tthis.credits -= price;\n\t\tplayer.team = this;\n\t\tplayer.price = price;\n\t}\n\n\tremovePlayer(player: Player) {\n\t\tconst pIndex = this.players.indexOf(player);\n\t\tif (pIndex === -1) return;\n\t\tthis.players.splice(pIndex, 1);\n\t\tdelete player.team;\n\t\tplayer.price = 0;\n\t}\n\n\tisSuspended() {\n\t\treturn this.suspended || (\n\t\t\tthis.auction.type === 'snake' ?\n\t\t\t\tthis.players.length >= this.auction.minPlayers :\n\t\t\t\t(\n\t\t\t\t\tthis.credits < this.auction.minBid ||\n\t\t\t\t\t(this.auction.maxPlayers && this.players.length >= this.auction.maxPlayers)\n\t\t\t\t)\n\t\t);\n\t}\n\n\tmaxBid(credits = this.credits) {\n\t\treturn credits + this.auction.minBid * Math.min(0, this.players.length - this.auction.minPlayers + 1);\n\t}\n}\n\nfunction parseCredits(amount: string) {\n\tlet credits = Number(amount.replace(',', '.'));\n\tif (Math.abs(credits) < 500) credits *= 1000;\n\tif (!credits || credits % 500 !== 0) {\n\t\tthrow new Chat.ErrorMessage(`The amount of credits must be a multiple of 500.`);\n\t}\n\treturn credits;\n}\n\nexport class Auction extends Rooms.SimpleRoomGame {\n\toverride readonly gameid = 'auction' as ID;\n\towners = new Set<ID>();\n\tteams = new Map<string, Team>();\n\tmanagers = new Map<string, Manager>();\n\tauctionPlayers = new Map<string, Player>();\n\n\tstartingCredits: number;\n\tminBid = 3000;\n\tminPlayers = 10;\n\tmaxPlayers = 0;\n\ttype: 'auction' | 'blind' | 'snake' = 'auction';\n\n\tlastQueue: Team[] | null = null;\n\tqueue: Team[] = [];\n\tnomTimer: NodeJS.Timeout = null!;\n\tnomTimeLimit = 0;\n\tnomTimeRemaining = 0;\n\tbidTimer: NodeJS.Timeout = null!;\n\tbidTimeLimit = 10;\n\tbidTimeRemaining = 10;\n\tnominatingTeam: Team = null!;\n\tnominatedPlayer: Player = null!;\n\thighestBidder: Team = null!;\n\thighestBid = 0;\n\t/** Used for blind mode */\n\tbidsPlaced = new Map<Team, number>();\n\tstate: 'setup' | 'nom' | 'bid' = 'setup';\n\tconstructor(room: Room, startingCredits = 100000) {\n\t\tsuper(room);\n\t\tthis.title = 'Auction';\n\t\tthis.startingCredits = startingCredits;\n\t}\n\n\tsendMessage(message: string) {\n\t\tthis.room.add(`|c|~|${message}`).update();\n\t}\n\n\tsendHTMLBox(htmlContent: string) {\n\t\tthis.room.add(`|html|<div class=\"infobox\">${htmlContent}</div>`).update();\n\t}\n\n\tcheckOwner(user: User) {\n\t\tif (!this.owners.has(user.id) && !Users.Auth.hasPermission(user, 'declare', null, this.room)) {\n\t\t\tthrow new Chat.ErrorMessage(`You must be an auction owner to use this command.`);\n\t\t}\n\t}\n\n\taddOwners(users: string[]) {\n\t\tfor (const name of users) {\n\t\t\tconst user = Users.getExact(name);\n\t\t\tif (!user) throw new Chat.ErrorMessage(`User \"${name}\" not found.`);\n\t\t\tif (this.owners.has(user.id)) throw new Chat.ErrorMessage(`${user.name} is already an auction owner.`);\n\t\t\tthis.owners.add(user.id);\n\t\t}\n\t}\n\n\tremoveOwners(users: string[]) {\n\t\tfor (const name of users) {\n\t\t\tconst id = toID(name);\n\t\t\tif (!this.owners.has(id)) throw new Chat.ErrorMessage(`User \"${name}\" is not an auction owner.`);\n\t\t\tthis.owners.delete(id);\n\t\t}\n\t}\n\n\tgenerateUsernameList(players: (string | Player)[], max = players.length, clickable = false) {\n\t\tlet buf = `<span style=\"font-size: 85%\">`;\n\t\tbuf += players.slice(0, max).map(p => {\n\t\t\tif (typeof p === 'object') {\n\t\t\t\treturn `<username ${clickable ? ' class=\"username\"' : ''}>${Utils.escapeHTML(p.name)}</username>`;\n\t\t\t}\n\t\t\treturn `<username${clickable ? ' class=\"username\"' : ''}>${Utils.escapeHTML(p)}</username>`;\n\t\t}).join(', ');\n\t\tif (players.length > max) {\n\t\t\tbuf += ` <span title=\"${players.slice(max).map(p => Utils.escapeHTML(typeof p === 'object' ? p.name : p)).join(', ')}\">(+${players.length - max})</span>`;\n\t\t}\n\t\tbuf += `</span>`;\n\t\treturn buf;\n\t}\n\n\tgeneratePriceList() {\n\t\tconst players = Utils.sortBy(this.getDraftedPlayers(), p => -p.price);\n\t\tlet buf = '';\n\t\tlet smogonExport = '';\n\n\t\tfor (const team of this.teams.values()) {\n\t\t\tlet table = `<table>`;\n\t\t\tlet smogonTable = `[TABLE]`;\n\t\t\tfor (const player of players.filter(p => p.team === team)) {\n\t\t\t\ttable += Utils.html`<tr><td>${player.name}</td><td>${player.price}</td></tr>`;\n\t\t\t\tsmogonTable += `[TR][TD]${player.name}[/TD][TD]${player.price}[/TD][/TR]`;\n\t\t\t}\n\t\t\ttable += `</table>`;\n\t\t\tsmogonTable += `[/TABLE]`;\n\n\t\t\tbuf += `<details><summary>${Utils.escapeHTML(team.name)}</summary>${table}</details><br/>`;\n\t\t\tif (this.ended) smogonExport += `[SPOILER=\"${team.name}\"]${smogonTable}[/SPOILER]`;\n\t\t}\n\n\t\tlet table = `<table>`;\n\t\tlet smogonTable = `[TABLE]`;\n\t\tfor (const player of players) {\n\t\t\ttable += Utils.html`<tr><td>${player.name}</td><td>${player.price}</td><td>${player.team!.name}</td></tr>`;\n\t\t\tsmogonTable += `[TR][TD]${player.name}[/TD][TD]${player.price}[/TD][TD]${player.team!.name}[/TD][/TR]`;\n\t\t}\n\t\ttable += `</table>`;\n\t\tsmogonTable += `[/TABLE]`;\n\n\t\tbuf += `<details><summary>All</summary>${table}</details><br/>`;\n\t\tif (this.ended) {\n\t\t\tsmogonExport += `[SPOILER=\"All\"]${smogonTable}[/SPOILER]`;\n\t\t\tbuf += Utils.html`<copytext value=\"${smogonExport}\">Copy Smogon Export</copytext>`;\n\t\t}\n\n\t\treturn buf;\n\t}\n\n\tgenerateAuctionTable() {\n\t\tconst queue = this.queue.filter(team => !team.isSuspended());\n\t\tconst lastIndexOfNomTeam = queue.lastIndexOf(queue[0]) + 1;\n\t\tlet buf = `<div class=\"ladder pad\"><table style=\"width: 100%\"><tr>${!this.ended ? `<th colspan=2>Order</th>` : ''}<th>Team</th>${this.type !== 'snake' ? `<th>Credits</th>` : ''}<th style=\"width: 100%\">Players</th></tr>`;\n\t\tfor (const team of this.teams.values()) {\n\t\t\tbuf += `<tr>`;\n\t\t\tif (!this.ended) {\n\t\t\t\tlet i1 = queue.indexOf(team) + 1;\n\t\t\t\tlet i2 = queue.lastIndexOf(team) + 1;\n\t\t\t\tif (i1 > lastIndexOfNomTeam) {\n\t\t\t\t\t[i1, i2] = [i2, i1];\n\t\t\t\t}\n\t\t\t\tbuf += `<td align=\"center\" style=\"width: 15px\">${i1 || '-'}</td><td align=\"center\" style=\"width: 15px\">${i2 || '-'}</td>`;\n\t\t\t}\n\t\t\tbuf += `<td style=\"white-space: nowrap\"><strong>${Utils.escapeHTML(team.name)}</strong><br/>${this.generateUsernameList(team.getManagers(), 2, true)}</td>`;\n\t\t\tif (this.type !== 'snake') {\n\t\t\t\tbuf += `<td style=\"white-space: nowrap\">${team.credits.toLocaleString()}${team.maxBid() >= this.minBid ? `<br/><span style=\"font-size: 90%\">Max bid: ${team.maxBid().toLocaleString()}</span>` : ''}</td>`;\n\t\t\t}\n\t\t\tbuf += `<td title=\"${team.players.map(p => Utils.escapeHTML(p.name)).join(', ')}\"><div style=\"min-height: 32px${!this.ended ? `; height: 32px; overflow: hidden; resize: vertical` : ''}\"><span style=\"float: right\">${team.players.length}</span>${this.generateUsernameList(team.players)}</div></td>`;\n\t\t\tbuf += `</tr>`;\n\t\t}\n\t\tbuf += `</table></div>`;\n\n\t\tconst players = Utils.sortBy(this.getUndraftedPlayers(), p => p.name);\n\t\tconst tierArrays = new Map<string, Player[]>();\n\t\tfor (const player of players) {\n\t\t\tfor (const tier of player.tiersPlayed) {\n\t\t\t\tif (!tierArrays.has(tier)) tierArrays.set(tier, []);\n\t\t\t\ttierArrays.get(tier)!.push(player);\n\t\t\t}\n\t\t}\n\t\tconst sortedTiers = [...tierArrays.keys()].sort();\n\t\tif (sortedTiers.length) {\n\t\t\tbuf += `<details><summary>Remaining Players (${players.length})</summary>`;\n\t\t\tbuf += `<details><summary>All</summary>${this.generateUsernameList(players)}</details>`;\n\t\t\tbuf += `<details><summary>Tiers</summary><ul style=\"list-style-type: none\">`;\n\t\t\tfor (const tier of sortedTiers) {\n\t\t\t\tconst tierPlayers = tierArrays.get(tier)!;\n\t\t\t\tbuf += `<li><details><summary>${Utils.escapeHTML(tier)} (${tierPlayers.length})</summary>${this.generateUsernameList(tierPlayers)}</details></li>`;\n\t\t\t}\n\t\t\tbuf += `</ul></details></details>`;\n\t\t} else {\n\t\t\tbuf += `<details><summary>Remaining Players (${players.length})</summary>${this.generateUsernameList(players)}</details>`;\n\t\t}\n\t\tbuf += `<details><summary>Auction Settings</summary>`;\n\t\tbuf += `- Minimum bid: <b>${this.minBid.toLocaleString()}</b><br/>`;\n\t\tbuf += `- Minimum players per team: <b>${this.minPlayers}</b><br/>`;\n\t\tif (this.type !== 'snake') buf += `- Maximum players per team: <b>${this.maxPlayers || 'N/A'}</b><br/>`;\n\t\tbuf += `- Nom timer: <b>${this.nomTimeLimit ? `${this.nomTimeLimit}s` : 'Off'}</b><br/>`;\n\t\tif (this.type !== 'snake') buf += `- Bid timer: <b>${this.bidTimeLimit}s</b><br/>`;\n\t\tbuf += `- Auction type: <b>${this.type}</b><br/>`;\n\t\tbuf += `</details>`;\n\t\treturn buf;\n\t}\n\n\tsendBidInfo() {\n\t\tlet buf = `<div class=\"infobox\">`;\n\t\tbuf += Utils.html`Player: <username>${this.nominatedPlayer.name}</username> `;\n\t\tif (this.type === 'auction') buf += `Top bid: <b>${this.highestBid}</b> `;\n\t\tif (this.type === 'auction') buf += Utils.html`Top bidder: <b>${this.highestBidder.name}</b><br/>`;\n\t\tbuf += Utils.html`Tiers Played: <b>${this.nominatedPlayer.tiersPlayed.length ? `${this.nominatedPlayer.tiersPlayed.join(', ')}` : 'N/A'}</b><br/>`;\n\t\tbuf += Utils.html`Tiers Not Played: <b>${this.nominatedPlayer.tiersNotPlayed.length ? `${this.nominatedPlayer.tiersNotPlayed.join(', ')}` : 'N/A'}</b>`;\n\t\tbuf += `</div>`;\n\t\tthis.room.add(`|uhtml|bid-${this.nominatedPlayer.id}|${buf}`).update();\n\t}\n\n\tsendTimer(change = false, nom = false) {\n\t\tlet buf = `<div class=\"infobox message-error\">`;\n\t\tbuf += `<i class=\"fa fa-hourglass-start\"></i> ${Chat.toDurationString((nom ? this.nomTimeRemaining : this.bidTimeRemaining) * 1000, { hhmmss: true }).slice(1)}`;\n\t\tbuf += `</div>`;\n\t\tthis.room.add(`|uhtml${change ? 'change' : ''}|timer|${buf}`).update();\n\t}\n\n\tsetMinBid(amount: number) {\n\t\tif (this.state !== 'setup') {\n\t\t\tthrow new Chat.ErrorMessage(`The minimum bid cannot be changed after the auction has started.`);\n\t\t}\n\t\tif (amount > 500000) throw new Chat.ErrorMessage(`The minimum bid must not exceed 500,000.`);\n\t\tthis.minBid = amount;\n\t}\n\n\tsetMinPlayers(amount: number) {\n\t\tif (this.state !== 'setup') {\n\t\t\tthrow new Chat.ErrorMessage(`The minimum number of players cannot be changed after the auction has started.`);\n\t\t}\n\t\tif (!amount || amount > 30) {\n\t\t\tthrow new Chat.ErrorMessage(`The minimum number of players must be between 1 and 30.`);\n\t\t}\n\t\tthis.minPlayers = amount;\n\t}\n\n\tsetMaxPlayers(amount: number) {\n\t\tif (this.type === 'snake') throw new Chat.ErrorMessage(`You only need to set minplayers for snake drafts.`);\n\t\tif (this.state !== 'setup') {\n\t\t\tthrow new Chat.ErrorMessage(`The maximum number of players cannot be changed after the auction has started.`);\n\t\t}\n\t\tthis.maxPlayers = amount;\n\t}\n\n\tsetNomTimeLimit(seconds: number) {\n\t\tif (this.state !== 'setup') {\n\t\t\tthrow new Chat.ErrorMessage(`The nomination time limit cannot be changed after the auction has started.`);\n\t\t}\n\t\tif (isNaN(seconds) || (seconds && (seconds < 7 || seconds > 300))) {\n\t\t\tthrow new Chat.ErrorMessage(`The nomination time limit must be between 7 and 300 seconds.`);\n\t\t}\n\t\tthis.nomTimeLimit = this.nomTimeRemaining = seconds;\n\t}\n\n\tsetBidTimeLimit(seconds: number) {\n\t\tif (this.state !== 'setup') {\n\t\t\tthrow new Chat.ErrorMessage(`The bid time limit cannot be changed after the auction has started.`);\n\t\t}\n\t\tif (!seconds || seconds < 7 || seconds > 120) {\n\t\t\tthrow new Chat.ErrorMessage(`The bid time limit must be between 7 and 120 seconds.`);\n\t\t}\n\t\tthis.bidTimeLimit = this.bidTimeRemaining = seconds;\n\t}\n\n\tsetType(auctionType: string) {\n\t\tif (this.state !== 'setup') {\n\t\t\tthrow new Chat.ErrorMessage(`The auction type cannot be changed after the auction has started.`);\n\t\t}\n\t\tif (!['auction', 'blind', 'snake'].includes(toID(auctionType))) {\n\t\t\tthrow new Chat.ErrorMessage(`Invalid auction type \"${auctionType}\". Valid types are \"auction\", \"blind\", and \"snake\".`);\n\t\t}\n\t\tthis.type = toID(auctionType) as 'auction' | 'blind' | 'snake';\n\t\tthis.nomTimeLimit = this.nomTimeRemaining = this.type === 'snake' ? 60 : 0;\n\t\tthis.bidTimeLimit = this.bidTimeRemaining = this.type === 'blind' ? 30 : 10;\n\t}\n\n\tgetUndraftedPlayers() {\n\t\treturn [...this.auctionPlayers.values()].filter(p => !p.team);\n\t}\n\n\tgetDraftedPlayers() {\n\t\treturn [...this.auctionPlayers.values()].filter(p => p.team);\n\t}\n\n\timportPlayers(data: string) {\n\t\tif (this.state !== 'setup') {\n\t\t\tthrow new Chat.ErrorMessage(`Player lists cannot be imported after the auction has started.`);\n\t\t}\n\t\tconst rows = data.replace('\\r', '').split('\\n');\n\t\tconst tierNames = rows.shift()!.split('\\t').slice(1);\n\t\tif (tierNames.some(tier => tier.length > 30)) {\n\t\t\tthrow new Chat.ErrorMessage(`Tier names must be 30 characters or less.`);\n\t\t}\n\n\t\tconst playerList = new Map<string, Player>();\n\t\tfor (const row of rows) {\n\t\t\tconst tiersPlayed = [];\n\t\t\tconst tiersNotPlayed = [];\n\t\t\tconst [name, ...tierData] = row.split('\\t');\n\t\t\tfor (let i = 0; i < tierData.length; i++) {\n\t\t\t\tswitch (tierData[i].trim().toLowerCase()) {\n\t\t\t\tcase 'y':\n\t\t\t\t\tif (!tierNames[i]) throw new Chat.ErrorMessage(`Invalid tier data found in the pastebin.`);\n\t\t\t\t\ttiersPlayed.push(tierNames[i]);\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'n':\n\t\t\t\t\tif (!tierNames[i]) throw new Chat.ErrorMessage(`Invalid tier data found in the pastebin.`);\n\t\t\t\t\ttiersNotPlayed.push(tierNames[i]);\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (name.length > 25) throw new Chat.ErrorMessage(`Player names must be 25 characters or less.`);\n\t\t\tconst player: Player = {\n\t\t\t\tid: toID(name),\n\t\t\t\tname: name.trim(),\n\t\t\t\tprice: 0,\n\t\t\t\ttiersPlayed,\n\t\t\t\ttiersNotPlayed,\n\t\t\t};\n\t\t\tplayerList.set(player.id, player);\n\t\t}\n\t\tthis.auctionPlayers = playerList;\n\t}\n\n\taddAuctionPlayer(name: string, tiersPlayed: string[] = [], tiersNotPlayed: string[] = []) {\n\t\tif (this.state === 'bid') throw new Chat.ErrorMessage(`Players cannot be added during a nomination.`);\n\t\tif (name.length > 25) throw new Chat.ErrorMessage(`Player names must be 25 characters or less.`);\n\t\tif (tiersPlayed.some(tier => tier.length > 30) || tiersNotPlayed.some(tier => tier.length > 30)) {\n\t\t\tthrow new Chat.ErrorMessage(`Tier names must be 30 characters or less.`);\n\t\t}\n\t\tconst player: Player = {\n\t\t\tid: toID(name),\n\t\t\tname,\n\t\t\tprice: 0,\n\t\t\ttiersPlayed,\n\t\t\ttiersNotPlayed,\n\t\t};\n\t\tthis.auctionPlayers.set(player.id, player);\n\t\treturn player;\n\t}\n\n\tremoveAuctionPlayer(name: string) {\n\t\tif (this.state === 'bid') throw new Chat.ErrorMessage(`Players cannot be removed during a nomination.`);\n\t\tconst player = this.auctionPlayers.get(toID(name));\n\t\tif (!player) throw new Chat.ErrorMessage(`Player \"${name}\" not found.`);\n\t\tplayer.team?.removePlayer(player);\n\t\tthis.auctionPlayers.delete(player.id);\n\t\tif (this.state !== 'setup' && !this.getUndraftedPlayers().length) {\n\t\t\tthis.end('The auction has ended because there are no players remaining in the draft pool.');\n\t\t}\n\t\treturn player;\n\t}\n\n\tassignPlayer(name: string, teamName?: string) {\n\t\tif (this.state === 'bid') throw new Chat.ErrorMessage(`Players cannot be assigned during a nomination.`);\n\t\tconst player = this.auctionPlayers.get(toID(name)) || this.addAuctionPlayer(name);\n\t\tif (teamName) {\n\t\t\tconst team = this.teams.get(toID(teamName));\n\t\t\tif (!team) throw new Chat.ErrorMessage(`Team \"${teamName}\" not found.`);\n\t\t\tteam.addPlayer(player);\n\t\t\tif (this.state !== 'setup' && !this.getUndraftedPlayers().length) {\n\t\t\t\treturn this.end('The auction has ended because there are no players remaining in the draft pool.');\n\t\t\t}\n\t\t} else {\n\t\t\tplayer.team?.removePlayer(player);\n\t\t}\n\t}\n\n\taddTeam(name: string) {\n\t\tif (this.state !== 'setup') throw new Chat.ErrorMessage(`Teams cannot be added after the auction has started.`);\n\t\tif (name.length > 40) throw new Chat.ErrorMessage(`Team names must be 40 characters or less.`);\n\t\tconst team = new Team(name, this);\n\t\tthis.teams.set(team.id, team);\n\t\tconst teams = [...this.teams.values()];\n\t\tthis.queue = teams.concat(teams.slice().reverse());\n\t\treturn team;\n\t}\n\n\tremoveTeam(name: string) {\n\t\tif (this.state !== 'setup') throw new Chat.ErrorMessage(`Teams cannot be removed after the auction has started.`);\n\t\tconst team = this.teams.get(toID(name));\n\t\tif (!team) throw new Chat.ErrorMessage(`Team \"${name}\" not found.`);\n\t\tthis.queue = this.queue.filter(t => t !== team);\n\t\tthis.teams.delete(team.id);\n\t\treturn team;\n\t}\n\n\tsuspendTeam(name: string) {\n\t\tif (this.state === 'bid') throw new Chat.ErrorMessage(`Teams cannot be suspended during a nomination.`);\n\t\tconst team = this.teams.get(toID(name));\n\t\tif (!team) throw new Chat.ErrorMessage(`Team \"${name}\" not found.`);\n\t\tif (team.suspended) throw new Chat.ErrorMessage(`Team ${name} is already suspended.`);\n\t\tif (this.nominatingTeam === team) throw new Chat.ErrorMessage(`The nominating team cannot be suspended.`);\n\t\tteam.suspended = true;\n\t\treturn team;\n\t}\n\n\tunsuspendTeam(name: string) {\n\t\tif (this.state === 'bid') throw new Chat.ErrorMessage(`Teams cannot be unsuspended during a nomination.`);\n\t\tconst team = this.teams.get(toID(name));\n\t\tif (!team) throw new Chat.ErrorMessage(`Team \"${name}\" not found.`);\n\t\tif (!team.suspended) throw new Chat.ErrorMessage(`Team ${name} is not suspended.`);\n\t\tteam.suspended = false;\n\t\treturn team;\n\t}\n\n\taddManagers(teamName: string, users: string[]) {\n\t\tconst team = this.teams.get(toID(teamName));\n\t\tif (!team) throw new Chat.ErrorMessage(`Team \"${teamName}\" not found.`);\n\t\tconst problemUsers = users.filter(user => !toID(user) || toID(user).length > 18);\n\t\tif (problemUsers.length) {\n\t\t\tthrow new Chat.ErrorMessage(`Invalid usernames: ${problemUsers.join(', ')}`);\n\t\t}\n\t\tfor (const id of users.map(toID)) {\n\t\t\tconst manager = this.managers.get(id);\n\t\t\tif (!manager) {\n\t\t\t\tthis.managers.set(id, { id, team });\n\t\t\t} else {\n\t\t\t\tmanager.team = team;\n\t\t\t}\n\t\t}\n\t\treturn team;\n\t}\n\n\tremoveManagers(users: string[]) {\n\t\tconst problemUsers = users.filter(user => !this.managers.has(toID(user)));\n\t\tif (problemUsers.length) {\n\t\t\tthrow new Chat.ErrorMessage(`Invalid managers: ${problemUsers.join(', ')}`);\n\t\t}\n\t\tfor (const id of users.map(toID)) {\n\t\t\tthis.managers.delete(id);\n\t\t}\n\t}\n\n\taddCreditsToTeam(teamName: string, amount: number) {\n\t\tif (this.type === 'snake') throw new Chat.ErrorMessage(`Snake draft does not support credits.`);\n\t\tif (this.state === 'bid') throw new Chat.ErrorMessage(`Credits cannot be changed during a nomination.`);\n\t\tconst team = this.teams.get(toID(teamName));\n\t\tif (!team) throw new Chat.ErrorMessage(`Team \"${teamName}\" not found.`);\n\t\tconst newCredits = team.credits + amount;\n\t\tif (newCredits <= 0 || newCredits > 10000000) {\n\t\t\tthrow new Chat.ErrorMessage(`A team must have between 0 and 10,000,000 credits.`);\n\t\t}\n\t\tif (team.maxBid(newCredits) < this.minBid) {\n\t\t\tthrow new Chat.ErrorMessage(`A team must have enough credits to draft the minimum amount of players.`);\n\t\t}\n\t\tteam.credits = newCredits;\n\t\treturn team;\n\t}\n\n\tstart() {\n\t\tif (this.state !== 'setup') throw new Chat.ErrorMessage(`The auction has already started.`);\n\t\tif (this.teams.size < 2) throw new Chat.ErrorMessage(`The auction needs at least 2 teams to start.`);\n\t\tconst problemTeams = [...this.teams.values()].filter(t => t.maxBid() < this.minBid).map(t => t.name);\n\t\tif (problemTeams.length) {\n\t\t\tthrow new Chat.ErrorMessage(`The following teams do not have enough credits to draft the minimum amount of players: ${problemTeams.join(', ')}`);\n\t\t}\n\t\tthis.next();\n\t}\n\n\treset() {\n\t\tconst teams = [...this.teams.values()];\n\t\tfor (const team of teams) {\n\t\t\tteam.credits = this.startingCredits;\n\t\t\tteam.suspended = false;\n\t\t\tfor (const player of team.players) {\n\t\t\t\tdelete player.team;\n\t\t\t\tplayer.price = 0;\n\t\t\t}\n\t\t\tteam.players = [];\n\t\t}\n\t\tthis.lastQueue = null;\n\t\tthis.queue = teams.concat(teams.slice().reverse());\n\t\tthis.clearNomTimer();\n\t\tthis.clearBidTimer();\n\t\tthis.state = 'setup';\n\t\tthis.sendHTMLBox(this.generateAuctionTable());\n\t}\n\n\tnext() {\n\t\tthis.state = 'nom';\n\t\tif (!this.queue.filter(team => !team.isSuspended()).length) {\n\t\t\treturn this.end('The auction has ended because there are no teams remaining that can draft players.');\n\t\t}\n\t\tif (!this.getUndraftedPlayers().length) {\n\t\t\treturn this.end('The auction has ended because there are no players remaining in the draft pool.');\n\t\t}\n\t\tdo {\n\t\t\tthis.nominatingTeam = this.queue.shift()!;\n\t\t\tthis.queue.push(this.nominatingTeam);\n\t\t} while (this.nominatingTeam.isSuspended());\n\t\tthis.sendHTMLBox(this.generateAuctionTable());\n\t\tthis.sendMessage(`/html It is now <b>${Utils.escapeHTML(this.nominatingTeam.name)}</b>'s turn to nominate a player. Managers: ${this.nominatingTeam.getManagers().map(m => `<username class=\"username\">${Utils.escapeHTML(m)}</username>`).join(' ')}`);\n\t\tthis.startNomTimer();\n\t}\n\n\tnominate(user: User, target: string) {\n\t\tif (this.state !== 'nom') throw new Chat.ErrorMessage(`You cannot nominate players right now.`);\n\t\tconst manager = this.managers.get(user.id);\n\t\tif (!manager || manager.team !== this.nominatingTeam) this.checkOwner(user);\n\n\t\t// For undo\n\t\tthis.lastQueue = this.queue.slice();\n\t\tthis.lastQueue.unshift(this.lastQueue.pop()!);\n\n\t\tconst player = this.auctionPlayers.get(toID(target));\n\t\tif (!player) throw new Chat.ErrorMessage(`${target} is not a valid player.`);\n\t\tif (player.team) throw new Chat.ErrorMessage(`${player.name} has already been drafted.`);\n\t\tthis.clearNomTimer();\n\t\tthis.nominatedPlayer = player;\n\t\tif (this.type === 'snake') {\n\t\t\tthis.sendMessage(Utils.html`/html <b>${this.nominatingTeam.name}</b> drafted <username>${this.nominatedPlayer.name}</username>!`);\n\t\t\tthis.nominatingTeam.addPlayer(this.nominatedPlayer);\n\t\t\tthis.next();\n\t\t} else {\n\t\t\tthis.state = 'bid';\n\t\t\tthis.highestBid = this.minBid;\n\t\t\tthis.highestBidder = this.nominatingTeam;\n\t\t\tthis.sendMessage(Utils.html`/html <username class=\"username\">${user.name}</username> from team <b>${this.nominatingTeam.name}</b> has nominated <username>${player.name}</username> for auction!`);\n\t\t\tconst notifyMsg = Utils.html`|notify|${this.room.title} Auction|${player.name} has been nominated!`;\n\t\t\tfor (const currManager of this.managers.values()) {\n\t\t\t\tif (currManager.team === this.nominatingTeam) continue;\n\t\t\t\tconst curUser = Users.getExact(currManager.id);\n\t\t\t\tcurUser?.sendTo(this.room, notifyMsg);\n\t\t\t\tcurUser?.sendTo(this.room,\n\t\t\t\t\t`|raw|Send a message with the amount you want to bid (e.g. <code>.5</code> or <code>5</code> will place a bid of 5000)!`);\n\t\t\t}\n\t\t\tthis.sendBidInfo();\n\t\t\tthis.startBidTimer();\n\t\t}\n\t}\n\n\tbid(user: User, bid: number) {\n\t\tif (this.state !== 'bid') throw new Chat.ErrorMessage(`There are no players up for auction right now.`);\n\t\tconst team = this.managers.get(user.id)?.team;\n\t\tif (!team) throw new Chat.ErrorMessage(`Only managers can bid on players.`);\n\t\tif (team.isSuspended()) throw new Chat.ErrorMessage(`Your team is suspended and cannot place bids.`);\n\n\t\tif (bid > team.maxBid()) throw new Chat.ErrorMessage(`Your team cannot afford to bid that much.`);\n\n\t\tif (this.type === 'blind') {\n\t\t\tif (this.bidsPlaced.has(team)) throw new Chat.ErrorMessage(`Your team has already placed a bid.`);\n\t\t\tif (bid <= this.minBid) throw new Chat.ErrorMessage(`Your bid must be higher than the minimum bid.`);\n\n\t\t\tconst msg = `|c:|${Math.floor(Date.now() / 1000)}|&|/html Your team placed a bid of <b>${bid}</b> on <username>${Utils.escapeHTML(this.nominatedPlayer.name)}</username>.`;\n\t\t\tfor (const manager of this.managers.values()) {\n\t\t\t\tif (manager.team !== team) continue;\n\t\t\t\tUsers.getExact(manager.id)?.sendTo(this.room, msg);\n\t\t\t}\n\n\t\t\tif (bid > this.highestBid) {\n\t\t\t\tthis.highestBid = bid;\n\t\t\t\tthis.highestBidder = team;\n\t\t\t}\n\t\t\tthis.bidsPlaced.set(team, bid);\n\t\t\tif (this.bidsPlaced.size === this.teams.size) {\n\t\t\t\tthis.finishCurrentNom();\n\t\t\t}\n\t\t} else {\n\t\t\tif (bid <= this.highestBid) throw new Chat.ErrorMessage(`Your bid must be higher than the current bid.`);\n\t\t\tthis.highestBid = bid;\n\t\t\tthis.highestBidder = team;\n\t\t\tthis.sendBidInfo();\n\t\t\tthis.startBidTimer();\n\t\t}\n\t}\n\n\toverride onChatMessage(message: string, user: User) {\n\t\tif (this.state !== 'bid' || this.type !== 'blind') return;\n\t\tif (message.startsWith('.')) message = message.slice(1);\n\t\tif (Number(message.replace(',', '.'))) {\n\t\t\tthis.bid(user, parseCredits(message));\n\t\t\treturn '';\n\t\t}\n\t}\n\n\toverride onLogMessage(message: string, user: User) {\n\t\tif (this.state !== 'bid' || this.type === 'blind') return;\n\t\tif (message.startsWith('.')) message = message.slice(1);\n\t\tif (Number(message.replace(',', '.'))) {\n\t\t\tthis.room.update();\n\t\t\ttry {\n\t\t\t\tthis.bid(user, parseCredits(message));\n\t\t\t} catch (e: any) {\n\t\t\t\tif (e.name?.endsWith('ErrorMessage')) {\n\t\t\t\t\tuser.sendTo(this.room, Utils.html`|raw|<span class=\"message-error\">${e.message}</span>`);\n\t\t\t\t} else {\n\t\t\t\t\tuser.sendTo(this.room, `|raw|<span class=\"message-error\">An unexpected error occurred while placing your bid.</span>`);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tskipNom() {\n\t\tif (this.state !== 'nom') throw new Chat.ErrorMessage(`Nominations cannot be skipped right now.`);\n\t\tthis.nominatedPlayer = null!;\n\t\tthis.sendMessage(`**${this.nominatingTeam.name}**'s nomination turn has been skipped!`);\n\t\tthis.clearNomTimer();\n\t\tthis.next();\n\t}\n\n\tfinishCurrentNom() {\n\t\tif (this.type === 'blind') {\n\t\t\tlet buf = `<div class=\"ladder pad\"><table><tr><th>Team</th><th>Bid</th></tr>`;\n\t\t\tif (!this.bidsPlaced.has(this.nominatingTeam)) {\n\t\t\t\tbuf += Utils.html`<tr><td>${this.nominatingTeam.name}</td><td>${this.minBid}</td></tr>`;\n\t\t\t}\n\t\t\tfor (const [team, bid] of this.bidsPlaced) {\n\t\t\t\tbuf += Utils.html`<tr><td>${team.name}</td><td>${bid}</td></tr>`;\n\t\t\t}\n\t\t\tbuf += `</table></div>`;\n\t\t\tthis.sendHTMLBox(buf);\n\t\t\tthis.bidsPlaced.clear();\n\t\t}\n\t\tthis.sendMessage(Utils.html`/html <b>${this.highestBidder.name}</b> bought <username>${this.nominatedPlayer.name}</username> for <b>${this.highestBid}</b> credits!`);\n\t\tthis.highestBidder.addPlayer(this.nominatedPlayer, this.highestBid);\n\t\tthis.clearBidTimer();\n\t\tthis.next();\n\t}\n\n\tundoLastNom() {\n\t\tif (this.state !== 'nom') throw new Chat.ErrorMessage(`Nominations cannot be undone right now.`);\n\t\tif (!this.lastQueue) throw new Chat.ErrorMessage(`Only one nomination can be undone at a time.`);\n\t\tthis.queue = this.lastQueue;\n\t\tthis.lastQueue = null;\n\t\tif (this.nominatedPlayer) {\n\t\t\tthis.highestBidder.removePlayer(this.nominatedPlayer);\n\t\t\tthis.highestBidder.credits += this.highestBid;\n\t\t}\n\t\tthis.next();\n\t}\n\n\tclearNomTimer() {\n\t\tclearInterval(this.nomTimer);\n\t\tthis.nomTimeRemaining = this.nomTimeLimit;\n\t\tthis.room.add('|uhtmlchange|timer|');\n\t}\n\n\tstartNomTimer() {\n\t\tif (!this.nomTimeLimit) return;\n\t\tthis.clearNomTimer();\n\t\tthis.sendTimer(false, true);\n\t\tthis.nomTimer = setInterval(() => this.pokeNomTimer(), 1000);\n\t}\n\n\tclearBidTimer() {\n\t\tclearInterval(this.bidTimer);\n\t\tthis.bidTimeRemaining = this.bidTimeLimit;\n\t\tthis.room.add('|uhtmlchange|timer|');\n\t}\n\n\tstartBidTimer() {\n\t\tif (!this.bidTimeLimit) return;\n\t\tthis.clearBidTimer();\n\t\tthis.sendTimer();\n\t\tthis.bidTimer = setInterval(() => this.pokeBidTimer(), 1000);\n\t}\n\n\tpokeNomTimer() {\n\t\tthis.nomTimeRemaining--;\n\t\tif (!this.nomTimeRemaining) {\n\t\t\tthis.skipNom();\n\t\t} else {\n\t\t\tthis.sendTimer(true, true);\n\t\t\tif (this.nomTimeRemaining % 30 === 0 || [20, 10, 5].includes(this.nomTimeRemaining)) {\n\t\t\t\tthis.sendMessage(`/html <span class=\"message-error\">${this.nomTimeRemaining} seconds left!</span>`);\n\t\t\t}\n\t\t}\n\t}\n\n\tpokeBidTimer() {\n\t\tthis.bidTimeRemaining--;\n\t\tif (!this.bidTimeRemaining) {\n\t\t\tthis.finishCurrentNom();\n\t\t} else {\n\t\t\tthis.sendTimer(true);\n\t\t\tif (this.bidTimeRemaining % 30 === 0 || [20, 10, 5].includes(this.bidTimeRemaining)) {\n\t\t\t\tthis.sendMessage(`/html <span class=\"message-error\">${this.bidTimeRemaining} seconds left!</span>`);\n\t\t\t}\n\t\t}\n\t}\n\n\tend(message?: string) {\n\t\tthis.setEnded();\n\t\tthis.sendHTMLBox(this.generateAuctionTable());\n\t\tthis.sendHTMLBox(this.generatePriceList());\n\t\tif (message) this.sendMessage(message);\n\t\tthis.destroy();\n\t}\n\n\toverride destroy() {\n\t\tthis.clearNomTimer();\n\t\tthis.clearBidTimer();\n\t\tsuper.destroy();\n\t}\n}\n\nexport const commands: Chat.ChatCommands = {\n\tauction: {\n\t\tcreate(target, room, user) {\n\t\t\troom = this.requireRoom();\n\t\t\tthis.checkCan('minigame', null, room);\n\t\t\tif (room.game) throw new Chat.ErrorMessage(`There is already a game of ${room.game.title} in progress in this room.`);\n\t\t\tif (room.settings.auctionDisabled) throw new Chat.ErrorMessage('Auctions are currently disabled in this room.');\n\n\t\t\tlet startingCredits;\n\t\t\tif (target) {\n\t\t\t\tstartingCredits = parseCredits(target);\n\t\t\t\tif (startingCredits < 10000 || startingCredits > 10000000) {\n\t\t\t\t\tthrow new Chat.ErrorMessage(`Starting credits must be between 10,000 and 10,000,000.`);\n\t\t\t\t}\n\t\t\t}\n\t\t\tconst auction = new Auction(room, startingCredits);\n\t\t\tauction.addOwners([user.id]);\n\t\t\troom.game = auction;\n\t\t\tthis.addModAction(`An auction was created by ${user.name}.`);\n\t\t\tthis.modlog(`AUCTION CREATE`);\n\t\t},\n\t\tcreatehelp: [\n\t\t\t`/auction create [startingcredits] - Creates an auction. Requires: % @ # ~`,\n\t\t],\n\t\tstart(target, room, user) {\n\t\t\tconst auction = this.requireGame(Auction);\n\t\t\tauction.checkOwner(user);\n\n\t\t\tauction.start();\n\t\t\tthis.addModAction(`The auction was started by ${user.name}.`);\n\t\t\tthis.modlog(`AUCTION START`);\n\t\t},\n\t\treset(target, room, user) {\n\t\t\tconst auction = this.requireGame(Auction);\n\t\t\tauction.checkOwner(user);\n\n\t\t\tauction.reset();\n\t\t\tthis.addModAction(`The auction was reset by ${user.name}.`);\n\t\t\tthis.modlog(`AUCTION RESET`);\n\t\t},\n\t\tdelete: 'end',\n\t\tstop: 'end',\n\t\tend(target, room, user) {\n\t\t\tconst auction = this.requireGame(Auction);\n\t\t\tauction.checkOwner(user);\n\n\t\t\tauction.end();\n\t\t\tthis.addModAction(`The auction was ended by ${user.name}.`);\n\t\t\tthis.modlog('AUCTION END');\n\t\t},\n\t\tinfo: 'display',\n\t\tdisplay(target, room, user) {\n\t\t\tthis.runBroadcast();\n\t\t\tconst auction = this.requireGame(Auction);\n\t\t\tthis.sendReplyBox(auction.generateAuctionTable());\n\t\t},\n\t\tpricelist(target, room, user) {\n\t\t\tthis.runBroadcast();\n\t\t\tconst auction = this.requireGame(Auction);\n\t\t\tthis.sendReplyBox(auction.generatePriceList());\n\t\t},\n\t\tminbid(target, room, user) {\n\t\t\tconst auction = this.requireGame(Auction);\n\t\t\tauction.checkOwner(user);\n\n\t\t\tif (!target) return this.parse('/help auction minbid');\n\t\t\tconst amount = parseCredits(target);\n\t\t\tauction.setMinBid(amount);\n\t\t\tthis.addModAction(`${user.name} set the minimum bid to ${amount}.`);\n\t\t\tthis.modlog('AUCTION MINBID', null, `${amount}`);\n\t\t},\n\t\tminbidhelp: [\n\t\t\t`/auction minbid [amount] - Sets the minimum bid. Requires: # ~ auction owner`,\n\t\t],\n\t\tminplayers(target, room, user) {\n\t\t\tconst auction = this.requireGame(Auction);\n\t\t\tauction.checkOwner(user);\n\n\t\t\tif (!target) return this.parse('/help auction minplayers');\n\t\t\tconst amount = parseInt(target);\n\t\t\tauction.setMinPlayers(amount);\n\t\t\tthis.addModAction(`${user.name} set the minimum number of players to ${amount}.`);\n\t\t},\n\t\tminplayershelp: [\n\t\t\t`/auction minplayers [amount] - Sets the minimum number of players. Requires: # ~ auction owner`,\n\t\t],\n\t\tmaxplayers(target, room, user) {\n\t\t\tconst auction = this.requireGame(Auction);\n\t\t\tauction.checkOwner(user);\n\n\t\t\tif (!target) return this.parse('/help auction maxplayers');\n\t\t\tconst amount = parseInt(target);\n\t\t\tauction.setMaxPlayers(amount);\n\t\t\tthis.addModAction(`${user.name} set the maximum number of players to ${amount}.`);\n\t\t},\n\t\tmaxplayershelp: [\n\t\t\t`/auction maxplayers [amount] - Sets the maximum number of players. Requires: # ~ auction owner`,\n\t\t],\n\t\tnomtimer(target, room, user) {\n\t\t\tconst auction = this.requireGame(Auction);\n\t\t\tauction.checkOwner(user);\n\n\t\t\tif (!target) return this.parse('/help auction nomtimer');\n\t\t\tconst seconds = this.meansNo(target) ? 0 : parseInt(target);\n\t\t\tauction.setNomTimeLimit(seconds);\n\t\t\tthis.addModAction(`${user.name} set the nomination timer to ${seconds} seconds.`);\n\t\t},\n\t\tnomtimerhelp: [\n\t\t\t`/auction nomtimer [seconds/off] - Sets the nomination timer to [seconds] seconds or disables it. Requires: # ~ auction owner`,\n\t\t],\n\t\tbidtimer(target, room, user) {\n\t\t\tconst auction = this.requireGame(Auction);\n\t\t\tauction.checkOwner(user);\n\n\t\t\tif (!target) return this.parse('/help auction settimer');\n\t\t\tconst seconds = parseInt(target);\n\t\t\tauction.setBidTimeLimit(seconds);\n\t\t\tthis.addModAction(`${user.name} set the bid timer to ${seconds} seconds.`);\n\t\t},\n\t\tbidtimerhelp: [\n\t\t\t`/auction timer [seconds] - Sets the bid timer to [seconds] seconds. Requires: # ~ auction owner`,\n\t\t],\n\t\tsettype(target, room, user) {\n\t\t\tconst auction = this.requireGame(Auction);\n\t\t\tauction.checkOwner(user);\n\n\t\t\tif (!target) return this.parse('/help auction settype');\n\t\t\tauction.setType(target);\n\t\t\tthis.addModAction(`${user.name} set the auction type to ${toID(target)}.`);\n\t\t},\n\t\tsettypehelp: [\n\t\t\t`/auction settype [auction|blind|snake] - Sets the auction type. Requires: # ~ auction owner`,\n\t\t\t`- auction: Standard auction with credits and bidding.`,\n\t\t\t`- blind: Same as auction, but bids are hidden until the end of the nomination.`,\n\t\t\t`- snake: Standard snake draft with no credits or bidding.`,\n\t\t],\n\t\taddowner: 'addowners',\n\t\taddowners(target, room, user) {\n\t\t\tconst auction = this.requireGame(Auction);\n\t\t\tauction.checkOwner(user);\n\n\t\t\tconst owners = target.split(',').map(x => x.trim());\n\t\t\tif (!owners.length) return this.parse('/help auction addowners');\n\t\t\tauction.addOwners(owners);\n\t\t\tthis.addModAction(`${user.name} added ${Chat.toListString(owners.map(o => Users.getExact(o)!.name))} as auction owner${Chat.plural(owners.length)}.`);\n\t\t},\n\t\taddownershelp: [\n\t\t\t`/auction addowners [user1], [user2], ... - Adds users as auction owners. Requires: # ~ auction owner`,\n\t\t],\n\t\tremoveowner: 'removeowners',\n\t\tremoveowners(target, room, user) {\n\t\t\tconst auction = this.requireGame(Auction);\n\t\t\tauction.checkOwner(user);\n\n\t\t\tconst owners = target.split(',').map(x => x.trim());\n\t\t\tif (!owners.length) return this.parse('/help auction removeowners');\n\t\t\tauction.removeOwners(owners);\n\t\t\tthis.addModAction(`${user.name} removed ${Chat.toListString(owners.map(o => Users.getExact(o)?.name || o))} as auction owner${Chat.plural(owners.length)}.`);\n\t\t},\n\t\tremoveownershelp: [\n\t\t\t`/auction removeowners [user1], [user2], ... - Removes users as auction owners. Requires: # ~ auction owner`,\n\t\t],\n\t\tasync importplayers(target, room, user) {\n\t\t\tconst auction = this.requireGame(Auction);\n\t\t\tauction.checkOwner(user);\n\n\t\t\tif (!target) return this.parse('/help auction importplayers');\n\t\t\tif (!/^https?:\\/\\/pastebin\\.com\\/[a-zA-Z0-9]+$/.test(target)) {\n\t\t\t\tthrow new Chat.ErrorMessage('Invalid pastebin URL.');\n\t\t\t}\n\t\t\tlet data = '';\n\t\t\ttry {\n\t\t\t\tdata = await Net(`https://pastebin.com/raw/${target.split('/').pop()}`).get();\n\t\t\t} catch {}\n\t\t\tif (!data) throw new Chat.ErrorMessage('Error fetching data from pastebin.');\n\n\t\t\tauction.importPlayers(data);\n\t\t\tthis.addModAction(`${user.name} imported the player list from ${target}.`);\n\t\t},\n\t\timportplayershelp: [\n\t\t\t`/auction importplayers [pastebin url] - Imports a list of players from a pastebin. Requires: # ~ auction owner`,\n\t\t\t`The pastebin should be a list of tab-separated values with the first row containing tier names and subsequent rows containing the player names and either a 'y' or an 'n' in the column corresponding to the tier they prefer or do not play respectively.`,\n\t\t\t`See https://pastebin.com/jPTbJBva for an example.`,\n\t\t],\n\t\taddplayer(target, room, user) {\n\t\t\tconst auction = this.requireGame(Auction);\n\t\t\tauction.checkOwner(user);\n\n\t\t\tconst [playedPart, notPlayedPart] = target.split(\";\");\n\t\t\tconst tiersPlayed = playedPart.split(\",\").map(item => item.trim());\n\t\t\tconst tiersNotPlayed = notPlayedPart ? notPlayedPart.split(\",\").map(item => item.trim()) : [];\n\t\t\tconst name = tiersPlayed.shift();\n\n\t\t\tif (!name) return this.parse('/help auction addplayer');\n\t\t\tconst player = auction.addAuctionPlayer(name, tiersPlayed, tiersNotPlayed);\n\t\t\tthis.addModAction(`${user.name} added player ${player.name} to the auction.`);\n\t\t},\n\t\taddplayerhelp: [\n\t\t\t`/auction addplayer [name], [tierPlayed1], [tierPlayed2], ... ; [tierNotPlayed1], [tierNotPlayed2], ... - Adds a player to the auction. Requires: # ~ auction owner`,\n\t\t],\n\t\tremoveplayer(target, room, user) {\n\t\t\tconst auction = this.requireGame(Auction);\n\t\t\tauction.checkOwner(user);\n\n\t\t\tif (!target) return this.parse('/help auction removeplayer');\n\t\t\tconst player = auction.removeAuctionPlayer(target);\n\t\t\tthis.addModAction(`${user.name} removed player ${player.name} from the auction.`);\n\t\t},\n\t\tremoveplayerhelp: [\n\t\t\t`/auction removeplayer [name] - Removes a player from the auction. Requires: # ~ auction owner`,\n\t\t],\n\t\tassignplayer(target, room, user) {\n\t\t\tconst auction = this.requireGame(Auction);\n\t\t\tauction.checkOwner(user);\n\n\t\t\tconst [player, team] = target.split(',').map(x => x.trim());\n\t\t\tif (!player) return this.parse('/help auction assignplayer');\n\t\t\tif (team) {\n\t\t\t\tauction.assignPlayer(player, team);\n\t\t\t\tthis.addModAction(`${user.name} assigned player ${player} to team ${team}.`);\n\t\t\t} else {\n\t\t\t\tauction.assignPlayer(player);\n\t\t\t\tthis.sendReply(`${user.name} returned player ${player} to the draft pool.`);\n\t\t\t}\n\t\t},\n\t\tassignplayerhelp: [\n\t\t\t`/auction assignplayer [player], [team] - Assigns a player to a team. If team is blank, returns player to draft pool. Requires: # ~ auction owner`,\n\t\t],\n\t\taddteam(target, room, user) {\n\t\t\tconst auction = this.requireGame(Auction);\n\t\t\tauction.checkOwner(user);\n\n\t\t\tconst [name, ...managerNames] = target.split(',').map(x => x.trim());\n\t\t\tif (!name) return this.parse('/help auction addteam');\n\t\t\tconst team = auction.addTeam(name);\n\t\t\tthis.addModAction(`${user.name} added team ${team.name} to the auction.`);\n\t\t\tauction.addManagers(team.name, managerNames);\n\t\t},\n\t\taddteamhelp: [\n\t\t\t`/auction addteam [name], [manager1], [manager2], ... - Adds a team to the auction. Requires: # ~ auction owner`,\n\t\t],\n\t\tremoveteam(target, room, user) {\n\t\t\tconst auction = this.requireGame(Auction);\n\t\t\tauction.checkOwner(user);\n\n\t\t\tif (!target) return this.parse('/help auction removeteam');\n\t\t\tconst team = auction.removeTeam(target);\n\t\t\tthis.addModAction(`${user.name} removed team ${team.name} from the auction.`);\n\t\t},\n\t\tremoveteamhelp: [\n\t\t\t`/auction removeteam [team] - Removes a team from the auction. Requires: # ~ auction owner`,\n\t\t],\n\t\tsuspendteam(target, room, user) {\n\t\t\tconst auction = this.requireGame(Auction);\n\t\t\tauction.checkOwner(user);\n\n\t\t\tif (!target) return this.parse('/help auction suspendteam');\n\t\t\tconst team = auction.suspendTeam(target);\n\t\t\tthis.addModAction(`${user.name} suspended team ${team.name}.`);\n\t\t},\n\t\tsuspendteamhelp: [\n\t\t\t`/auction suspendteam [team] - Suspends a team from the auction. Requires: # ~ auction owner`,\n\t\t\t`Suspended teams have their nomination turns skipped and are not allowed to place bids.`,\n\t\t],\n\t\tunsuspendteam(target, room, user) {\n\t\t\tconst auction = this.requireGame(Auction);\n\t\t\tauction.checkOwner(user);\n\n\t\t\tif (!target) return this.parse('/help auction unsuspendteam');\n\t\t\tconst team = auction.unsuspendTeam(target);\n\t\t\tthis.addModAction(`${user.name} unsuspended team ${team.name}.`);\n\t\t},\n\t\tunsuspendteamhelp: [\n\t\t\t`/auction unsuspendteam [team] - Unsuspends a team from the auction. Requires: # ~ auction owner`,\n\t\t],\n\t\taddmanager: 'addmanagers',\n\t\taddmanagers(target, room, user) {\n\t\t\tconst auction = this.requireGame(Auction);\n\t\t\tauction.checkOwner(user);\n\n\t\t\tconst [teamName, ...managerNames] = target.split(',').map(x => x.trim());\n\t\t\tif (!teamName || !managerNames.length) return this.parse('/help auction addmanagers');\n\t\t\tconst team = auction.addManagers(teamName, managerNames);\n\t\t\tconst managers = managerNames.map(m => Users.getExact(m)?.name || toID(m));\n\t\t\tthis.addModAction(`${user.name} added ${Chat.toListString(managers)} as manager${Chat.plural(managers.length)} for team ${team.name}.`);\n\t\t},\n\t\taddmanagershelp: [\n\t\t\t`/auction addmanagers [team], [user1], [user2], ... - Adds users as managers to a team. Requires: # ~ auction owner`,\n\t\t],\n\t\tremovemanager: 'removemanagers',\n\t\tremovemanagers(target, room, user) {\n\t\t\tconst auction = this.requireGame(Auction);\n\t\t\tauction.checkOwner(user);\n\n\t\t\tif (!target) return this.parse('/help auction removemanagers');\n\t\t\tconst managerNames = target.split(',').map(x => x.trim());\n\t\t\tauction.removeManagers(managerNames);\n\t\t\tconst managers = managerNames.map(m => Users.getExact(m)?.name || toID(m));\n\t\t\tthis.addModAction(`${user.name} removed ${Chat.toListString(managers)} as manager${Chat.plural(managers.length)}.`);\n\t\t},\n\t\tremovemanagershelp: [\n\t\t\t`/auction removemanagers [user1], [user2], ... - Removes users as managers. Requires: # ~ auction owner`,\n\t\t],\n\t\taddcredits(target, room, user) {\n\t\t\tconst auction = this.requireGame(Auction);\n\t\t\tauction.checkOwner(user);\n\n\t\t\tconst [teamName, amount] = target.split(',').map(x => x.trim());\n\t\t\tif (!teamName || !amount) return this.parse('/help auction addcredits');\n\t\t\tconst credits = parseCredits(amount);\n\t\t\tconst team = auction.addCreditsToTeam(teamName, credits);\n\t\t\tthis.addModAction(`${user.name} ${credits < 0 ? 'removed' : 'added'} ${Math.abs(credits)} credits ${credits < 0 ? 'from' : 'to'} team ${team.name}.`);\n\t\t},\n\t\taddcreditshelp: [\n\t\t\t`/auction addcredits [team], [amount] - Adds credits to a team. Requires: # ~ auction owner`,\n\t\t],\n\t\tnom: 'nominate',\n\t\tnominate(target, room, user) {\n\t\t\tconst auction = this.requireGame(Auction);\n\t\t\tif (!target) return this.parse('/help auction nominate');\n\t\t\tauction.nominate(user, target);\n\t\t},\n\t\tnominatehelp: [\n\t\t\t`/auction nominate OR /nom [player] - Nominates a player for auction.`,\n\t\t],\n\t\tskip: 'skipnom',\n\t\tskipnom(target, room, user) {\n\t\t\tconst auction = this.requireGame(Auction);\n\t\t\tauction.checkOwner(user);\n\n\t\t\tauction.skipNom();\n\t\t\tthis.addModAction(`${user.name} skipped the previous nomination.`);\n\t\t},\n\t\tundo(target, room, user) {\n\t\t\tconst auction = this.requireGame(Auction);\n\t\t\tauction.checkOwner(user);\n\n\t\t\tauction.undoLastNom();\n\t\t\tthis.addModAction(`${user.name} undid the last nomination.`);\n\t\t},\n\t\tdisable(target, room) {\n\t\t\troom = this.requireRoom();\n\t\t\tthis.checkCan('gamemanagement', null, room);\n\t\t\tif (room.settings.auctionDisabled) {\n\t\t\t\tthrow new Chat.ErrorMessage('Auctions are already disabled.');\n\t\t\t}\n\t\t\troom.settings.auctionDisabled = true;\n\t\t\troom.saveSettings();\n\t\t\tthis.sendReply('Auctions have been disabled for this room.');\n\t\t},\n\t\tenable(target, room) {\n\t\t\troom = this.requireRoom();\n\t\t\tthis.checkCan('gamemanagement', null, room);\n\t\t\tif (!room.settings.auctionDisabled) {\n\t\t\t\tthrow new Chat.ErrorMessage('Auctions are already enabled.');\n\t\t\t}\n\t\t\tdelete room.settings.auctionDisabled;\n\t\t\troom.saveSettings();\n\t\t\tthis.sendReply('Auctions have been enabled for this room.');\n\t\t},\n\t\tongoing: 'running',\n\t\trunning() {\n\t\t\tif (!this.runBroadcast()) return;\n\t\t\tconst runningAuctions = [...Rooms.rooms.values()].filter(r => r.getGame(Auction)).map(r => r.title);\n\t\t\tthis.sendReply(`Running auctions: ${runningAuctions.join(', ') || 'None'}`);\n\t\t},\n\t\t'': 'help',\n\t\thelp() {\n\t\t\tthis.parse('/help auction');\n\t\t},\n\t},\n\tauctionhelp() {\n\t\tif (!this.runBroadcast()) return;\n\t\tthis.sendReplyBox(\n\t\t\t`Auction commands<br/>` +\n\t\t\t`- create [startingcredits]: Creates an auction.<br/>` +\n\t\t\t`- start: Starts the auction.<br/>` +\n\t\t\t`- reset: Resets the auction.<br/>` +\n\t\t\t`- end: Ends the auction.<br/>` +\n\t\t\t`- running: Shows a list of rooms with running auctions.<br/>` +\n\t\t\t`- display: Displays the current state of the auction.<br/>` +\n\t\t\t`- pricelist: Displays the current prices of players by team.<br/>` +\n\t\t\t`- nom [player]: Nominates a player for auction.<br/>` +\n\t\t\t`You may use /nom directly without the /auction prefix.<br/>` +\n\t\t\t`During the bidding phase, all numbers that are sent in the chat will be treated as bids.<br/><br/>` +\n\t\t\t`<details class=\"readmore\"><summary>Configuration Commands</summary>` +\n\t\t\t`- minbid [amount]: Sets the minimum bid.<br/>` +\n\t\t\t`- minplayers [amount]: Sets the minimum number of players.<br/>` +\n\t\t\t`- nomtimer [seconds]: Sets the nomination timer to [seconds] seconds.<br/>` +\n\t\t\t`- bidtimer [seconds]: Sets the bid timer to [seconds] seconds.<br/>` +\n\t\t\t`- settype [auction|blind|snake]: Sets the auction type.<br/>` +\n\t\t\t`- addowners [user1], [user2], ...: Adds users as auction owners.<br/>` +\n\t\t\t`- removeowners [user1], [user2], ...: Removes users as auction owners.<br/>` +\n\t\t\t`- importplayers [pastebin url]: Imports a list of players from a pastebin.<br/>` +\n\t\t\t`- addplayer [name], [tier1], [tier2], ...: Adds a player to the auction.<br/>` +\n\t\t\t`- removeplayer [name]: Removes a player from the auction.<br/>` +\n\t\t\t`- assignplayer [player], [team]: Assigns a player to a team. If team is blank, returns player to draft pool.<br/>` +\n\t\t\t`- addteam [name], [manager1], [manager2], ...: Adds a team to the auction.<br/>` +\n\t\t\t`- removeteam [name]: Removes the given team from the auction.<br/>` +\n\t\t\t`- suspendteam [name]: Suspends the given team from the auction.<br/>` +\n\t\t\t`- unsuspendteam [name]: Unsuspends the given team from the auction.<br/>` +\n\t\t\t`- addmanagers [team], [user1], [user2], ...: Adds users as managers to a team.<br/>` +\n\t\t\t`- removemanagers [user1], [user2], ...: Removes users as managers..<br/>` +\n\t\t\t`- addcredits [team], [amount]: Adds credits to a team.<br/>` +\n\t\t\t`- skipnom: Skips the current nomination.<br/>` +\n\t\t\t`- undo: Undoes the last nomination.<br/>` +\n\t\t\t`- [enable/disable]: Enables or disables auctions from being started in a room.<br/>` +\n\t\t\t`</details>`\n\t\t);\n\t},\n\tnom(target) {\n\t\tthis.parse(`/auction nominate ${target}`);\n\t},\n\tbid() {\n\t\tthrow new Chat.ErrorMessage(`/bid is no longer supported. Send the amount by itself in the chat to place your bid.`);\n\t},\n\toverpay() {\n\t\tthis.requireGame(Auction);\n\t\tthis.checkChat();\n\t\treturn '/announce OVERPAY!';\n\t},\n};\n\nexport const roomSettings: Chat.SettingsHandler = room => ({\n\tlabel: \"Auction\",\n\tpermission: 'editroom',\n\toptions: [\n\t\t[`disabled`, room.settings.auctionDisabled || 'auction disable'],\n\t\t[`enabled`, !room.settings.auctionDisabled || 'auction enable'],\n\t],\n});\n"],
  "mappings": ";;;;;;;;;;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAOA,iBAA2B;AAgB3B,MAAM,KAAK;AAAA,EAOV,YAAY,MAAc,SAAkB;AAC3C,SAAK,KAAK,KAAK,IAAI;AACnB,SAAK,OAAO;AACZ,SAAK,UAAU,CAAC;AAChB,SAAK,UAAU,QAAQ;AACvB,SAAK,YAAY;AACjB,SAAK,UAAU;AAAA,EAChB;AAAA,EAEA,cAAc;AACb,WAAO,CAAC,GAAG,KAAK,QAAQ,SAAS,OAAO,CAAC,EACvC,OAAO,OAAK,EAAE,SAAS,IAAI,EAC3B,IAAI,OAAK,MAAM,SAAS,EAAE,EAAE,GAAG,QAAQ,EAAE,EAAE;AAAA,EAC9C;AAAA,EAEA,UAAU,QAAgB,QAAQ,GAAG;AACpC,WAAO,MAAM,aAAa,MAAM;AAChC,SAAK,QAAQ,KAAK,MAAM;AACxB,SAAK,WAAW;AAChB,WAAO,OAAO;AACd,WAAO,QAAQ;AAAA,EAChB;AAAA,EAEA,aAAa,QAAgB;AAC5B,UAAM,SAAS,KAAK,QAAQ,QAAQ,MAAM;AAC1C,QAAI,WAAW,GAAI;AACnB,SAAK,QAAQ,OAAO,QAAQ,CAAC;AAC7B,WAAO,OAAO;AACd,WAAO,QAAQ;AAAA,EAChB;AAAA,EAEA,cAAc;AACb,WAAO,KAAK,cACX,KAAK,QAAQ,SAAS,UACrB,KAAK,QAAQ,UAAU,KAAK,QAAQ,aAEnC,KAAK,UAAU,KAAK,QAAQ,UAC3B,KAAK,QAAQ,cAAc,KAAK,QAAQ,UAAU,KAAK,QAAQ;AAAA,EAGpE;AAAA,EAEA,OAAO,UAAU,KAAK,SAAS;AAC9B,WAAO,UAAU,KAAK,QAAQ,SAAS,KAAK,IAAI,GAAG,KAAK,QAAQ,SAAS,KAAK,QAAQ,aAAa,CAAC;AAAA,EACrG;AACD;AAEA,SAAS,aAAa,QAAgB;AACrC,MAAI,UAAU,OAAO,OAAO,QAAQ,KAAK,GAAG,CAAC;AAC7C,MAAI,KAAK,IAAI,OAAO,IAAI,IAAK,YAAW;AACxC,MAAI,CAAC,WAAW,UAAU,QAAQ,GAAG;AACpC,UAAM,IAAI,KAAK,aAAa,kDAAkD;AAAA,EAC/E;AACA,SAAO;AACR;AAEO,MAAM,gBAAgB,MAAM,eAAe;AAAA,EA4BjD,YAAY,MAAY,kBAAkB,KAAQ;AACjD,UAAM,IAAI;AA5BX,SAAkB,SAAS;AAC3B,kBAAS,oBAAI,IAAQ;AACrB,iBAAQ,oBAAI,IAAkB;AAC9B,oBAAW,oBAAI,IAAqB;AACpC,0BAAiB,oBAAI,IAAoB;AAGzC,kBAAS;AACT,sBAAa;AACb,sBAAa;AACb,gBAAsC;AAEtC,qBAA2B;AAC3B,iBAAgB,CAAC;AACjB,oBAA2B;AAC3B,wBAAe;AACf,4BAAmB;AACnB,oBAA2B;AAC3B,wBAAe;AACf,4BAAmB;AACnB,0BAAuB;AACvB,2BAA0B;AAC1B,yBAAsB;AACtB,sBAAa;AAEb;AAAA,sBAAa,oBAAI,IAAkB;AACnC,iBAAiC;AAGhC,SAAK,QAAQ;AACb,SAAK,kBAAkB;AAAA,EACxB;AAAA,EAEA,YAAY,SAAiB;AAC5B,SAAK,KAAK,IAAI,QAAQ,OAAO,EAAE,EAAE,OAAO;AAAA,EACzC;AAAA,EAEA,YAAY,aAAqB;AAChC,SAAK,KAAK,IAAI,8BAA8B,WAAW,QAAQ,EAAE,OAAO;AAAA,EACzE;AAAA,EAEA,WAAW,MAAY;AACtB,QAAI,CAAC,KAAK,OAAO,IAAI,KAAK,EAAE,KAAK,CAAC,MAAM,KAAK,cAAc,MAAM,WAAW,MAAM,KAAK,IAAI,GAAG;AAC7F,YAAM,IAAI,KAAK,aAAa,mDAAmD;AAAA,IAChF;AAAA,EACD;AAAA,EAEA,UAAU,OAAiB;AAC1B,eAAW,QAAQ,OAAO;AACzB,YAAM,OAAO,MAAM,SAAS,IAAI;AAChC,UAAI,CAAC,KAAM,OAAM,IAAI,KAAK,aAAa,SAAS,IAAI,cAAc;AAClE,UAAI,KAAK,OAAO,IAAI,KAAK,EAAE,EAAG,OAAM,IAAI,KAAK,aAAa,GAAG,KAAK,IAAI,+BAA+B;AACrG,WAAK,OAAO,IAAI,KAAK,EAAE;AAAA,IACxB;AAAA,EACD;AAAA,EAEA,aAAa,OAAiB;AAC7B,eAAW,QAAQ,OAAO;AACzB,YAAM,KAAK,KAAK,IAAI;AACpB,UAAI,CAAC,KAAK,OAAO,IAAI,EAAE,EAAG,OAAM,IAAI,KAAK,aAAa,SAAS,IAAI,4BAA4B;AAC/F,WAAK,OAAO,OAAO,EAAE;AAAA,IACtB;AAAA,EACD;AAAA,EAEA,qBAAqB,SAA8B,MAAM,QAAQ,QAAQ,YAAY,OAAO;AAC3F,QAAI,MAAM;AACV,WAAO,QAAQ,MAAM,GAAG,GAAG,EAAE,IAAI,OAAK;AACrC,UAAI,OAAO,MAAM,UAAU;AAC1B,eAAO,aAAa,YAAY,sBAAsB,EAAE,IAAI,iBAAM,WAAW,EAAE,IAAI,CAAC;AAAA,MACrF;AACA,aAAO,YAAY,YAAY,sBAAsB,EAAE,IAAI,iBAAM,WAAW,CAAC,CAAC;AAAA,IAC/E,CAAC,EAAE,KAAK,IAAI;AACZ,QAAI,QAAQ,SAAS,KAAK;AACzB,aAAO,iBAAiB,QAAQ,MAAM,GAAG,EAAE,IAAI,OAAK,iBAAM,WAAW,OAAO,MAAM,WAAW,EAAE,OAAO,CAAC,CAAC,EAAE,KAAK,IAAI,CAAC,OAAO,QAAQ,SAAS,GAAG;AAAA,IAChJ;AACA,WAAO;AACP,WAAO;AAAA,EACR;AAAA,EAEA,oBAAoB;AACnB,UAAM,UAAU,iBAAM,OAAO,KAAK,kBAAkB,GAAG,OAAK,CAAC,EAAE,KAAK;AACpE,QAAI,MAAM;AACV,QAAI,eAAe;AAEnB,eAAW,QAAQ,KAAK,MAAM,OAAO,GAAG;AACvC,UAAIA,SAAQ;AACZ,UAAIC,eAAc;AAClB,iBAAW,UAAU,QAAQ,OAAO,OAAK,EAAE,SAAS,IAAI,GAAG;AAC1D,QAAAD,UAAS,iBAAM,eAAe,OAAO,IAAI,YAAY,OAAO,KAAK;AACjE,QAAAC,gBAAe,WAAW,OAAO,IAAI,YAAY,OAAO,KAAK;AAAA,MAC9D;AACA,MAAAD,UAAS;AACT,MAAAC,gBAAe;AAEf,aAAO,qBAAqB,iBAAM,WAAW,KAAK,IAAI,CAAC,aAAaD,MAAK;AACzE,UAAI,KAAK,MAAO,iBAAgB,aAAa,KAAK,IAAI,KAAKC,YAAW;AAAA,IACvE;AAEA,QAAI,QAAQ;AACZ,QAAI,cAAc;AAClB,eAAW,UAAU,SAAS;AAC7B,eAAS,iBAAM,eAAe,OAAO,IAAI,YAAY,OAAO,KAAK,YAAY,OAAO,KAAM,IAAI;AAC9F,qBAAe,WAAW,OAAO,IAAI,YAAY,OAAO,KAAK,YAAY,OAAO,KAAM,IAAI;AAAA,IAC3F;AACA,aAAS;AACT,mBAAe;AAEf,WAAO,kCAAkC,KAAK;AAC9C,QAAI,KAAK,OAAO;AACf,sBAAgB,kBAAkB,WAAW;AAC7C,aAAO,iBAAM,wBAAwB,YAAY;AAAA,IAClD;AAEA,WAAO;AAAA,EACR;AAAA,EAEA,uBAAuB;AACtB,UAAM,QAAQ,KAAK,MAAM,OAAO,UAAQ,CAAC,KAAK,YAAY,CAAC;AAC3D,UAAM,qBAAqB,MAAM,YAAY,MAAM,CAAC,CAAC,IAAI;AACzD,QAAI,MAAM,0DAA0D,CAAC,KAAK,QAAQ,6BAA6B,EAAE,gBAAgB,KAAK,SAAS,UAAU,qBAAqB,EAAE;AAChL,eAAW,QAAQ,KAAK,MAAM,OAAO,GAAG;AACvC,aAAO;AACP,UAAI,CAAC,KAAK,OAAO;AAChB,YAAI,KAAK,MAAM,QAAQ,IAAI,IAAI;AAC/B,YAAI,KAAK,MAAM,YAAY,IAAI,IAAI;AACnC,YAAI,KAAK,oBAAoB;AAC5B,WAAC,IAAI,EAAE,IAAI,CAAC,IAAI,EAAE;AAAA,QACnB;AACA,eAAO,0CAA0C,MAAM,GAAG,+CAA+C,MAAM,GAAG;AAAA,MACnH;AACA,aAAO,2CAA2C,iBAAM,WAAW,KAAK,IAAI,CAAC,iBAAiB,KAAK,qBAAqB,KAAK,YAAY,GAAG,GAAG,IAAI,CAAC;AACpJ,UAAI,KAAK,SAAS,SAAS;AAC1B,eAAO,mCAAmC,KAAK,QAAQ,eAAe,CAAC,GAAG,KAAK,OAAO,KAAK,KAAK,SAAS,8CAA8C,KAAK,OAAO,EAAE,eAAe,CAAC,YAAY,EAAE;AAAA,MACpM;AACA,aAAO,cAAc,KAAK,QAAQ,IAAI,OAAK,iBAAM,WAAW,EAAE,IAAI,CAAC,EAAE,KAAK,IAAI,CAAC,iCAAiC,CAAC,KAAK,QAAQ,uDAAuD,EAAE,gCAAgC,KAAK,QAAQ,MAAM,UAAU,KAAK,qBAAqB,KAAK,OAAO,CAAC;AAC3R,aAAO;AAAA,IACR;AACA,WAAO;AAEP,UAAM,UAAU,iBAAM,OAAO,KAAK,oBAAoB,GAAG,OAAK,EAAE,IAAI;AACpE,UAAM,aAAa,oBAAI,IAAsB;AAC7C,eAAW,UAAU,SAAS;AAC7B,iBAAW,QAAQ,OAAO,aAAa;AACtC,YAAI,CAAC,WAAW,IAAI,IAAI,EAAG,YAAW,IAAI,MAAM,CAAC,CAAC;AAClD,mBAAW,IAAI,IAAI,EAAG,KAAK,MAAM;AAAA,MAClC;AAAA,IACD;AACA,UAAM,cAAc,CAAC,GAAG,WAAW,KAAK,CAAC,EAAE,KAAK;AAChD,QAAI,YAAY,QAAQ;AACvB,aAAO,wCAAwC,QAAQ,MAAM;AAC7D,aAAO,kCAAkC,KAAK,qBAAqB,OAAO,CAAC;AAC3E,aAAO;AACP,iBAAW,QAAQ,aAAa;AAC/B,cAAM,cAAc,WAAW,IAAI,IAAI;AACvC,eAAO,yBAAyB,iBAAM,WAAW,IAAI,CAAC,KAAK,YAAY,MAAM,cAAc,KAAK,qBAAqB,WAAW,CAAC;AAAA,MAClI;AACA,aAAO;AAAA,IACR,OAAO;AACN,aAAO,wCAAwC,QAAQ,MAAM,cAAc,KAAK,qBAAqB,OAAO,CAAC;AAAA,IAC9G;AACA,WAAO;AACP,WAAO,qBAAqB,KAAK,OAAO,eAAe,CAAC;AACxD,WAAO,kCAAkC,KAAK,UAAU;AACxD,QAAI,KAAK,SAAS,QAAS,QAAO,kCAAkC,KAAK,cAAc,KAAK;AAC5F,WAAO,mBAAmB,KAAK,eAAe,GAAG,KAAK,YAAY,MAAM,KAAK;AAC7E,QAAI,KAAK,SAAS,QAAS,QAAO,mBAAmB,KAAK,YAAY;AACtE,WAAO,sBAAsB,KAAK,IAAI;AACtC,WAAO;AACP,WAAO;AAAA,EACR;AAAA,EAEA,cAAc;AACb,QAAI,MAAM;AACV,WAAO,iBAAM,yBAAyB,KAAK,gBAAgB,IAAI;AAC/D,QAAI,KAAK,SAAS,UAAW,QAAO,eAAe,KAAK,UAAU;AAClE,QAAI,KAAK,SAAS,UAAW,QAAO,iBAAM,sBAAsB,KAAK,cAAc,IAAI;AACvF,WAAO,iBAAM,wBAAwB,KAAK,gBAAgB,YAAY,SAAS,GAAG,KAAK,gBAAgB,YAAY,KAAK,IAAI,CAAC,KAAK,KAAK;AACvI,WAAO,iBAAM,4BAA4B,KAAK,gBAAgB,eAAe,SAAS,GAAG,KAAK,gBAAgB,eAAe,KAAK,IAAI,CAAC,KAAK,KAAK;AACjJ,WAAO;AACP,SAAK,KAAK,IAAI,cAAc,KAAK,gBAAgB,EAAE,IAAI,GAAG,EAAE,EAAE,OAAO;AAAA,EACtE;AAAA,EAEA,UAAU,SAAS,OAAO,MAAM,OAAO;AACtC,QAAI,MAAM;AACV,WAAO,yCAAyC,KAAK,kBAAkB,MAAM,KAAK,mBAAmB,KAAK,oBAAoB,KAAM,EAAE,QAAQ,KAAK,CAAC,EAAE,MAAM,CAAC,CAAC;AAC9J,WAAO;AACP,SAAK,KAAK,IAAI,SAAS,SAAS,WAAW,EAAE,UAAU,GAAG,EAAE,EAAE,OAAO;AAAA,EACtE;AAAA,EAEA,UAAU,QAAgB;AACzB,QAAI,KAAK,UAAU,SAAS;AAC3B,YAAM,IAAI,KAAK,aAAa,kEAAkE;AAAA,IAC/F;AACA,QAAI,SAAS,IAAQ,OAAM,IAAI,KAAK,aAAa,0CAA0C;AAC3F,SAAK,SAAS;AAAA,EACf;AAAA,EAEA,cAAc,QAAgB;AAC7B,QAAI,KAAK,UAAU,SAAS;AAC3B,YAAM,IAAI,KAAK,aAAa,gFAAgF;AAAA,IAC7G;AACA,QAAI,CAAC,UAAU,SAAS,IAAI;AAC3B,YAAM,IAAI,KAAK,aAAa,yDAAyD;AAAA,IACtF;AACA,SAAK,aAAa;AAAA,EACnB;AAAA,EAEA,cAAc,QAAgB;AAC7B,QAAI,KAAK,SAAS,QAAS,OAAM,IAAI,KAAK,aAAa,mDAAmD;AAC1G,QAAI,KAAK,UAAU,SAAS;AAC3B,YAAM,IAAI,KAAK,aAAa,gFAAgF;AAAA,IAC7G;AACA,SAAK,aAAa;AAAA,EACnB;AAAA,EAEA,gBAAgB,SAAiB;AAChC,QAAI,KAAK,UAAU,SAAS;AAC3B,YAAM,IAAI,KAAK,aAAa,4EAA4E;AAAA,IACzG;AACA,QAAI,MAAM,OAAO,KAAM,YAAY,UAAU,KAAK,UAAU,MAAO;AAClE,YAAM,IAAI,KAAK,aAAa,8DAA8D;AAAA,IAC3F;AACA,SAAK,eAAe,KAAK,mBAAmB;AAAA,EAC7C;AAAA,EAEA,gBAAgB,SAAiB;AAChC,QAAI,KAAK,UAAU,SAAS;AAC3B,YAAM,IAAI,KAAK,aAAa,qEAAqE;AAAA,IAClG;AACA,QAAI,CAAC,WAAW,UAAU,KAAK,UAAU,KAAK;AAC7C,YAAM,IAAI,KAAK,aAAa,uDAAuD;AAAA,IACpF;AACA,SAAK,eAAe,KAAK,mBAAmB;AAAA,EAC7C;AAAA,EAEA,QAAQ,aAAqB;AAC5B,QAAI,KAAK,UAAU,SAAS;AAC3B,YAAM,IAAI,KAAK,aAAa,mEAAmE;AAAA,IAChG;AACA,QAAI,CAAC,CAAC,WAAW,SAAS,OAAO,EAAE,SAAS,KAAK,WAAW,CAAC,GAAG;AAC/D,YAAM,IAAI,KAAK,aAAa,yBAAyB,WAAW,qDAAqD;AAAA,IACtH;AACA,SAAK,OAAO,KAAK,WAAW;AAC5B,SAAK,eAAe,KAAK,mBAAmB,KAAK,SAAS,UAAU,KAAK;AACzE,SAAK,eAAe,KAAK,mBAAmB,KAAK,SAAS,UAAU,KAAK;AAAA,EAC1E;AAAA,EAEA,sBAAsB;AACrB,WAAO,CAAC,GAAG,KAAK,eAAe,OAAO,CAAC,EAAE,OAAO,OAAK,CAAC,EAAE,IAAI;AAAA,EAC7D;AAAA,EAEA,oBAAoB;AACnB,WAAO,CAAC,GAAG,KAAK,eAAe,OAAO,CAAC,EAAE,OAAO,OAAK,EAAE,IAAI;AAAA,EAC5D;AAAA,EAEA,cAAc,MAAc;AAC3B,QAAI,KAAK,UAAU,SAAS;AAC3B,YAAM,IAAI,KAAK,aAAa,gEAAgE;AAAA,IAC7F;AACA,UAAM,OAAO,KAAK,QAAQ,MAAM,EAAE,EAAE,MAAM,IAAI;AAC9C,UAAM,YAAY,KAAK,MAAM,EAAG,MAAM,GAAI,EAAE,MAAM,CAAC;AACnD,QAAI,UAAU,KAAK,UAAQ,KAAK,SAAS,EAAE,GAAG;AAC7C,YAAM,IAAI,KAAK,aAAa,2CAA2C;AAAA,IACxE;AAEA,UAAM,aAAa,oBAAI,IAAoB;AAC3C,eAAW,OAAO,MAAM;AACvB,YAAM,cAAc,CAAC;AACrB,YAAM,iBAAiB,CAAC;AACxB,YAAM,CAAC,MAAM,GAAG,QAAQ,IAAI,IAAI,MAAM,GAAI;AAC1C,eAAS,IAAI,GAAG,IAAI,SAAS,QAAQ,KAAK;AACzC,gBAAQ,SAAS,CAAC,EAAE,KAAK,EAAE,YAAY,GAAG;AAAA,UAC1C,KAAK;AACJ,gBAAI,CAAC,UAAU,CAAC,EAAG,OAAM,IAAI,KAAK,aAAa,0CAA0C;AACzF,wBAAY,KAAK,UAAU,CAAC,CAAC;AAC7B;AAAA,UACD,KAAK;AACJ,gBAAI,CAAC,UAAU,CAAC,EAAG,OAAM,IAAI,KAAK,aAAa,0CAA0C;AACzF,2BAAe,KAAK,UAAU,CAAC,CAAC;AAChC;AAAA,QACD;AAAA,MACD;AACA,UAAI,KAAK,SAAS,GAAI,OAAM,IAAI,KAAK,aAAa,6CAA6C;AAC/F,YAAM,SAAiB;AAAA,QACtB,IAAI,KAAK,IAAI;AAAA,QACb,MAAM,KAAK,KAAK;AAAA,QAChB,OAAO;AAAA,QACP;AAAA,QACA;AAAA,MACD;AACA,iBAAW,IAAI,OAAO,IAAI,MAAM;AAAA,IACjC;AACA,SAAK,iBAAiB;AAAA,EACvB;AAAA,EAEA,iBAAiB,MAAc,cAAwB,CAAC,GAAG,iBAA2B,CAAC,GAAG;AACzF,QAAI,KAAK,UAAU,MAAO,OAAM,IAAI,KAAK,aAAa,8CAA8C;AACpG,QAAI,KAAK,SAAS,GAAI,OAAM,IAAI,KAAK,aAAa,6CAA6C;AAC/F,QAAI,YAAY,KAAK,UAAQ,KAAK,SAAS,EAAE,KAAK,eAAe,KAAK,UAAQ,KAAK,SAAS,EAAE,GAAG;AAChG,YAAM,IAAI,KAAK,aAAa,2CAA2C;AAAA,IACxE;AACA,UAAM,SAAiB;AAAA,MACtB,IAAI,KAAK,IAAI;AAAA,MACb;AAAA,MACA,OAAO;AAAA,MACP;AAAA,MACA;AAAA,IACD;AACA,SAAK,eAAe,IAAI,OAAO,IAAI,MAAM;AACzC,WAAO;AAAA,EACR;AAAA,EAEA,oBAAoB,MAAc;AACjC,QAAI,KAAK,UAAU,MAAO,OAAM,IAAI,KAAK,aAAa,gDAAgD;AACtG,UAAM,SAAS,KAAK,eAAe,IAAI,KAAK,IAAI,CAAC;AACjD,QAAI,CAAC,OAAQ,OAAM,IAAI,KAAK,aAAa,WAAW,IAAI,cAAc;AACtE,WAAO,MAAM,aAAa,MAAM;AAChC,SAAK,eAAe,OAAO,OAAO,EAAE;AACpC,QAAI,KAAK,UAAU,WAAW,CAAC,KAAK,oBAAoB,EAAE,QAAQ;AACjE,WAAK,IAAI,iFAAiF;AAAA,IAC3F;AACA,WAAO;AAAA,EACR;AAAA,EAEA,aAAa,MAAc,UAAmB;AAC7C,QAAI,KAAK,UAAU,MAAO,OAAM,IAAI,KAAK,aAAa,iDAAiD;AACvG,UAAM,SAAS,KAAK,eAAe,IAAI,KAAK,IAAI,CAAC,KAAK,KAAK,iBAAiB,IAAI;AAChF,QAAI,UAAU;AACb,YAAM,OAAO,KAAK,MAAM,IAAI,KAAK,QAAQ,CAAC;AAC1C,UAAI,CAAC,KAAM,OAAM,IAAI,KAAK,aAAa,SAAS,QAAQ,cAAc;AACtE,WAAK,UAAU,MAAM;AACrB,UAAI,KAAK,UAAU,WAAW,CAAC,KAAK,oBAAoB,EAAE,QAAQ;AACjE,eAAO,KAAK,IAAI,iFAAiF;AAAA,MAClG;AAAA,IACD,OAAO;AACN,aAAO,MAAM,aAAa,MAAM;AAAA,IACjC;AAAA,EACD;AAAA,EAEA,QAAQ,MAAc;AACrB,QAAI,KAAK,UAAU,QAAS,OAAM,IAAI,KAAK,aAAa,sDAAsD;AAC9G,QAAI,KAAK,SAAS,GAAI,OAAM,IAAI,KAAK,aAAa,2CAA2C;AAC7F,UAAM,OAAO,IAAI,KAAK,MAAM,IAAI;AAChC,SAAK,MAAM,IAAI,KAAK,IAAI,IAAI;AAC5B,UAAM,QAAQ,CAAC,GAAG,KAAK,MAAM,OAAO,CAAC;AACrC,SAAK,QAAQ,MAAM,OAAO,MAAM,MAAM,EAAE,QAAQ,CAAC;AACjD,WAAO;AAAA,EACR;AAAA,EAEA,WAAW,MAAc;AACxB,QAAI,KAAK,UAAU,QAAS,OAAM,IAAI,KAAK,aAAa,wDAAwD;AAChH,UAAM,OAAO,KAAK,MAAM,IAAI,KAAK,IAAI,CAAC;AACtC,QAAI,CAAC,KAAM,OAAM,IAAI,KAAK,aAAa,SAAS,IAAI,cAAc;AAClE,SAAK,QAAQ,KAAK,MAAM,OAAO,OAAK,MAAM,IAAI;AAC9C,SAAK,MAAM,OAAO,KAAK,EAAE;AACzB,WAAO;AAAA,EACR;AAAA,EAEA,YAAY,MAAc;AACzB,QAAI,KAAK,UAAU,MAAO,OAAM,IAAI,KAAK,aAAa,gDAAgD;AACtG,UAAM,OAAO,KAAK,MAAM,IAAI,KAAK,IAAI,CAAC;AACtC,QAAI,CAAC,KAAM,OAAM,IAAI,KAAK,aAAa,SAAS,IAAI,cAAc;AAClE,QAAI,KAAK,UAAW,OAAM,IAAI,KAAK,aAAa,QAAQ,IAAI,wBAAwB;AACpF,QAAI,KAAK,mBAAmB,KAAM,OAAM,IAAI,KAAK,aAAa,0CAA0C;AACxG,SAAK,YAAY;AACjB,WAAO;AAAA,EACR;AAAA,EAEA,cAAc,MAAc;AAC3B,QAAI,KAAK,UAAU,MAAO,OAAM,IAAI,KAAK,aAAa,kDAAkD;AACxG,UAAM,OAAO,KAAK,MAAM,IAAI,KAAK,IAAI,CAAC;AACtC,QAAI,CAAC,KAAM,OAAM,IAAI,KAAK,aAAa,SAAS,IAAI,cAAc;AAClE,QAAI,CAAC,KAAK,UAAW,OAAM,IAAI,KAAK,aAAa,QAAQ,IAAI,oBAAoB;AACjF,SAAK,YAAY;AACjB,WAAO;AAAA,EACR;AAAA,EAEA,YAAY,UAAkB,OAAiB;AAC9C,UAAM,OAAO,KAAK,MAAM,IAAI,KAAK,QAAQ,CAAC;AAC1C,QAAI,CAAC,KAAM,OAAM,IAAI,KAAK,aAAa,SAAS,QAAQ,cAAc;AACtE,UAAM,eAAe,MAAM,OAAO,UAAQ,CAAC,KAAK,IAAI,KAAK,KAAK,IAAI,EAAE,SAAS,EAAE;AAC/E,QAAI,aAAa,QAAQ;AACxB,YAAM,IAAI,KAAK,aAAa,sBAAsB,aAAa,KAAK,IAAI,CAAC,EAAE;AAAA,IAC5E;AACA,eAAW,MAAM,MAAM,IAAI,IAAI,GAAG;AACjC,YAAM,UAAU,KAAK,SAAS,IAAI,EAAE;AACpC,UAAI,CAAC,SAAS;AACb,aAAK,SAAS,IAAI,IAAI,EAAE,IAAI,KAAK,CAAC;AAAA,MACnC,OAAO;AACN,gBAAQ,OAAO;AAAA,MAChB;AAAA,IACD;AACA,WAAO;AAAA,EACR;AAAA,EAEA,eAAe,OAAiB;AAC/B,UAAM,eAAe,MAAM,OAAO,UAAQ,CAAC,KAAK,SAAS,IAAI,KAAK,IAAI,CAAC,CAAC;AACxE,QAAI,aAAa,QAAQ;AACxB,YAAM,IAAI,KAAK,aAAa,qBAAqB,aAAa,KAAK,IAAI,CAAC,EAAE;AAAA,IAC3E;AACA,eAAW,MAAM,MAAM,IAAI,IAAI,GAAG;AACjC,WAAK,SAAS,OAAO,EAAE;AAAA,IACxB;AAAA,EACD;AAAA,EAEA,iBAAiB,UAAkB,QAAgB;AAClD,QAAI,KAAK,SAAS,QAAS,OAAM,IAAI,KAAK,aAAa,uCAAuC;AAC9F,QAAI,KAAK,UAAU,MAAO,OAAM,IAAI,KAAK,aAAa,gDAAgD;AACtG,UAAM,OAAO,KAAK,MAAM,IAAI,KAAK,QAAQ,CAAC;AAC1C,QAAI,CAAC,KAAM,OAAM,IAAI,KAAK,aAAa,SAAS,QAAQ,cAAc;AACtE,UAAM,aAAa,KAAK,UAAU;AAClC,QAAI,cAAc,KAAK,aAAa,KAAU;AAC7C,YAAM,IAAI,KAAK,aAAa,oDAAoD;AAAA,IACjF;AACA,QAAI,KAAK,OAAO,UAAU,IAAI,KAAK,QAAQ;AAC1C,YAAM,IAAI,KAAK,aAAa,yEAAyE;AAAA,IACtG;AACA,SAAK,UAAU;AACf,WAAO;AAAA,EACR;AAAA,EAEA,QAAQ;AACP,QAAI,KAAK,UAAU,QAAS,OAAM,IAAI,KAAK,aAAa,kCAAkC;AAC1F,QAAI,KAAK,MAAM,OAAO,EAAG,OAAM,IAAI,KAAK,aAAa,8CAA8C;AACnG,UAAM,eAAe,CAAC,GAAG,KAAK,MAAM,OAAO,CAAC,EAAE,OAAO,OAAK,EAAE,OAAO,IAAI,KAAK,MAAM,EAAE,IAAI,OAAK,EAAE,IAAI;AACnG,QAAI,aAAa,QAAQ;AACxB,YAAM,IAAI,KAAK,aAAa,0FAA0F,aAAa,KAAK,IAAI,CAAC,EAAE;AAAA,IAChJ;AACA,SAAK,KAAK;AAAA,EACX;AAAA,EAEA,QAAQ;AACP,UAAM,QAAQ,CAAC,GAAG,KAAK,MAAM,OAAO,CAAC;AACrC,eAAW,QAAQ,OAAO;AACzB,WAAK,UAAU,KAAK;AACpB,WAAK,YAAY;AACjB,iBAAW,UAAU,KAAK,SAAS;AAClC,eAAO,OAAO;AACd,eAAO,QAAQ;AAAA,MAChB;AACA,WAAK,UAAU,CAAC;AAAA,IACjB;AACA,SAAK,YAAY;AACjB,SAAK,QAAQ,MAAM,OAAO,MAAM,MAAM,EAAE,QAAQ,CAAC;AACjD,SAAK,cAAc;AACnB,SAAK,cAAc;AACnB,SAAK,QAAQ;AACb,SAAK,YAAY,KAAK,qBAAqB,CAAC;AAAA,EAC7C;AAAA,EAEA,OAAO;AACN,SAAK,QAAQ;AACb,QAAI,CAAC,KAAK,MAAM,OAAO,UAAQ,CAAC,KAAK,YAAY,CAAC,EAAE,QAAQ;AAC3D,aAAO,KAAK,IAAI,oFAAoF;AAAA,IACrG;AACA,QAAI,CAAC,KAAK,oBAAoB,EAAE,QAAQ;AACvC,aAAO,KAAK,IAAI,iFAAiF;AAAA,IAClG;AACA,OAAG;AACF,WAAK,iBAAiB,KAAK,MAAM,MAAM;AACvC,WAAK,MAAM,KAAK,KAAK,cAAc;AAAA,IACpC,SAAS,KAAK,eAAe,YAAY;AACzC,SAAK,YAAY,KAAK,qBAAqB,CAAC;AAC5C,SAAK,YAAY,sBAAsB,iBAAM,WAAW,KAAK,eAAe,IAAI,CAAC,+CAA+C,KAAK,eAAe,YAAY,EAAE,IAAI,OAAK,8BAA8B,iBAAM,WAAW,CAAC,CAAC,aAAa,EAAE,KAAK,GAAG,CAAC,EAAE;AACtP,SAAK,cAAc;AAAA,EACpB;AAAA,EAEA,SAAS,MAAY,QAAgB;AACpC,QAAI,KAAK,UAAU,MAAO,OAAM,IAAI,KAAK,aAAa,wCAAwC;AAC9F,UAAM,UAAU,KAAK,SAAS,IAAI,KAAK,EAAE;AACzC,QAAI,CAAC,WAAW,QAAQ,SAAS,KAAK,eAAgB,MAAK,WAAW,IAAI;AAG1E,SAAK,YAAY,KAAK,MAAM,MAAM;AAClC,SAAK,UAAU,QAAQ,KAAK,UAAU,IAAI,CAAE;AAE5C,UAAM,SAAS,KAAK,eAAe,IAAI,KAAK,MAAM,CAAC;AACnD,QAAI,CAAC,OAAQ,OAAM,IAAI,KAAK,aAAa,GAAG,MAAM,yBAAyB;AAC3E,QAAI,OAAO,KAAM,OAAM,IAAI,KAAK,aAAa,GAAG,OAAO,IAAI,4BAA4B;AACvF,SAAK,cAAc;AACnB,SAAK,kBAAkB;AACvB,QAAI,KAAK,SAAS,SAAS;AAC1B,WAAK,YAAY,iBAAM,gBAAgB,KAAK,eAAe,IAAI,0BAA0B,KAAK,gBAAgB,IAAI,cAAc;AAChI,WAAK,eAAe,UAAU,KAAK,eAAe;AAClD,WAAK,KAAK;AAAA,IACX,OAAO;AACN,WAAK,QAAQ;AACb,WAAK,aAAa,KAAK;AACvB,WAAK,gBAAgB,KAAK;AAC1B,WAAK,YAAY,iBAAM,wCAAwC,KAAK,IAAI,4BAA4B,KAAK,eAAe,IAAI,gCAAgC,OAAO,IAAI,0BAA0B;AACjM,YAAM,YAAY,iBAAM,eAAe,KAAK,KAAK,KAAK,YAAY,OAAO,IAAI;AAC7E,iBAAW,eAAe,KAAK,SAAS,OAAO,GAAG;AACjD,YAAI,YAAY,SAAS,KAAK,eAAgB;AAC9C,cAAM,UAAU,MAAM,SAAS,YAAY,EAAE;AAC7C,iBAAS,OAAO,KAAK,MAAM,SAAS;AACpC,iBAAS;AAAA,UAAO,KAAK;AAAA,UACpB;AAAA,QAAwH;AAAA,MAC1H;AACA,WAAK,YAAY;AACjB,WAAK,cAAc;AAAA,IACpB;AAAA,EACD;AAAA,EAEA,IAAI,MAAY,KAAa;AAC5B,QAAI,KAAK,UAAU,MAAO,OAAM,IAAI,KAAK,aAAa,gDAAgD;AACtG,UAAM,OAAO,KAAK,SAAS,IAAI,KAAK,EAAE,GAAG;AACzC,QAAI,CAAC,KAAM,OAAM,IAAI,KAAK,aAAa,mCAAmC;AAC1E,QAAI,KAAK,YAAY,EAAG,OAAM,IAAI,KAAK,aAAa,+CAA+C;AAEnG,QAAI,MAAM,KAAK,OAAO,EAAG,OAAM,IAAI,KAAK,aAAa,2CAA2C;AAEhG,QAAI,KAAK,SAAS,SAAS;AAC1B,UAAI,KAAK,WAAW,IAAI,IAAI,EAAG,OAAM,IAAI,KAAK,aAAa,qCAAqC;AAChG,UAAI,OAAO,KAAK,OAAQ,OAAM,IAAI,KAAK,aAAa,+CAA+C;AAEnG,YAAM,MAAM,OAAO,KAAK,MAAM,KAAK,IAAI,IAAI,GAAI,CAAC,yCAAyC,GAAG,qBAAqB,iBAAM,WAAW,KAAK,gBAAgB,IAAI,CAAC;AAC5J,iBAAW,WAAW,KAAK,SAAS,OAAO,GAAG;AAC7C,YAAI,QAAQ,SAAS,KAAM;AAC3B,cAAM,SAAS,QAAQ,EAAE,GAAG,OAAO,KAAK,MAAM,GAAG;AAAA,MAClD;AAEA,UAAI,MAAM,KAAK,YAAY;AAC1B,aAAK,aAAa;AAClB,aAAK,gBAAgB;AAAA,MACtB;AACA,WAAK,WAAW,IAAI,MAAM,GAAG;AAC7B,UAAI,KAAK,WAAW,SAAS,KAAK,MAAM,MAAM;AAC7C,aAAK,iBAAiB;AAAA,MACvB;AAAA,IACD,OAAO;AACN,UAAI,OAAO,KAAK,WAAY,OAAM,IAAI,KAAK,aAAa,+CAA+C;AACvG,WAAK,aAAa;AAClB,WAAK,gBAAgB;AACrB,WAAK,YAAY;AACjB,WAAK,cAAc;AAAA,IACpB;AAAA,EACD;AAAA,EAES,cAAc,SAAiB,MAAY;AACnD,QAAI,KAAK,UAAU,SAAS,KAAK,SAAS,QAAS;AACnD,QAAI,QAAQ,WAAW,GAAG,EAAG,WAAU,QAAQ,MAAM,CAAC;AACtD,QAAI,OAAO,QAAQ,QAAQ,KAAK,GAAG,CAAC,GAAG;AACtC,WAAK,IAAI,MAAM,aAAa,OAAO,CAAC;AACpC,aAAO;AAAA,IACR;AAAA,EACD;AAAA,EAES,aAAa,SAAiB,MAAY;AAClD,QAAI,KAAK,UAAU,SAAS,KAAK,SAAS,QAAS;AACnD,QAAI,QAAQ,WAAW,GAAG,EAAG,WAAU,QAAQ,MAAM,CAAC;AACtD,QAAI,OAAO,QAAQ,QAAQ,KAAK,GAAG,CAAC,GAAG;AACtC,WAAK,KAAK,OAAO;AACjB,UAAI;AACH,aAAK,IAAI,MAAM,aAAa,OAAO,CAAC;AAAA,MACrC,SAAS,GAAQ;AAChB,YAAI,EAAE,MAAM,SAAS,cAAc,GAAG;AACrC,eAAK,OAAO,KAAK,MAAM,iBAAM,wCAAwC,EAAE,OAAO,SAAS;AAAA,QACxF,OAAO;AACN,eAAK,OAAO,KAAK,MAAM,8FAA8F;AAAA,QACtH;AAAA,MACD;AAAA,IACD;AAAA,EACD;AAAA,EAEA,UAAU;AACT,QAAI,KAAK,UAAU,MAAO,OAAM,IAAI,KAAK,aAAa,0CAA0C;AAChG,SAAK,kBAAkB;AACvB,SAAK,YAAY,KAAK,KAAK,eAAe,IAAI,wCAAwC;AACtF,SAAK,cAAc;AACnB,SAAK,KAAK;AAAA,EACX;AAAA,EAEA,mBAAmB;AAClB,QAAI,KAAK,SAAS,SAAS;AAC1B,UAAI,MAAM;AACV,UAAI,CAAC,KAAK,WAAW,IAAI,KAAK,cAAc,GAAG;AAC9C,eAAO,iBAAM,eAAe,KAAK,eAAe,IAAI,YAAY,KAAK,MAAM;AAAA,MAC5E;AACA,iBAAW,CAAC,MAAM,GAAG,KAAK,KAAK,YAAY;AAC1C,eAAO,iBAAM,eAAe,KAAK,IAAI,YAAY,GAAG;AAAA,MACrD;AACA,aAAO;AACP,WAAK,YAAY,GAAG;AACpB,WAAK,WAAW,MAAM;AAAA,IACvB;AACA,SAAK,YAAY,iBAAM,gBAAgB,KAAK,cAAc,IAAI,yBAAyB,KAAK,gBAAgB,IAAI,sBAAsB,KAAK,UAAU,eAAe;AACpK,SAAK,cAAc,UAAU,KAAK,iBAAiB,KAAK,UAAU;AAClE,SAAK,cAAc;AACnB,SAAK,KAAK;AAAA,EACX;AAAA,EAEA,cAAc;AACb,QAAI,KAAK,UAAU,MAAO,OAAM,IAAI,KAAK,aAAa,yCAAyC;AAC/F,QAAI,CAAC,KAAK,UAAW,OAAM,IAAI,KAAK,aAAa,8CAA8C;AAC/F,SAAK,QAAQ,KAAK;AAClB,SAAK,YAAY;AACjB,QAAI,KAAK,iBAAiB;AACzB,WAAK,cAAc,aAAa,KAAK,eAAe;AACpD,WAAK,cAAc,WAAW,KAAK;AAAA,IACpC;AACA,SAAK,KAAK;AAAA,EACX;AAAA,EAEA,gBAAgB;AACf,kBAAc,KAAK,QAAQ;AAC3B,SAAK,mBAAmB,KAAK;AAC7B,SAAK,KAAK,IAAI,qBAAqB;AAAA,EACpC;AAAA,EAEA,gBAAgB;AACf,QAAI,CAAC,KAAK,aAAc;AACxB,SAAK,cAAc;AACnB,SAAK,UAAU,OAAO,IAAI;AAC1B,SAAK,WAAW,YAAY,MAAM,KAAK,aAAa,GAAG,GAAI;AAAA,EAC5D;AAAA,EAEA,gBAAgB;AACf,kBAAc,KAAK,QAAQ;AAC3B,SAAK,mBAAmB,KAAK;AAC7B,SAAK,KAAK,IAAI,qBAAqB;AAAA,EACpC;AAAA,EAEA,gBAAgB;AACf,QAAI,CAAC,KAAK,aAAc;AACxB,SAAK,cAAc;AACnB,SAAK,UAAU;AACf,SAAK,WAAW,YAAY,MAAM,KAAK,aAAa,GAAG,GAAI;AAAA,EAC5D;AAAA,EAEA,eAAe;AACd,SAAK;AACL,QAAI,CAAC,KAAK,kBAAkB;AAC3B,WAAK,QAAQ;AAAA,IACd,OAAO;AACN,WAAK,UAAU,MAAM,IAAI;AACzB,UAAI,KAAK,mBAAmB,OAAO,KAAK,CAAC,IAAI,IAAI,CAAC,EAAE,SAAS,KAAK,gBAAgB,GAAG;AACpF,aAAK,YAAY,qCAAqC,KAAK,gBAAgB,uBAAuB;AAAA,MACnG;AAAA,IACD;AAAA,EACD;AAAA,EAEA,eAAe;AACd,SAAK;AACL,QAAI,CAAC,KAAK,kBAAkB;AAC3B,WAAK,iBAAiB;AAAA,IACvB,OAAO;AACN,WAAK,UAAU,IAAI;AACnB,UAAI,KAAK,mBAAmB,OAAO,KAAK,CAAC,IAAI,IAAI,CAAC,EAAE,SAAS,KAAK,gBAAgB,GAAG;AACpF,aAAK,YAAY,qCAAqC,KAAK,gBAAgB,uBAAuB;AAAA,MACnG;AAAA,IACD;AAAA,EACD;AAAA,EAEA,IAAI,SAAkB;AACrB,SAAK,SAAS;AACd,SAAK,YAAY,KAAK,qBAAqB,CAAC;AAC5C,SAAK,YAAY,KAAK,kBAAkB,CAAC;AACzC,QAAI,QAAS,MAAK,YAAY,OAAO;AACrC,SAAK,QAAQ;AAAA,EACd;AAAA,EAES,UAAU;AAClB,SAAK,cAAc;AACnB,SAAK,cAAc;AACnB,UAAM,QAAQ;AAAA,EACf;AACD;AAEO,MAAM,WAA8B;AAAA,EAC1C,SAAS;AAAA,IACR,OAAO,QAAQ,MAAM,MAAM;AAC1B,aAAO,KAAK,YAAY;AACxB,WAAK,SAAS,YAAY,MAAM,IAAI;AACpC,UAAI,KAAK,KAAM,OAAM,IAAI,KAAK,aAAa,8BAA8B,KAAK,KAAK,KAAK,4BAA4B;AACpH,UAAI,KAAK,SAAS,gBAAiB,OAAM,IAAI,KAAK,aAAa,+CAA+C;AAE9G,UAAI;AACJ,UAAI,QAAQ;AACX,0BAAkB,aAAa,MAAM;AACrC,YAAI,kBAAkB,OAAS,kBAAkB,KAAU;AAC1D,gBAAM,IAAI,KAAK,aAAa,yDAAyD;AAAA,QACtF;AAAA,MACD;AACA,YAAM,UAAU,IAAI,QAAQ,MAAM,eAAe;AACjD,cAAQ,UAAU,CAAC,KAAK,EAAE,CAAC;AAC3B,WAAK,OAAO;AACZ,WAAK,aAAa,6BAA6B,KAAK,IAAI,GAAG;AAC3D,WAAK,OAAO,gBAAgB;AAAA,IAC7B;AAAA,IACA,YAAY;AAAA,MACX;AAAA,IACD;AAAA,IACA,MAAM,QAAQ,MAAM,MAAM;AACzB,YAAM,UAAU,KAAK,YAAY,OAAO;AACxC,cAAQ,WAAW,IAAI;AAEvB,cAAQ,MAAM;AACd,WAAK,aAAa,8BAA8B,KAAK,IAAI,GAAG;AAC5D,WAAK,OAAO,eAAe;AAAA,IAC5B;AAAA,IACA,MAAM,QAAQ,MAAM,MAAM;AACzB,YAAM,UAAU,KAAK,YAAY,OAAO;AACxC,cAAQ,WAAW,IAAI;AAEvB,cAAQ,MAAM;AACd,WAAK,aAAa,4BAA4B,KAAK,IAAI,GAAG;AAC1D,WAAK,OAAO,eAAe;AAAA,IAC5B;AAAA,IACA,QAAQ;AAAA,IACR,MAAM;AAAA,IACN,IAAI,QAAQ,MAAM,MAAM;AACvB,YAAM,UAAU,KAAK,YAAY,OAAO;AACxC,cAAQ,WAAW,IAAI;AAEvB,cAAQ,IAAI;AACZ,WAAK,aAAa,4BAA4B,KAAK,IAAI,GAAG;AAC1D,WAAK,OAAO,aAAa;AAAA,IAC1B;AAAA,IACA,MAAM;AAAA,IACN,QAAQ,QAAQ,MAAM,MAAM;AAC3B,WAAK,aAAa;AAClB,YAAM,UAAU,KAAK,YAAY,OAAO;AACxC,WAAK,aAAa,QAAQ,qBAAqB,CAAC;AAAA,IACjD;AAAA,IACA,UAAU,QAAQ,MAAM,MAAM;AAC7B,WAAK,aAAa;AAClB,YAAM,UAAU,KAAK,YAAY,OAAO;AACxC,WAAK,aAAa,QAAQ,kBAAkB,CAAC;AAAA,IAC9C;AAAA,IACA,OAAO,QAAQ,MAAM,MAAM;AAC1B,YAAM,UAAU,KAAK,YAAY,OAAO;AACxC,cAAQ,WAAW,IAAI;AAEvB,UAAI,CAAC,OAAQ,QAAO,KAAK,MAAM,sBAAsB;AACrD,YAAM,SAAS,aAAa,MAAM;AAClC,cAAQ,UAAU,MAAM;AACxB,WAAK,aAAa,GAAG,KAAK,IAAI,2BAA2B,MAAM,GAAG;AAClE,WAAK,OAAO,kBAAkB,MAAM,GAAG,MAAM,EAAE;AAAA,IAChD;AAAA,IACA,YAAY;AAAA,MACX;AAAA,IACD;AAAA,IACA,WAAW,QAAQ,MAAM,MAAM;AAC9B,YAAM,UAAU,KAAK,YAAY,OAAO;AACxC,cAAQ,WAAW,IAAI;AAEvB,UAAI,CAAC,OAAQ,QAAO,KAAK,MAAM,0BAA0B;AACzD,YAAM,SAAS,SAAS,MAAM;AAC9B,cAAQ,cAAc,MAAM;AAC5B,WAAK,aAAa,GAAG,KAAK,IAAI,yCAAyC,MAAM,GAAG;AAAA,IACjF;AAAA,IACA,gBAAgB;AAAA,MACf;AAAA,IACD;AAAA,IACA,WAAW,QAAQ,MAAM,MAAM;AAC9B,YAAM,UAAU,KAAK,YAAY,OAAO;AACxC,cAAQ,WAAW,IAAI;AAEvB,UAAI,CAAC,OAAQ,QAAO,KAAK,MAAM,0BAA0B;AACzD,YAAM,SAAS,SAAS,MAAM;AAC9B,cAAQ,cAAc,MAAM;AAC5B,WAAK,aAAa,GAAG,KAAK,IAAI,yCAAyC,MAAM,GAAG;AAAA,IACjF;AAAA,IACA,gBAAgB;AAAA,MACf;AAAA,IACD;AAAA,IACA,SAAS,QAAQ,MAAM,MAAM;AAC5B,YAAM,UAAU,KAAK,YAAY,OAAO;AACxC,cAAQ,WAAW,IAAI;AAEvB,UAAI,CAAC,OAAQ,QAAO,KAAK,MAAM,wBAAwB;AACvD,YAAM,UAAU,KAAK,QAAQ,MAAM,IAAI,IAAI,SAAS,MAAM;AAC1D,cAAQ,gBAAgB,OAAO;AAC/B,WAAK,aAAa,GAAG,KAAK,IAAI,gCAAgC,OAAO,WAAW;AAAA,IACjF;AAAA,IACA,cAAc;AAAA,MACb;AAAA,IACD;AAAA,IACA,SAAS,QAAQ,MAAM,MAAM;AAC5B,YAAM,UAAU,KAAK,YAAY,OAAO;AACxC,cAAQ,WAAW,IAAI;AAEvB,UAAI,CAAC,OAAQ,QAAO,KAAK,MAAM,wBAAwB;AACvD,YAAM,UAAU,SAAS,MAAM;AAC/B,cAAQ,gBAAgB,OAAO;AAC/B,WAAK,aAAa,GAAG,KAAK,IAAI,yBAAyB,OAAO,WAAW;AAAA,IAC1E;AAAA,IACA,cAAc;AAAA,MACb;AAAA,IACD;AAAA,IACA,QAAQ,QAAQ,MAAM,MAAM;AAC3B,YAAM,UAAU,KAAK,YAAY,OAAO;AACxC,cAAQ,WAAW,IAAI;AAEvB,UAAI,CAAC,OAAQ,QAAO,KAAK,MAAM,uBAAuB;AACtD,cAAQ,QAAQ,MAAM;AACtB,WAAK,aAAa,GAAG,KAAK,IAAI,4BAA4B,KAAK,MAAM,CAAC,GAAG;AAAA,IAC1E;AAAA,IACA,aAAa;AAAA,MACZ;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,IACD;AAAA,IACA,UAAU;AAAA,IACV,UAAU,QAAQ,MAAM,MAAM;AAC7B,YAAM,UAAU,KAAK,YAAY,OAAO;AACxC,cAAQ,WAAW,IAAI;AAEvB,YAAM,SAAS,OAAO,MAAM,GAAG,EAAE,IAAI,OAAK,EAAE,KAAK,CAAC;AAClD,UAAI,CAAC,OAAO,OAAQ,QAAO,KAAK,MAAM,yBAAyB;AAC/D,cAAQ,UAAU,MAAM;AACxB,WAAK,aAAa,GAAG,KAAK,IAAI,UAAU,KAAK,aAAa,OAAO,IAAI,OAAK,MAAM,SAAS,CAAC,EAAG,IAAI,CAAC,CAAC,oBAAoB,KAAK,OAAO,OAAO,MAAM,CAAC,GAAG;AAAA,IACrJ;AAAA,IACA,eAAe;AAAA,MACd;AAAA,IACD;AAAA,IACA,aAAa;AAAA,IACb,aAAa,QAAQ,MAAM,MAAM;AAChC,YAAM,UAAU,KAAK,YAAY,OAAO;AACxC,cAAQ,WAAW,IAAI;AAEvB,YAAM,SAAS,OAAO,MAAM,GAAG,EAAE,IAAI,OAAK,EAAE,KAAK,CAAC;AAClD,UAAI,CAAC,OAAO,OAAQ,QAAO,KAAK,MAAM,4BAA4B;AAClE,cAAQ,aAAa,MAAM;AAC3B,WAAK,aAAa,GAAG,KAAK,IAAI,YAAY,KAAK,aAAa,OAAO,IAAI,OAAK,MAAM,SAAS,CAAC,GAAG,QAAQ,CAAC,CAAC,CAAC,oBAAoB,KAAK,OAAO,OAAO,MAAM,CAAC,GAAG;AAAA,IAC5J;AAAA,IACA,kBAAkB;AAAA,MACjB;AAAA,IACD;AAAA,IACA,MAAM,cAAc,QAAQ,MAAM,MAAM;AACvC,YAAM,UAAU,KAAK,YAAY,OAAO;AACxC,cAAQ,WAAW,IAAI;AAEvB,UAAI,CAAC,OAAQ,QAAO,KAAK,MAAM,6BAA6B;AAC5D,UAAI,CAAC,2CAA2C,KAAK,MAAM,GAAG;AAC7D,cAAM,IAAI,KAAK,aAAa,uBAAuB;AAAA,MACpD;AACA,UAAI,OAAO;AACX,UAAI;AACH,eAAO,UAAM,gBAAI,4BAA4B,OAAO,MAAM,GAAG,EAAE,IAAI,CAAC,EAAE,EAAE,IAAI;AAAA,MAC7E,QAAQ;AAAA,MAAC;AACT,UAAI,CAAC,KAAM,OAAM,IAAI,KAAK,aAAa,oCAAoC;AAE3E,cAAQ,cAAc,IAAI;AAC1B,WAAK,aAAa,GAAG,KAAK,IAAI,kCAAkC,MAAM,GAAG;AAAA,IAC1E;AAAA,IACA,mBAAmB;AAAA,MAClB;AAAA,MACA;AAAA,MACA;AAAA,IACD;AAAA,IACA,UAAU,QAAQ,MAAM,MAAM;AAC7B,YAAM,UAAU,KAAK,YAAY,OAAO;AACxC,cAAQ,WAAW,IAAI;AAEvB,YAAM,CAAC,YAAY,aAAa,IAAI,OAAO,MAAM,GAAG;AACpD,YAAM,cAAc,WAAW,MAAM,GAAG,EAAE,IAAI,UAAQ,KAAK,KAAK,CAAC;AACjE,YAAM,iBAAiB,gBAAgB,cAAc,MAAM,GAAG,EAAE,IAAI,UAAQ,KAAK,KAAK,CAAC,IAAI,CAAC;AAC5F,YAAM,OAAO,YAAY,MAAM;AAE/B,UAAI,CAAC,KAAM,QAAO,KAAK,MAAM,yBAAyB;AACtD,YAAM,SAAS,QAAQ,iBAAiB,MAAM,aAAa,cAAc;AACzE,WAAK,aAAa,GAAG,KAAK,IAAI,iBAAiB,OAAO,IAAI,kBAAkB;AAAA,IAC7E;AAAA,IACA,eAAe;AAAA,MACd;AAAA,IACD;AAAA,IACA,aAAa,QAAQ,MAAM,MAAM;AAChC,YAAM,UAAU,KAAK,YAAY,OAAO;AACxC,cAAQ,WAAW,IAAI;AAEvB,UAAI,CAAC,OAAQ,QAAO,KAAK,MAAM,4BAA4B;AAC3D,YAAM,SAAS,QAAQ,oBAAoB,MAAM;AACjD,WAAK,aAAa,GAAG,KAAK,IAAI,mBAAmB,OAAO,IAAI,oBAAoB;AAAA,IACjF;AAAA,IACA,kBAAkB;AAAA,MACjB;AAAA,IACD;AAAA,IACA,aAAa,QAAQ,MAAM,MAAM;AAChC,YAAM,UAAU,KAAK,YAAY,OAAO;AACxC,cAAQ,WAAW,IAAI;AAEvB,YAAM,CAAC,QAAQ,IAAI,IAAI,OAAO,MAAM,GAAG,EAAE,IAAI,OAAK,EAAE,KAAK,CAAC;AAC1D,UAAI,CAAC,OAAQ,QAAO,KAAK,MAAM,4BAA4B;AAC3D,UAAI,MAAM;AACT,gBAAQ,aAAa,QAAQ,IAAI;AACjC,aAAK,aAAa,GAAG,KAAK,IAAI,oBAAoB,MAAM,YAAY,IAAI,GAAG;AAAA,MAC5E,OAAO;AACN,gBAAQ,aAAa,MAAM;AAC3B,aAAK,UAAU,GAAG,KAAK,IAAI,oBAAoB,MAAM,qBAAqB;AAAA,MAC3E;AAAA,IACD;AAAA,IACA,kBAAkB;AAAA,MACjB;AAAA,IACD;AAAA,IACA,QAAQ,QAAQ,MAAM,MAAM;AAC3B,YAAM,UAAU,KAAK,YAAY,OAAO;AACxC,cAAQ,WAAW,IAAI;AAEvB,YAAM,CAAC,MAAM,GAAG,YAAY,IAAI,OAAO,MAAM,GAAG,EAAE,IAAI,OAAK,EAAE,KAAK,CAAC;AACnE,UAAI,CAAC,KAAM,QAAO,KAAK,MAAM,uBAAuB;AACpD,YAAM,OAAO,QAAQ,QAAQ,IAAI;AACjC,WAAK,aAAa,GAAG,KAAK,IAAI,eAAe,KAAK,IAAI,kBAAkB;AACxE,cAAQ,YAAY,KAAK,MAAM,YAAY;AAAA,IAC5C;AAAA,IACA,aAAa;AAAA,MACZ;AAAA,IACD;AAAA,IACA,WAAW,QAAQ,MAAM,MAAM;AAC9B,YAAM,UAAU,KAAK,YAAY,OAAO;AACxC,cAAQ,WAAW,IAAI;AAEvB,UAAI,CAAC,OAAQ,QAAO,KAAK,MAAM,0BAA0B;AACzD,YAAM,OAAO,QAAQ,WAAW,MAAM;AACtC,WAAK,aAAa,GAAG,KAAK,IAAI,iBAAiB,KAAK,IAAI,oBAAoB;AAAA,IAC7E;AAAA,IACA,gBAAgB;AAAA,MACf;AAAA,IACD;AAAA,IACA,YAAY,QAAQ,MAAM,MAAM;AAC/B,YAAM,UAAU,KAAK,YAAY,OAAO;AACxC,cAAQ,WAAW,IAAI;AAEvB,UAAI,CAAC,OAAQ,QAAO,KAAK,MAAM,2BAA2B;AAC1D,YAAM,OAAO,QAAQ,YAAY,MAAM;AACvC,WAAK,aAAa,GAAG,KAAK,IAAI,mBAAmB,KAAK,IAAI,GAAG;AAAA,IAC9D;AAAA,IACA,iBAAiB;AAAA,MAChB;AAAA,MACA;AAAA,IACD;AAAA,IACA,cAAc,QAAQ,MAAM,MAAM;AACjC,YAAM,UAAU,KAAK,YAAY,OAAO;AACxC,cAAQ,WAAW,IAAI;AAEvB,UAAI,CAAC,OAAQ,QAAO,KAAK,MAAM,6BAA6B;AAC5D,YAAM,OAAO,QAAQ,cAAc,MAAM;AACzC,WAAK,aAAa,GAAG,KAAK,IAAI,qBAAqB,KAAK,IAAI,GAAG;AAAA,IAChE;AAAA,IACA,mBAAmB;AAAA,MAClB;AAAA,IACD;AAAA,IACA,YAAY;AAAA,IACZ,YAAY,QAAQ,MAAM,MAAM;AAC/B,YAAM,UAAU,KAAK,YAAY,OAAO;AACxC,cAAQ,WAAW,IAAI;AAEvB,YAAM,CAAC,UAAU,GAAG,YAAY,IAAI,OAAO,MAAM,GAAG,EAAE,IAAI,OAAK,EAAE,KAAK,CAAC;AACvE,UAAI,CAAC,YAAY,CAAC,aAAa,OAAQ,QAAO,KAAK,MAAM,2BAA2B;AACpF,YAAM,OAAO,QAAQ,YAAY,UAAU,YAAY;AACvD,YAAM,WAAW,aAAa,IAAI,OAAK,MAAM,SAAS,CAAC,GAAG,QAAQ,KAAK,CAAC,CAAC;AACzE,WAAK,aAAa,GAAG,KAAK,IAAI,UAAU,KAAK,aAAa,QAAQ,CAAC,cAAc,KAAK,OAAO,SAAS,MAAM,CAAC,aAAa,KAAK,IAAI,GAAG;AAAA,IACvI;AAAA,IACA,iBAAiB;AAAA,MAChB;AAAA,IACD;AAAA,IACA,eAAe;AAAA,IACf,eAAe,QAAQ,MAAM,MAAM;AAClC,YAAM,UAAU,KAAK,YAAY,OAAO;AACxC,cAAQ,WAAW,IAAI;AAEvB,UAAI,CAAC,OAAQ,QAAO,KAAK,MAAM,8BAA8B;AAC7D,YAAM,eAAe,OAAO,MAAM,GAAG,EAAE,IAAI,OAAK,EAAE,KAAK,CAAC;AACxD,cAAQ,eAAe,YAAY;AACnC,YAAM,WAAW,aAAa,IAAI,OAAK,MAAM,SAAS,CAAC,GAAG,QAAQ,KAAK,CAAC,CAAC;AACzE,WAAK,aAAa,GAAG,KAAK,IAAI,YAAY,KAAK,aAAa,QAAQ,CAAC,cAAc,KAAK,OAAO,SAAS,MAAM,CAAC,GAAG;AAAA,IACnH;AAAA,IACA,oBAAoB;AAAA,MACnB;AAAA,IACD;AAAA,IACA,WAAW,QAAQ,MAAM,MAAM;AAC9B,YAAM,UAAU,KAAK,YAAY,OAAO;AACxC,cAAQ,WAAW,IAAI;AAEvB,YAAM,CAAC,UAAU,MAAM,IAAI,OAAO,MAAM,GAAG,EAAE,IAAI,OAAK,EAAE,KAAK,CAAC;AAC9D,UAAI,CAAC,YAAY,CAAC,OAAQ,QAAO,KAAK,MAAM,0BAA0B;AACtE,YAAM,UAAU,aAAa,MAAM;AACnC,YAAM,OAAO,QAAQ,iBAAiB,UAAU,OAAO;AACvD,WAAK,aAAa,GAAG,KAAK,IAAI,IAAI,UAAU,IAAI,YAAY,OAAO,IAAI,KAAK,IAAI,OAAO,CAAC,YAAY,UAAU,IAAI,SAAS,IAAI,SAAS,KAAK,IAAI,GAAG;AAAA,IACrJ;AAAA,IACA,gBAAgB;AAAA,MACf;AAAA,IACD;AAAA,IACA,KAAK;AAAA,IACL,SAAS,QAAQ,MAAM,MAAM;AAC5B,YAAM,UAAU,KAAK,YAAY,OAAO;AACxC,UAAI,CAAC,OAAQ,QAAO,KAAK,MAAM,wBAAwB;AACvD,cAAQ,SAAS,MAAM,MAAM;AAAA,IAC9B;AAAA,IACA,cAAc;AAAA,MACb;AAAA,IACD;AAAA,IACA,MAAM;AAAA,IACN,QAAQ,QAAQ,MAAM,MAAM;AAC3B,YAAM,UAAU,KAAK,YAAY,OAAO;AACxC,cAAQ,WAAW,IAAI;AAEvB,cAAQ,QAAQ;AAChB,WAAK,aAAa,GAAG,KAAK,IAAI,mCAAmC;AAAA,IAClE;AAAA,IACA,KAAK,QAAQ,MAAM,MAAM;AACxB,YAAM,UAAU,KAAK,YAAY,OAAO;AACxC,cAAQ,WAAW,IAAI;AAEvB,cAAQ,YAAY;AACpB,WAAK,aAAa,GAAG,KAAK,IAAI,6BAA6B;AAAA,IAC5D;AAAA,IACA,QAAQ,QAAQ,MAAM;AACrB,aAAO,KAAK,YAAY;AACxB,WAAK,SAAS,kBAAkB,MAAM,IAAI;AAC1C,UAAI,KAAK,SAAS,iBAAiB;AAClC,cAAM,IAAI,KAAK,aAAa,gCAAgC;AAAA,MAC7D;AACA,WAAK,SAAS,kBAAkB;AAChC,WAAK,aAAa;AAClB,WAAK,UAAU,4CAA4C;AAAA,IAC5D;AAAA,IACA,OAAO,QAAQ,MAAM;AACpB,aAAO,KAAK,YAAY;AACxB,WAAK,SAAS,kBAAkB,MAAM,IAAI;AAC1C,UAAI,CAAC,KAAK,SAAS,iBAAiB;AACnC,cAAM,IAAI,KAAK,aAAa,+BAA+B;AAAA,MAC5D;AACA,aAAO,KAAK,SAAS;AACrB,WAAK,aAAa;AAClB,WAAK,UAAU,2CAA2C;AAAA,IAC3D;AAAA,IACA,SAAS;AAAA,IACT,UAAU;AACT,UAAI,CAAC,KAAK,aAAa,EAAG;AAC1B,YAAM,kBAAkB,CAAC,GAAG,MAAM,MAAM,OAAO,CAAC,EAAE,OAAO,OAAK,EAAE,QAAQ,OAAO,CAAC,EAAE,IAAI,OAAK,EAAE,KAAK;AAClG,WAAK,UAAU,qBAAqB,gBAAgB,KAAK,IAAI,KAAK,MAAM,EAAE;AAAA,IAC3E;AAAA,IACA,IAAI;AAAA,IACJ,OAAO;AACN,WAAK,MAAM,eAAe;AAAA,IAC3B;AAAA,EACD;AAAA,EACA,cAAc;AACb,QAAI,CAAC,KAAK,aAAa,EAAG;AAC1B,SAAK;AAAA,MACJ;AAAA,IAkCD;AAAA,EACD;AAAA,EACA,IAAI,QAAQ;AACX,SAAK,MAAM,qBAAqB,MAAM,EAAE;AAAA,EACzC;AAAA,EACA,MAAM;AACL,UAAM,IAAI,KAAK,aAAa,uFAAuF;AAAA,EACpH;AAAA,EACA,UAAU;AACT,SAAK,YAAY,OAAO;AACxB,SAAK,UAAU;AACf,WAAO;AAAA,EACR;AACD;AAEO,MAAM,eAAqC,WAAS;AAAA,EAC1D,OAAO;AAAA,EACP,YAAY;AAAA,EACZ,SAAS;AAAA,IACR,CAAC,YAAY,KAAK,SAAS,mBAAmB,iBAAiB;AAAA,IAC/D,CAAC,WAAW,CAAC,KAAK,SAAS,mBAAmB,gBAAgB;AAAA,EAC/D;AACD;",
  "names": ["table", "smogonTable"]
}
